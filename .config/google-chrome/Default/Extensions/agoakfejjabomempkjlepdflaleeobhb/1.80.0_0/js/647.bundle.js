
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2c6a26ed-dada-5d84-91e8-2ca073c88ab4")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[647],{32738:(e,t,n)=>{"use strict";n.d(t,{Uc:()=>r,VI:()=>o,X0:()=>c});var a=n(93e3);const r=e=>e?.type===a.Qm.FIREBLOCKS,o=e=>e?.type===a.Qm.WALLET_CONNECT,c=e=>e?.type===a.Qm.PRIMARY},19108:(e,t,n)=>{"use strict";function a(e){return Boolean(e?.addressBTC)}n.d(t,{Z:()=>a})},2409:(e,t,n)=>{"use strict";n.d(t,{F:()=>d,e:()=>l});var a=n(1336),r=n(36609),o=n(68483),c=n(26793),s=n(13673),i=n(67294);function l(e){return{[s.o.BRIDGE]:(0,r.t)("Bridge"),[s.o.SWAP]:(0,r.t)("Swap"),[s.o.SEND]:(0,r.t)("Send"),[s.o.BUY]:(0,r.t)("Buy"),[s.o.DEFI]:(0,r.t)("DeFi"),[s.o.KEYSTONE]:(0,r.t)("Keystone"),[s.o.TOKEN_DETAILS]:(0,r.t)("Token Details")}[e]}function d({functionName:e,hidePageTitle:t,children:n}){const{t:r}=(0,c.$)();return i.createElement(o.Kqy,{sx:{height:"100%",width:"100%"}},!t&&i.createElement(a.V,{variant:a.D.PRIMARY},r("Sorry")),i.createElement(o.Kqy,{sx:{alignItems:"center",justifyContent:"center",flexGrow:1}},i.createElement(o.go2,{size:72,sx:{mb:3,mt:-9}}),i.createElement(o.ZT$,{variant:"h5",sx:{mb:1}},r("Feature Disabled")),i.createElement(o.ZT$,{size:16,align:"center",height:"24px",sx:{color:"text.secondary"}},r("{{functionName}} is currently unavailable.",{functionName:l(e)??r("This Feature")})),i.createElement(o.ZT$,{sx:{color:"text.secondary"}},r("Please check back later and try again.")),n))}},23762:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var a=n(68483),r=n(94277),o=n(67294);function c(){return o.createElement(r.a,null,o.createElement(a.D8x,null))}},13673:(e,t,n)=>{"use strict";n.d(t,{o:()=>h,a:()=>S});var a=n(49530),r=n(32738),o=n(4563),c=n(19108),s=n(9830),i=n(43023),l=n(93e3),d=n(36553),u=n(64631);var m=n(26821),p=n(62334),E=n(23246);let h=function(e){return e.BRIDGE="Bridge",e.BUY="Buy",e.COLLECTIBLES="COLLECTIBLES",e.DEFI="DeFi",e.FEATURE="Feature",e.KEYSTONE="Keystone",e.MANAGE_TOKEN="ManageTokens",e.RECEIVE="Receive",e.SEND="Send",e.SWAP="Swap",e.SIGN="Sign",e.TOKEN_DETAILS="TokenDetails",e}({});const y={[h.BRIDGE]:o.yy.BRIDGE,[h.BUY]:o.yy.BUY,[h.DEFI]:o.yy.DEFI,[h.KEYSTONE]:o.yy.KEYSTONE,[h.SEND]:o.yy.SEND,[h.SWAP]:o.yy.SWAP},f=[h.BRIDGE,h.SEND,h.SWAP,h.SIGN],g=(e,t)=>!![a.a_.BITCOIN,a.a_.BITCOIN_TESTNET].includes(e)&&(!Boolean(t.addressBTC)||(0,r.VI)(t)||(0,r.Uc)(t)&&!(0,c.Z)(t)),x=(e,t)=>{const n=(0,p.p)(e),a=(0,E.v)(e);if(!n&&!a)return!1;const o=Boolean(t.addressPVM),c=Boolean(t.addressAVM);return n&&!o||a&&!c||(0,r.VI)(t)||(0,r.Uc)(t)},w={ManageTokens:{networks:[a.a_.BITCOIN,a.a_.AVALANCHE_P,a.a_.AVALANCHE_TEST_P,a.a_.AVALANCHE_X,a.a_.AVALANCHE_TEST_X],complexChecks:[]},Receive:{networks:[],complexChecks:[g,x]},Send:{networks:[],complexChecks:[g,x]},Bridge:{networks:[a.a_.AVALANCHE_P,a.a_.AVALANCHE_TEST_P,a.a_.AVALANCHE_X,a.a_.AVALANCHE_TEST_X,a.a_.DFK,a.a_.DFK_TESTNET,a.a_.SWIMMER,a.a_.SWIMMER_TESTNET],complexChecks:[g]}},b={COLLECTIBLES:[a.a_.AVALANCHE_MAINNET_ID,a.a_.AVALANCHE_TESTNET_ID,a.a_.ETHEREUM_HOMESTEAD],Swap:[a.a_.AVALANCHE_MAINNET_ID],Buy:[a.a_.AVALANCHE_MAINNET_ID,a.a_.AVALANCHE_TESTNET_ID]},S=e=>{const{network:t}=(0,i.g)(),n=(()=>{const{walletDetails:e}=(0,u.t)(),{accounts:{active:t}}=(0,s.a)();return e?.type===d.Y.Seedless&&t?.type===l.Qm.PRIMARY})(),{featureFlags:a}=(0,m.d)(),{accounts:{active:r}}=(0,s.a)(),c=Boolean(t&&r),g=e=>{if(n&&f.includes(e)&&!a[o.yy.SEEDLESS_SIGNING])return!1;if(e===h.SEND){if((0,p.B)(t))return Boolean(!!r?.addressPVM&&a[o.yy.SEND]&&a[o.yy.SEND_P_CHAIN]);if((0,E.n)(t))return Boolean(!!r?.addressAVM&&a[o.yy.SEND]&&a[o.yy.SEND_X_CHAIN])}const c=y[e];return!c||a[c]},x=e=>{if(!t||!r)return!1;const n=(0,p.B)(t)&&!r.addressPVM,a=(0,E.n)(t)&&!r.addressAVM;if(e===h.SEND&&(n||a))return!1;if(b[e]&&!b[e].includes(t.chainId))return!1;const o=w[e];if(o){const e=o.networks.includes(t.chainId),n=o.complexChecks.some((e=>e(t.chainId,r)));return!e&&!n}return!0};return t&&r&&e?{isReady:c,isFunctionAvailable:g(e??h.FEATURE),isFunctionSupported:x(e),checkIsFunctionSupported:x,checkIsFunctionAvailable:g}:{isReady:c,isFunctionAvailable:!1,isFunctionSupported:!1,checkIsFunctionSupported:x,checkIsFunctionAvailable:g}}},82261:(e,t,n)=>{"use strict";n.d(t,{$:()=>m,q:()=>p});var a=n(67294),r=n(48740),o=n(99424),c=n(35801),s=n(4674),i=n(87474),l=n(27641),d=n(91415);const u=e=>"fido"===e.type?{...e,type:d.fS.Fido}:{type:d.fS.Totp};let m=function(e){return e[e.NotInitialized=0]="NotInitialized",e[e.Initialized=1]="Initialized",e[e.Complete=2]="Complete",e[e.TotpChallenge=3]="TotpChallenge",e[e.FidoChallenge=4]="FidoChallenge",e[e.ChooseMfaMethod=5]="ChooseMfaMethod",e}({});const p=({getOidcToken:e,setIsLoading:t,onSignerTokenObtained:n})=>{const[p,E]=(0,a.useState)(""),[h,y]=(0,a.useState)(m.NotInitialized),[f,g]=(0,a.useState)(),[x,w]=(0,a.useState)(""),[b,S]=(0,a.useState)(),[v,C]=(0,a.useState)(""),[k,A]=(0,a.useState)(),[T,I]=(0,a.useState)(""),{capture:O}=(0,l.O)(),[K,D]=(0,a.useState)([]),R=(0,a.useCallback)((e=>{e.type===d.fS.Fido?(y(m.FidoChallenge),I(e.name)):e.type===d.fS.Totp?(y(m.TotpChallenge),I("")):S(d.Kj.UnsupportedMfaMethod)}),[]),N=(0,a.useCallback)((async e=>{const t=(0,c.xo)(e),n=await t.identityProve(),a=n.user_info?.configured_mfa??[];return{email:n.email??"",userId:n.identity?.sub,mfaMethods:a}}),[]),_=(0,a.useCallback)((async({expectedEmail:a,expectedUserId:s})=>{y(m.Initialized),C(""),A(""),t(!0),I("");try{const t=await e();if(!t)return O("SeedlessLoginFailed"),void S(d.Kj.FailedToFetchOidcToken);const{email:i,userId:l,mfaMethods:p}=await N(t);if(C(i),A(l),!l)return void S(d.Kj.MissingUserId);if(s&&s!==l)return void S(d.Kj.MismatchingUserId);if(!s&&a&&i!==a)return void S(d.Kj.MismatchingEmail);E(t);const h=await(0,c.dw)(t);if(!h.requiresMfa()){y(m.Complete);const e=await(0,o.r)(h);return void await(n?.(e,i,l))}const f=h.mfaSessionInfo();if(f){if(w(h.mfaId()),g(await(0,c.XX)(f)),!p.length)return S(d.Kj.NoMfaMethodsConfigured),!1;if(1===p.length){const e=p[0];if("totp"===e.type)y(m.TotpChallenge);else{if("fido"!==e.type)return S(d.Kj.UnsupportedMfaMethod),!1;y(m.FidoChallenge),I(e.name)}}else y(m.ChooseMfaMethod),D(p.map(u))}else S(d.Kj.NoMfaDetails),(0,r.Z)(new Error("MFA is required, but no details were provided"),r.p.SEEDLESS)}catch(e){S(d.Kj.UnknownError),(0,r.Z)(e,r.p.SEEDLESS)}finally{t(!1)}}),[t,e,N,O,n]),L=(0,a.useCallback)((async e=>{if(!f)return S(d.Kj.UnknownError),(0,r.Z)(new Error("Session not carried over from initial authentication"),r.p.SEEDLESS),!1;let a;t(!0),S(void 0);try{if(a=await f.totpApprove(x,e),!a.receipt?.confirmation)return S(d.Kj.TotpVerificationError),O(d.Kj.TotpVerificationError),t(!1),!1}catch{return S(d.Kj.InvalidTotpCode),O(d.Kj.InvalidTotpCode),t(!1),!1}try{const e=await(0,c.dw)(p,{mfaOrgId:"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",mfaId:x,mfaConf:a.receipt.confirmation}),t=await(0,o.r)(e);return t?k?(await(n?.(t,v,k)),O("TotpVaridationSuccess"),!0):(S(d.Kj.MissingUserId),!1):(O("TotpNoToken"),!1)}catch(e){return S(d.Kj.UnknownError),O("TotpVaridationFailed"),(0,r.Z)(e,r.p.SEEDLESS),!1}finally{t(!1)}}),[f,t,x,O,p,k,n,v]),P=(0,a.useCallback)((async()=>{if(!f)return S(d.Kj.UnknownError),(0,r.Z)(new Error("Session not carried over from initial authentication"),r.p.SEEDLESS),!1;t(!0),S(void 0);try{const e=await f.fidoApproveStart(x);let a;try{const t=await(0,s.B)(i.W.Authenticate,e.options);a=await e.answer(t)}catch{return S(d.Kj.FidoChallengeFailed),!1}if(!a.receipt)return S(d.Kj.FidoChallengeNotApproved),!1;let l=await(0,c.dw)(p);return l=await l.signWithMfaApproval({mfaId:x,mfaOrgId:"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",mfaConf:a.receipt.confirmation}),l.requiresMfa()?(t(!1),S(d.Kj.UnknownError),(0,r.Z)(new Error("MFA should not be required after approval"),r.p.SEEDLESS),!1):k?(await(n?.(await(0,o.r)(l),v,k)),!0):(S(d.Kj.MissingUserId),!1)}catch(e){return S(d.Kj.UnknownError),(0,r.Z)(e,r.p.SEEDLESS),!1}finally{t(!1)}}),[v,x,p,n,f,t,k]);return{error:b,oidcToken:p,step:h,email:v,methods:K,chooseMfaMethod:R,authenticate:_,verifyTotpCode:L,completeFidoChallenge:P,mfaDeviceName:T}}},67455:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Onboarding:()=>Ct});var a=n(90948),r=n(68483),o=n(87462),c=n(67294),s=n(2734),i=n(27641),l=n(44597),d=n(67294);function u(){const e=(0,s.Z)(),{capture:t}=(0,i.O)(),{availableLanguages:n,changeLanguage:a,currentLanguage:u}=(0,l.Z)(),m=(0,c.useRef)(),[p,E]=(0,c.useState)(!1);return d.createElement(r.dyZ,{onClickAway:()=>E(!1)},d.createElement(r.zxk,{variant:"text",color:"primary",onClick:()=>E(!p),ref:m,"data-testid":"onboarding-language-selector",sx:{gap:.5,color:"text.primary"}},d.createElement(r.ZT$,{variant:"body2",className:"current-language"},u?.name),d.createElement(r.v4q,{size:16,sx:{transition:e.transitions.create("transform"),transform:p?"rotateX(180deg)":"none"}}),d.createElement(r.rDy,{open:p,anchorEl:m.current,placement:"bottom-end",transition:!0},(({TransitionProps:e})=>d.createElement(r.Q5I,(0,o.Z)({},e,{timeout:250}),d.createElement(r.qyq,{dense:!0,sx:{p:0,borderRadius:1,overflow:"hidden"}},n.map((e=>{const n=e.code===u?.code;return d.createElement(r.sNh,{key:e.code,onClick:()=>{a(e.code),t("OnboardingLanguageChanged",{language:e.code})},"data-testid":`onboarding-language-selector-menu-item-${e.code}`,sx:{flexDirection:"row",gap:2,justifyContent:"space-between",px:1}},d.createElement(r.ZT$,{color:n?"text.secondary":"text.primary"},e.name," (",e.originalName,")"),n&&d.createElement(r.nQG,{size:18}))}))))))))}var m=n(47886),p=n(85073);function E(){const e=crypto.getRandomValues(new Uint8Array(32));return p.t.entropyToPhrase(e)}var h=n(97283),y=n(67294);function f({testId:e,title:t}){return y.createElement(r.Kqy,{sx:{justifyContent:"center",alignItems:"center",textAlign:"center"}},y.createElement(r.f2H,{size:30}),t&&y.createElement(r.ZT$,{variant:"h3",sx:{pt:3},"data-testid":`${e}-header`},t))}var g=n(26793),x=n(62440),w=n(67294);const b=(0,a.ZP)("span")`
  font-weight: bold;
`;function S({phrase:e,wordCount:t=24,confirmWordCount:n=3,onConfirmedChange:a}){const{t:o}=(0,g.$)(),i=(0,s.Z)(),[l,d]=(0,c.useState)({}),u=(0,c.useMemo)((()=>e.split(" ")),[e]),m=o("Select the first word"),p=o("Select the word that comes after");return(0,c.useEffect)((()=>{const e=e=>{const n=[];for(;n.length<2;){const a=Math.floor(Math.random()*t),r=u[a];a===e||u.length<=a||!r||n.includes(r)||n.push(r)}return n},a={};for(;Object.keys(a).length<n;){const n=Math.floor(Math.random()*t),r=u[n];!a[n]&&r&&(a[n]={index:n,randomWords:[r,...e(n)].sort((()=>.5-Math.random())),selected:""})}d(a)}),[n,t,u]),w.createElement(r.Kqy,null,Object.keys(l).map(Number).map((e=>w.createElement(r.Kqy,{key:e,sx:{mb:4,textAlign:"left"}},0!==e?w.createElement(w.Fragment,null,w.createElement(r.ZT$,{variant:"body1",sx:{mb:2}},p," ",w.createElement(b,null,`(${u[e-1]})`))):w.createElement(r.ZT$,{variant:"body1",sx:{mb:2,fontWeight:"fontWeightBold"}},`${m}`),w.createElement(r.Kqy,{sx:{flexDirection:"row"}},l[e]?.randomWords.map((t=>{const n=l[e]?.selected===t;return w.createElement(r.Kqy,{key:`${e}-${t}`,onClick:()=>((e,t)=>{const n=l[e];if(n){const r={...l,[e]:{...n,selected:t}};d(r),a&&a(Object.values(r).every((e=>e.index>=0&&u[e.index]===e.selected)))}})(e,t),sx:{flexDirection:"row",borderRadius:12.5,py:1,mx:1,justifyContent:"center",width:i.spacing(13),background:n?i.palette.primary.main:i.palette.grey[800],color:n?i.palette.grey[800]:i.palette.primary.main,cursor:"pointer","&:first-of-type":{ml:"0"},"&:last-of-type":{mr:"0"},"&:hover":{background:i.palette.primary.main,color:i.palette.grey[800]}}},w.createElement(r.ZT$,{variant:"caption",sx:{userSelect:"none",fontWeight:"semibold"}},t))})))))))}var v=n(70582),C=n(2153),k=n(67294);const A=()=>k.createElement(r.ZT$,{as:"span",translate:"no",sx:{position:"absolute",left:0,top:0,zIndex:-1,opacity:0}},((e="english")=>{const t=C.ET[e];if(!t)throw new Error(`Unknown wordlist: ${e}`);return t[Math.floor(Math.random()*t.length)]})());function T({phrase:e,wordCount:t=24}){const{t:n}=(0,g.$)(),a=(0,s.Z)(),o=e.split(" "),i=(0,c.useMemo)((()=>{const e=[];for(let n=1;n<=t;n++){const t=Math.random()<.5;e.push(k.createElement(r.rjZ,{item:!0,key:n},k.createElement(r.Kqy,{sx:{width:a.spacing(13),alignItems:"center",flexDirection:"row"}},k.createElement(r.ZT$,{variant:"body2",sx:{userSelect:"none",minWidth:2,mr:1}},n,"."),t&&k.createElement(A,null),k.createElement(r.ZT$,{as:"span",variant:"body2",translate:"no"},o[n-1]),!t&&k.createElement(A,null))))}return e}),[t,o,a]);return k.createElement(r.Kqy,{alignItems:"flex-end"},k.createElement(r.rjZ,{container:!0,sx:{backgroundColor:a.palette.grey[850],height:a.spacing(38),width:a.spacing(44),justifyContent:"space-between",alignItems:"center",rowGap:1.5,p:2,borderRadius:1,userSelect:"none"},onCopy:e=>e.preventDefault()},i),k.createElement(r.zxk,{variant:"text",onClick:()=>{navigator.clipboard.writeText(e),v.ZP.success(n("Copied!"),{duration:2e3,position:"top-left"})},sx:{color:"secondary"}},k.createElement(r.TIy,{size:16}),k.createElement(r.ZT$,{variant:"caption",sx:{ml:1}},n("Copy Phrase"))))}var I=n(67294);function O(e){return e.confirmMnemonic?I.createElement(S,e):I.createElement(T,e)}var K=n(67294);function D({steps:e,activeStep:t}){return K.createElement(r.ITv,{backButton:null,nextButton:null,variant:"dots",steps:e,position:"static",activeStep:t,sx:e=>({backgroundColor:"transparent",justifyContent:"center",flexGrow:1,"& .MuiMobileStepper-dot":{margin:`0 ${e.spacing(.5)}`},"& .MuiMobileStepper-dotActive":{backgroundColor:"secondary.main"}})})}var R=n(67294);function N({onBack:e,backText:t,onNext:n,nextText:a,disableNext:o,nextDisabledReason:c,steps:i,activeStep:l,children:d,expand:u}){const{t:m}=(0,g.$)(),p=(0,s.Z)();return R.createElement(r.Kqy,{sx:{width:"100%",justifyItems:"space-between",alignContent:"center",my:3,rowGap:`${u&&d?p.spacing(2):p.spacing(8)}`}},R.createElement(r.Kqy,{sx:{flexDirection:"row",width:"100%",justifyContent:"center",columnGap:2}},R.createElement(r.zxk,{color:"secondary","data-testid":"page-nav-back-button",onClick:async()=>{e()},sx:{width:p.spacing(21)}},t||m("Back")),R.createElement(r.ua7,{title:c,sx:{cursor:"not-allowed"}},R.createElement(r.zxk,{"data-testid":"page-nav-next-button",disabled:o,onClick:async()=>{n()},sx:{width:p.spacing(21)}},a||m("Next")))),u&&d&&R.createElement(r.Kqy,{sx:{height:p.spacing(4)}},d),R.createElement(D,{steps:i,activeStep:l}))}var _=n(67294);function L({onNext:e,onBack:t,mnemonic:n}){const{capture:a}=(0,i.O)(),[o,l]=(0,c.useState)(!1),{t:d}=(0,g.$)(),u=(0,s.Z)();return _.createElement(r.Kqy,{sx:{height:"100%"}},_.createElement(f,{testId:"confirm-phrase",title:d("Verify Phrase")}),_.createElement(r.Kqy,{"data-testid":"confirm-phrase-section",sx:{flexGrow:1,pt:1,px:6,textAlign:"center"}},_.createElement(r.ZT$,{variant:"body2",sx:{mb:5},color:u.palette.text.secondary},_.createElement(x.c,{i18nKey:"Select the words below to verify your secret recovery phrase."})),_.createElement(r.Kqy,{alignSelf:"center"},_.createElement(O,{phrase:n,confirmMnemonic:!0,onConfirmedChange:e=>{l(e)}}))),_.createElement(N,{onBack:t,onNext:()=>{a("OnboardingMnemonicVerified"),e()},nextText:d("Save"),disableNext:!o,expand:!1,steps:4,activeStep:1}))}var P=n(67294);function M({onBack:e,onNext:t,mnemonic:n}){const{capture:a}=(0,i.O)(),[o,l]=(0,c.useState)(!1),{t:d}=(0,g.$)(),u=(0,s.Z)();return P.createElement(r.Kqy,{sx:{width:"410px",height:"100%"}},P.createElement(f,{testId:"copy-phrase",title:d("Write Down Seed Phrase")}),P.createElement(r.Kqy,{"data-testid":"copy-phrase-section",sx:{flexGrow:1,textAlign:"center",mb:3}},P.createElement(r.ZT$,{variant:"body2",sx:{mb:5},color:u.palette.text.secondary},P.createElement(x.c,{i18nKey:"This is your secret recovery phrase. Write it down, and store it in a secure location."})),P.createElement(r.Kqy,{alignItems:"center",sx:{rowGap:1}},P.createElement(r.Kqy,{sx:{width:u.spacing(44),mb:4}},P.createElement(O,{phrase:n,confirmMnemonic:!1})),P.createElement(r.Kqy,{sx:{width:u.spacing(44)}},P.createElement(r.XZJ,{"data-testid":"privacy-policy-checkbox",onChange:e=>{l(e.target.checked)},disableRipple:!0,style:{height:u.spacing(2.5),color:o?u.palette.secondary.main:u.palette.primary.main},label:P.createElement(r.Kqy,{sx:{textAlign:"left"}},P.createElement(r.ZT$,{variant:"caption"},P.createElement(x.c,{i18nKey:"I understand losing this phrase will result in lost funds. I have stored it in a secure location."})))})))),P.createElement(N,{onBack:e,onNext:()=>{a("OnboardingMnemonicCreated"),t()},disableNext:!o,expand:!1,steps:4,activeStep:0}))}var q=n(95576),G=n(1589),z=n(67294);function $(){const{setMnemonic:e,setOnboardingPhase:t,setIsNewAccount:n,setOnboardingWalletType:a}=(0,h.t)(),[r,o]=(0,c.useState)(!1),[s,l]=(0,c.useState)(""),{capture:d}=(0,i.O)(),u=(0,m.k6)(),p=(0,c.useCallback)((()=>{d("OnboardingCancelled",{step:q.Iz.CREATE_WALLET}),u.push(q.o7.ONBOARDING_HOME)}),[d,u]);return(0,c.useEffect)((()=>{n(!0),l(E()),t(q.Iz.CREATE_WALLET),a(G.S.Mnemonic),d(q.HL.create_wallet)}),[d,n,t,a]),r?z.createElement(L,{onBack:()=>o(!1),onNext:()=>{e(s),u.push(q.o7.CREATE_PASSWORD)},onCancel:p,mnemonic:s}):z.createElement(M,{onNext:()=>o(!0),onCancel:p,mnemonic:s,onBack:p})}var F=n(2409),Z=n(26821),B=n(94277),W=n(63366),U=n(49507),Y=n(67294),j=n(23085).lW,H=n(67294);const V="https://support.keyst.one/getting-started/new-how-to-sync-keystone-with-compatible-software-wallets",Q=e=>{navigator.mediaDevices.getUserMedia({video:!0}).then((()=>{e("granted")})).catch((()=>{e("denied")}))},X=({onCancel:e,setXPubKey:t,setMasterFingerPrint:n,onSuccess:a})=>{const{t:o}=(0,g.$)(),{palette:l}=(0,s.Z)(),{capture:d}=(0,i.O)(),u=(0,s.Z)(),[m,p]=(0,c.useState)(),[E,h]=(0,c.useState)(!1),y=(0,c.useRef)([]),f=(0,c.useCallback)((({cbor:e})=>{y.current=[];const r=j.from(e,"hex"),o=W.CryptoMultiAccounts.fromCBOR(r),c=o.getMasterFingerprint();n(c.toString("hex"));const s=o.getKeys()[0];if(s){const e=s.getBip32Key();t(e),d("KeystoneScanQRCodeSuccess"),a()}}),[d,a,n,t]),x=(0,c.useCallback)((e=>{if(!/^Dimensions/i.test(e))return d("KeystoneScanQRCodeError"),void h(!0);if(y.current.push(Date.now()),5===y.current.length){if(y.current[4]&&y.current[0]&&y.current[4]-y.current[0]<500)return d("KeystoneScanQRCodeDimensionsError"),void h(!0);y.current=[]}}),[d]),w=(({cameraPermission:e,hasError:t,setHasError:n,handleScan:a,handleError:o})=>{const{t:c}=(0,g.$)(),{palette:i}=(0,s.Z)(),l={allowAccess:c("Camera Access"),hasAccess:c("Scan QR Code"),blockedAccess:c("Access Blocked"),hasError:c("Invalid QR Code")},d={allowAccess:c("Allow Chrome access to your camera to scan the QR Code"),hasAccess:c("Scan the QR code displayed on your Keystone device"),blockedAccess:c("You’ve blocked access to your camera. Please allow access to continue."),hasError:c("Please ensure you have selected a valid QR code from your Keystone device. ")},u={allowAccess:Y.createElement(r.ZT$,{align:"center",variant:"body2",sx:{color:"text.secondary"}},c("If you block access, look in the top right corner of your browser to enable camera access")),hasAccess:Y.createElement(r.ZT$,{align:"center",variant:"body2",sx:{color:"text.secondary"}},c("Position the QR code in front of your camera. The screen is blurred, but this will not affect the scan.")),blockedAccess:Y.createElement(r.ZT$,{align:"center",variant:"body2",sx:{color:"text.secondary"}},c("If you block access, look in the top right corner of your browser to enable camera access")),hasError:Y.createElement(r.Kqy,{sx:{alignItems:"center"}},Y.createElement(r.zxk,{"data-testid":"try-again-button",onClick:()=>{n(!1)},sx:{width:"246px"}},c("Try Again")))},m={allowAccess:Y.createElement(Y.Fragment,null,Y.createElement(r.D8x,{size:88})),hasAccess:Y.createElement(U.AnimatedQRScanner,{purpose:U.Purpose.SYNC,handleScan:a,handleError:o,options:{width:229,height:229},urTypes:[U.URType.CRYPTO_MULTI_ACCOUNTS]}),blockedAccess:Y.createElement(r.ay,{size:50,sx:{outline:`3px solid ${i.error.main}`,outlineOffset:5,backgroundColor:"error.main",m:1,p:2,borderRadius:999,border:1,borderColor:"error.main"}}),hasError:Y.createElement(r.Cge,{size:56,sx:{outline:`3px solid ${i.error.main}`,outlineOffset:5,backgroundColor:"error.main",m:1,p:2,borderRadius:999,border:1,borderColor:"error.main"}})};return e&&"prompt"!==e?"granted"===e&&t?{headLine:l.hasError,description:d.hasError,content:m.hasError,helperText:u.hasError}:"granted"===e?{headLine:l.hasAccess,description:d.hasAccess,content:m.hasAccess,helperText:u.hasAccess}:"denied"===e?{headLine:l.blockedAccess,description:d.blockedAccess,content:m.blockedAccess,helperText:u.blockedAccess}:void 0:{headLine:l.allowAccess,description:d.allowAccess,content:m.allowAccess,helperText:u.allowAccess}})({cameraPermission:m,hasError:E,setHasError:h,handleScan:f,handleError:x});return(0,c.useEffect)((()=>{Q(p)}),[]),(0,c.useEffect)((()=>{!async function(){const e=await navigator.permissions.query({name:"camera"});e.onchange=()=>{Q(p),"denied"===e.state&&d("KeystoneScanQRCameraAccessDenied")}}()}),[d]),H.createElement(B.a,null,H.createElement(r.Kqy,{sx:{width:"512px",minHeight:"495px",background:l.background.paper,borderRadius:1}},H.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",pt:2,px:2}},H.createElement(r.ZT$,{variant:"h4",sx:{pt:3,px:4},"data-testid":"keystone-modal-header"},w?.headLine),H.createElement(r.zxk,{variant:"text","data-testid":"keystone-modal-close-button",onClick:e,sx:{p:0,height:u.spacing(3),width:u.spacing(3),minWidth:u.spacing(3)}},H.createElement(r.b0D,{size:24,sx:{color:"primary.main"}}))),H.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:6}},H.createElement(r.ZT$,{variant:"body2",minHeight:40},w?.description),H.createElement(r.Kqy,{sx:{alignItems:"center",height:"100%",justifyContent:"center",flexGrow:1}},w?.content)),H.createElement(r.Kqy,{sx:{width:"100%",justifyItems:"space-between",alignContent:"center",mb:3,rowGap:2,pt:1,px:6}},w?.helperText,H.createElement(r.zxk,{variant:"text",onClick:()=>{window.open(V,"_blank","noreferrer")}},H.createElement(r.h0n,{size:16,sx:{color:"secondary.main",marginRight:1}}),H.createElement(r.ZT$,{variant:"caption",sx:{color:"secondary.main",fontWeight:600}},o("Keystone Support"))))))};var J=n(19383),ee=n(60403),te=n(12849),ne=n(4563),ae=n(13673),re=n(67294);const oe=(0,a.ZP)(r.Kqy)`
  position: relative;
  img {
    width: 167px;
    z-index: 1;
  }
`,ce=(0,a.ZP)(r.Kqy)`
  position: absolute;
  width: 242px;
  height: 318px;
  left: 50px;
  top: 0px;
  background: linear-gradient(
    0deg,
    rgba(255, 255, 255, 0.2),
    rgba(255, 255, 255, 0.2)
  );
  filter: blur(77px);
  transform: rotate(-112deg);
  z-index: 0;
`,se=()=>{const{capture:e}=(0,i.O)(),{setMasterFingerprint:t,setXpub:n,setOnboardingPhase:a,setOnboardingWalletType:o}=(0,h.t)(),{t:l}=(0,g.$)(),d=(0,s.Z)(),u=(0,m.k6)(),[p,E]=(0,c.useState)(0),[y,x]=(0,c.useState)(""),[w,b]=(0,c.useState)(!1),[S,v]=(0,c.useState)([]),{getAvaxBalance:C}=(0,ee.C)(),{featureFlags:k}=(0,Z.d)();(0,c.useEffect)((()=>{a(q.Iz.KEYSTONE),o(G.S.Keystone),e(p?`KeystoneTutorialStep${p}`:q.HL.keystone)}),[e,a,o,p]);const A=(0,c.useCallback)((async(t,n,a=[])=>{const r=(0,J.E)(t,n),{balance:o}=await C(r),c=[...a,{address:r,balance:o.balanceDisplayValue||"0"}];v(c),n<2&&await A(t,n+1,c),n>=2&&e("OnboardingKeystoneHasAddresses")}),[e,C]);(0,c.useEffect)((()=>{y&&!S.length&&A(y,0)}),[S.length,A,y]);const T=[l("Connect Software Wallet"),l("Connect Network"),l("Scan QR Code"),l("Confirm Derived Addresses")],I=[l("Tap “Connect Software Wallet” at the bottom left corner."),l("Select the Core wallet."),l("Click on the “Scan” button at the bottom to scan the QR code displayed on the Keystone device."),l("These are the addresses derived from your Keystone device")],O=[l("Next"),l("Next"),l("Scan QR Code")];return k[ne.yy.KEYSTONE]?re.createElement(re.Fragment,null,re.createElement(r.Kqy,{sx:{width:"460px",height:"100%"}},re.createElement(f,{testId:"keystone-tutorial-step-1",title:T[p]}),re.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:6,textAlign:"center"}},re.createElement(r.ZT$,{variant:"body2",minHeight:40},I[p]),p<=2&&re.createElement(oe,{sx:{pt:5,width:d.spacing(44),alignSelf:"center",alignItems:"center"}},re.createElement("img",{src:`/images/keystone/keystone_onboarding_step_${p+1}.png`}),re.createElement(ce,null)),3===p&&re.createElement(r.Kqy,{sx:{alignItems:"center",mt:3}},re.createElement(te.C,{addresses:S}))),re.createElement(N,{onBack:()=>{if(!p)return e("OnboardingCancelled",{step:q.Iz.KEYSTONE_TUTORIAL}),void u.goBack();E(p-1)},onNext:()=>{3===p&&u.push(q.o7.CREATE_PASSWORD),2===p&&b(!0),p+1!==3&&E(p+1)},disableNext:!1,expand:!0,steps:6,activeStep:p,nextText:O[p]},re.createElement(r.zxk,{variant:"text",onClick:()=>{window.open(V,"_blank","noreferrer")}},re.createElement(r.h0n,{size:16,sx:{color:"secondary.main",marginRight:1}}),re.createElement(r.ZT$,{variant:"caption",sx:{color:"secondary.main",fontWeight:600}},l("Keystone Support")))),w&&re.createElement(X,{onCancel:()=>b(!1),setXPubKey:function(e){x(e),n(e)},setMasterFingerPrint:t,onSuccess:()=>{b(!1),E(p+1),A(y,0)}}))):re.createElement(r.Kqy,{sx:{width:"100%",height:"100%"}},re.createElement(f,{title:T[p]}),re.createElement(F.F,{functionName:ae.o.KEYSTONE,hidePageTitle:!0}))};var ie=n(58866),le=n(27726),de=n(67294);function ue(){const e=(0,s.Z)(),{capture:t}=(0,i.O)(),{setXpub:n,setXpubXP:a,setPublicKeys:o,setOnboardingPhase:l,setOnboardingWalletType:d}=(0,h.t)(),[u,p]=(0,c.useState)(!1),{t:E}=(0,g.$)(),y=(0,m.k6)();(0,c.useEffect)((()=>{l(q.Iz.LEDGER),d(G.S.Ledger),t(q.HL.ledger)}),[t,l,d]);const w=de.createElement(x.c,{i18nKey:"<typography>This process retrieves the addresses<br />from your ledger</typography>",components:{typography:de.createElement(r.ZT$,{variant:"caption"})}});return de.createElement(r.Kqy,{sx:{width:"100%",height:"100%"}},de.createElement(f,{testId:"connect-ledger",title:E("Connect your Ledger")}),de.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:6}},de.createElement(r.ZT$,{variant:"body2"},E("Select a derivation path to see your derived addresses."),de.createElement(r.ua7,{title:w,sx:{display:"inline",cursor:"pointer",pl:e.spacing(1),verticalAlign:"middle"}},de.createElement(r.uMt,{size:14}))),de.createElement(r.Kqy,{sx:{mt:7.5}},de.createElement(le.Q,{onSuccess:function(e){n(e.xpub),a(e.xpubXP),o(e.publicKeys),p(e.hasPublicKeys)},onTroubleshoot:()=>y.push(q.o7.LEDGER_TROUBLE)}))),de.createElement(N,{onBack:()=>{t("OnboardingCancelled",{step:q.Iz.LEDGER}),y.goBack()},onNext:()=>y.push(q.o7.CREATE_PASSWORD),disableNext:!u,expand:!0,steps:3,activeStep:0},de.createElement(r.zxk,{variant:"text",onClick:()=>{window.open("https://www.ledger.com/ledger-live","_blank","noreferrer")}},de.createElement(r.h0n,{size:16,sx:{color:"secondary.main"}}),de.createElement(r.ZT$,{variant:"caption",sx:{ml:1,color:"secondary.main"}},E("Ledger Live Support")))),de.createElement(ie.w,{onClose:()=>y.goBack()}))}var me=n(75127),pe=n(67294);function Ee({wordsLength:e,setWordsLength:t}){const n=(0,s.Z)(),{t:a}=(0,g.$)(),i=(0,c.useRef)(),[l,d]=(0,c.useState)(!1);return pe.createElement(r.zxk,{color:"secondary",onClick:()=>d(!l),ref:i,"data-testid":"onboarding-language-selector",sx:{width:"135px"},size:"small"},`${e} ${a("Word Phrase")}`,pe.createElement(r.v4q,{size:16,sx:{transition:n.transitions.create("transform"),transform:l?"rotateX(180deg)":"none",ml:1}}),pe.createElement(r.rDy,{open:l,anchorEl:i.current,placement:"bottom-end",transition:!0},(({TransitionProps:n})=>pe.createElement(r.Q5I,(0,o.Z)({},n,{timeout:250}),pe.createElement(r.qyq,{dense:!0,sx:{p:0,borderRadius:1,overflow:"hidden"}},me.j.map((n=>pe.createElement(r.sNh,{key:n,onClick:()=>{t(n)},"data-testid":`onboarding-words-length-selector-menu-item-${n}`,sx:{flexDirection:"row",gap:2,justifyContent:"space-between",px:1}},pe.createElement(r.ZT$,{color:e!==n?"text.secondary":"text.primary"},`${n} ${a("Word Phrase")}`),e===n&&pe.createElement(r.nQG,{size:18})))))))))}var he=n(67294);const ye=()=>{const{capture:e}=(0,i.O)(),{setMnemonic:t,setOnboardingPhase:n,setOnboardingWalletType:a}=(0,h.t)(),[o,l]=(0,c.useState)(""),[d,u]=(0,c.useState)(""),{t:p}=(0,g.$)(),E=(0,s.Z)(),[y,w]=(0,c.useState)(24),[b,S]=(0,c.useState)([]),v=(0,m.k6)(),C=(0,c.useCallback)((async()=>{o&&(e("OnboardingMnemonicImported"),t(o),v.push(q.o7.CREATE_PASSWORD))}),[e,v,o,t]);(0,c.useEffect)((()=>{n(q.Iz.IMPORT_WALLET),a(G.S.Mnemonic),e(q.HL.import_wallet)}),[e,n,a]);const k=(0,c.useCallback)((e=>{w(e),S((t=>{const n=[...t],a=e>t.length?t.length:e;return[...t.slice(0,e),...n].slice(0,a)}))}),[]),A=(0,c.useCallback)((e=>y===b.length&&e&&(0,me.y)(e)),[b.length,y]),T=(0,c.useCallback)((()=>{const e=[...b].join(" ");A(e)?(l(e),u("")):u(p("Invalid mnemonic phrase"))}),[A,p,b]);(0,c.useEffect)((()=>{T()}),[T,b]);const I=!A(o)||!!d,O=(0,c.useCallback)((()=>{const e=[];for(let t=0;t<y;t++)e.push(he.createElement(r.Kqy,{sx:{width:"135px"},key:t},he.createElement(r.nvn,{size:"small",type:"password",autoComplete:"off",InputProps:{endAdornment:null},onFocus:e=>{e.target.setAttribute("type","text")},onBlur:e=>{e.target.setAttribute("type","password")},autoFocus:0===t,placeholder:`${t+1}.`,onPaste:e=>{const n=e.clipboardData.getData("Text").trim().split(/\s+/g);S([...b.slice(0,t),...n].slice(0,y)),e.preventDefault()},onChange:e=>{const n=e.target.value,a=[...b];a[t]=n,S(a)},onKeyPress:e=>{"Enter"===e.key&&C()},value:b[t]||""})));return e}),[C,b,y]);return he.createElement(r.Kqy,{sx:{width:"432px",height:"100%"}},he.createElement(f,{testId:"enter-recovery-phrase",title:p("Enter Seed Phrase")}),he.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,textAlign:"center"}},he.createElement(r.ZT$,{variant:"body2",sx:{color:E.palette.grey[400]}},he.createElement(x.c,{i18nKey:"Access an existing wallet with your seed phrase. You can paste your entire phrase in the first field."})),he.createElement(r.Kqy,{sx:{pt:4,pb:1,alignSelf:"center",flexFlow:"row wrap",justifyContent:"space-between",gap:"8px 8px"}},he.createElement(r.Kqy,{sx:{width:"100%",justifyContent:"flex-start"}},he.createElement(Ee,{wordsLength:y,setWordsLength:k})),O()),he.createElement(r.Kqy,{sx:{justifyContent:"flex-end",width:"100%",flexDirection:"row"}},he.createElement(r.zxk,{onClick:()=>S([]),sx:{width:"73px",pr:0},variant:"text",color:"secondary",disabled:!b.length},he.createElement(r.ZT$,{variant:"caption"},p("Clear All"))))),he.createElement(N,{onBack:()=>{e("OnboardingCancelled",{step:q.Iz.IMPORT_WALLET}),v.goBack()},onNext:C,disableNext:I,expand:!0,steps:3,activeStep:0}))};var fe=n(34769),ge=n(60723),xe=n(67294);function we({onBack:e,onCancel:t,isOpen:n}){const a=(0,s.Z)(),{t:o}=(0,g.$)();return n?xe.createElement(B.a,null,xe.createElement(r.Kqy,{sx:{width:"512px",minHeight:"407px",background:a.palette.background.paper,borderRadius:1,p:1}},xe.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},xe.createElement(r.ZT$,{variant:"h4",sx:{pt:3,px:4},"data-testid":"authenticator-modal-header"},o("Are You Sure You Want To Go Back?")),xe.createElement(r.zxk,{variant:"text","data-testid":"authenticator-modal-close-button",onClick:t,sx:{p:0,height:a.spacing(3),width:a.spacing(3),minWidth:a.spacing(3)}},xe.createElement(r.b0D,{size:24,sx:{color:"primary.main"}}))),xe.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:4}},xe.createElement(r.ZT$,{variant:"body2",sx:{color:"text.secondary"}},o("Going back will take you to the beginning of the onboarding flow. You will need to re-verify the MFA you just set up before continuing with account creation.")),xe.createElement(r.Kqy,{sx:{alignItems:"center",height:"100%",justifyContent:"center",flexGrow:1}},xe.createElement(r.go2,{size:80}))),xe.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:2,justifyContent:"flex-end",p:2}},xe.createElement(r.zxk,{color:"secondary","data-testid":"authenticator-modal-cancel",onClick:t},o("Cancel")),xe.createElement(r.zxk,{"data-testid":"authenticator-modal-next",onClick:e},o("Go Back"))))):null}var be=n(67294);const Se=()=>{const{capture:e}=(0,i.O)(),t=(0,m.k6)(),{setPasswordAndNames:n,onboardingPhase:a}=(0,h.t)(),[o,l]=(0,c.useState)(""),[d,u]=(0,c.useState)(),[p,E]=(0,c.useState)(""),[y,w]=(0,c.useState)(""),[b,S]=(0,c.useState)(!1),[v,C]=(0,c.useState)(!1),{t:k}=(0,g.$)(),A=(0,s.Z)(),[T,I]=(0,c.useState)(0),[O,K]=(0,c.useState)(!1),D=(0,c.useMemo)((()=>a===q.Iz.IMPORT_WALLET?{stepsNumber:3,activeStep:1}:a===q.Iz.KEYSTONE?{stepsNumber:6,activeStep:4}:a===q.Iz.SEEDLESS_GOOGLE||a===q.Iz.SEEDLESS_APPLE?{stepsNumber:3,activeStep:1}:{stepsNumber:4,activeStep:2}),[a]);(0,c.useEffect)((()=>{a||t.push(q.o7.ONBOARDING_HOME),e(q.Iz.PASSWORD)}),[e,t,a]);const R=!(!p||!y),_=!(!p||!y||p===y),L=v&&p&&p.length<8,P=!_&&R&&b&&T>1;return be.createElement(r.Kqy,{sx:{width:"100%",height:"100%"}},be.createElement(f,{testId:"name-and-password",title:k("Account Details")}),be.createElement(r.Kqy,{sx:{flexGrow:1,textAlign:"center",mb:3}},be.createElement(r.ZT$,{variant:"body2",sx:{mb:4},color:A.palette.text.secondary},be.createElement(x.c,{i18nKey:"For your security, please create a name and password."})),be.createElement(r.Kqy,{sx:{width:A.spacing(44),alignSelf:"center",rowGap:2}},be.createElement(r.Kqy,{sx:{height:A.spacing(12)}},be.createElement(r.nvn,{"data-testid":"wallet-name-input",label:k("Wallet Name"),onChange:e=>u(e.target.value),placeholder:k("Enter a Name"),autoFocus:!0,fullWidth:!0})),be.createElement(r.Kqy,{sx:{height:A.spacing(12)}},be.createElement(r.nvn,{"data-testid":"wallet-name-input",label:k("Account Name"),onChange:e=>l(e.target.value),placeholder:k("Enter a Name"),fullWidth:!0})),be.createElement(r.Kqy,{sx:{height:A.spacing(12)}},be.createElement(r.nvn,{"data-testid":"wallet-password-input",type:"password",label:k("Password"),onChange:e=>E(e.target.value),placeholder:k("Enter a Password"),error:!!L,onBlur:()=>{C(!0)},fullWidth:!0}),p&&be.createElement(fe.Y,{password:p,setPasswordStrength:I})),be.createElement(r.Kqy,{sx:{height:A.spacing(12)}},be.createElement(r.nvn,{type:"password","data-testid":"wallet-confirm-password-input",label:k("Confirm Password"),onChange:e=>w(e.target.value),placeholder:k("Confirm Password"),error:_,helperText:_?k("Passwords do not match"):void 0,fullWidth:!0}))),be.createElement(r.Kqy,{sx:{justifyContent:"center",mt:2}},be.createElement(r.Kqy,{sx:{alignSelf:"center",width:A.spacing(44)}},be.createElement(r.XZJ,{disableRipple:!0,style:{height:A.spacing(2.5),color:b?A.palette.secondary.main:A.palette.primary.main},"data-testid":"terms-of-use-checkbox",checked:b,onChange:()=>S(!b),label:be.createElement(r.ZT$,{variant:"caption"},be.createElement(x.c,{i18nKey:"I agree to the <termLink>Terms of Use</termLink> and the <privacyLink>Privacy Policy</privacyLink>",components:{termLink:be.createElement(ge.n,{as:"a",target:"_blank",href:"https://core.app/terms/core",variant:"caption",sx:{color:"secondary.main"},rel:"noreferrer"}),privacyLink:be.createElement(ge.n,{as:"a",target:"_blank",href:"https://www.avalabs.org/privacy-policy",variant:"caption",sx:{color:"secondary.main"},rel:"noreferrer"})}}))})))),be.createElement(N,{onBack:()=>{e("OnboardingPasswordCancelled"),a!==q.Iz.SEEDLESS_GOOGLE?t.goBack():K(!0)},onNext:()=>{e("OnboardingPasswordSet",{AccountNameSet:!!o}),n(p,o,d),t.push(q.o7.ANALYTICS_CONSENT)},nextText:k("Save"),disableNext:!P,expand:a!==q.Iz.CREATE_WALLET,steps:D.stepsNumber,activeStep:D.activeStep}),be.createElement(we,{isOpen:O,onBack:()=>{t.push(q.o7.ONBOARDING_HOME),K(!1)},onCancel:()=>{K(!1)}}))};var ve=n(67294);const Ce=()=>{const{setAnalyticsConsent:e,submit:t,onboardingPhase:n,analyticsConsent:a,isNewAccount:o}=(0,h.t)(),{capture:s,stopDataCollection:l}=(0,i.O)(),{t:d}=(0,g.$)(),u=(0,m.k6)(),[p,E]=(0,c.useState)(!1),y=(0,c.useMemo)((()=>n===q.Iz.IMPORT_WALLET?{stepsNumber:3,activeStep:2}:n===q.Iz.KEYSTONE?{stepsNumber:6,activeStep:5}:n===q.Iz.SEEDLESS_GOOGLE||n===q.Iz.SEEDLESS_APPLE?{stepsNumber:3,activeStep:2}:{stepsNumber:4,activeStep:3}),[n]);return(0,c.useEffect)((()=>{n||u.push(q.o7.ONBOARDING_HOME),s(q.Iz.ANALYTICS_CONSENT)}),[s,u,n]),(0,c.useEffect)((()=>{if(void 0===a)return;const e=o?"https://core.app/discover/?newUser=1":"https://core.app";t((()=>e?window.location.replace(e):window.close()))}),[a,o,n,t]),ve.createElement(r.Kqy,{sx:{width:"465px",height:"100%"}},ve.createElement(f,{title:d("Help Us Improve Core")}),ve.createElement(r.Kqy,{sx:{mt:4,flexGrow:1}},ve.createElement(r.Kqy,{sx:{mb:4}},ve.createElement(r.ZT$,{variant:"body1",sx:{mb:1}},d("Core would like to gather data using local storage and similar technologies to help us understand how our users interact with Core.")),ve.createElement(r.ZT$,{variant:"body1"},ve.createElement(x.c,{i18nKey:"This enables us to develop improvements and enhance your experience, to find out more you can read our <typography>Privacy Policy</typography>. You can always opt out by visiting the settings page.",components:{typography:ve.createElement(ge.n,{as:"a",target:"_blank",href:"https://www.avalabs.org/privacy-policy"})}}))),ve.createElement(r.ZT$,{variant:"body1",sx:{mb:1}},ve.createElement(x.c,{i18nKey:"Core will <typography>never</typography> sell or share data.",components:{typography:ve.createElement(r.ZT$,{component:"span",sx:{fontWeight:"fontWeightBold"}})}}))),ve.createElement(N,{onBack:async()=>{s("OnboardingAnalyticsRejected"),l(),e(!1)},backText:d("No Thanks"),onNext:async()=>{s("OnboardingAnalyticsAccepted"),e(!0)},nextText:d("I Agree"),disableNext:!1,expand:n!==q.Iz.CREATE_WALLET,steps:y.stepsNumber,activeStep:y.activeStep},ve.createElement(r.zxk,{variant:"text",onClick:()=>{n!==q.Iz.SEEDLESS_GOOGLE?u.goBack():E(!0)},sx:{color:"secondary"}},ve.createElement(r.wyc,{size:16}),ve.createElement(r.ZT$,{variant:"caption",sx:{ml:1}},d("Back")))),ve.createElement(we,{isOpen:p,onBack:()=>{u.push(q.o7.ONBOARDING_HOME),E(!1)},onCancel:()=>{E(!1)}}))};var ke=n(23762),Ae=n(247),Te=n(33050),Ie=n(67294);function Oe(){const{t:e}=(0,g.$)(),t=(0,s.Z)(),n=(0,m.k6)(),{currentLanguage:a}=(0,l.Z)();return Ie.createElement(r.Kqy,{sx:{width:"390px",height:"100%",mt:4}},Ie.createElement(f,{testId:"ledger-trouble",title:e("Trouble Connecting")}),Ie.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,textAlign:"center"}},Ie.createElement(r.Kqy,{sx:{textAlign:"center"}},Ie.createElement(r.ZT$,{variant:"body2",sx:{mt:1}},e("We're having trouble connecting to your device."))),Ie.createElement(r.Kqy,null,Ie.createElement(r.Kqy,{sx:{alignItems:"center",mt:4,mb:3}},Ie.createElement(r.AI_,{size:88})),Ie.createElement(Te.D,{sx:{pt:1.5}}))),Ie.createElement(r.Kqy,{sx:{width:"100%",justifyItems:"space-between",alignContent:"center",mb:9,rowGap:t.spacing(2)}},Ie.createElement(r.Kqy,{sx:{flexDirection:"row",width:"100%",justifyContent:"center",columnGap:2}},Ie.createElement(r.zxk,{color:"secondary","data-testid":"page-nav-back-button",onClick:()=>{n.goBack()},sx:{width:t.spacing(21)}},e("Back")),Ie.createElement(r.zxk,{"data-testid":"page-nav-next-button",onClick:()=>{n.push(q.o7.ONBOARDING_HOME)},sx:{width:t.spacing(21)}},e("Cancel"))),Ie.createElement(r.Kqy,{sx:{justifyContent:"center",flexDirection:"row"}},Ie.createElement(ge.n,{as:"a",href:`https://support.ledger.com/hc/${a?.code||"en-us"}/categories/4404376139409?docs=true`,target:"_blank",rel:"noopener noreferrer",variant:"body2"},e("Ledger Live Support")),Ie.createElement(r.h0n,{size:16,sx:{color:"secondary.main",marginLeft:1}}))))}let Ke=function(e){return e.ALREADY_REGISTERED="ALREADY_REGISTERED",e.APPROVED="APPROVED",e.ERROR="ERROR",e}({});var De=function(e){return e.ALREADY_REGISTERED="ALREADY_REGISTERED",e.APPROVED="ok",e}(De||{}),Re=n(35801),Ne=n(99424);let _e=function(e){return e.NAMING="naming",e.REGISTER="register",e.LOGIN="login",e.ERROR="error",e}({}),Le=function(e){return e.PASSKEY="passkey",e.TOTP="totp",e.YUBIKEY="yubikey",e.FIDO="fido",e.UNKNOWN="unknown",e}({});var Pe=n(4674),Me=n(87474),qe=n(25108);const Ge="Core",ze=e=>{switch(e){case Le.PASSKEY:return Me.J.Passkey;case Le.YUBIKEY:return Me.J.Yubikey;default:throw new Error("Unsupported FIDO device")}};function $e(){const{capture:e}=(0,i.O)(),{setOidcToken:t,setSeedlessSignerToken:n,oidcToken:a,setUserId:r,setIsNewAccount:o,setIsSeedlessMfaRequired:s}=(0,h.t)(),l=(0,m.k6)(),{t:d}=(0,g.$)(),[u,p]=(0,c.useState)(),[E,y]=(0,c.useState)(null),[f,x]=(0,c.useState)(""),{featureFlags:w}=(0,Z.d)();(0,c.useEffect)((()=>{f&&v.ZP.error(f)}),[f]);const b=(0,c.useCallback)((async e=>{t(e);const n=(0,Re.xo)(e),a=await n.identityProve();if(a.user_info){const t=(await(0,Re.dw)(e)).mfaSessionInfo();s(void 0!==t)}else if(o(!0),await async function(e,t){return fetch("https://seedless-api.avax.network/v1/register?mfa-required="+(t?"true":"false"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((async e=>{const{message:t}=await e.json();if(t===De.ALREADY_REGISTERED)return Ke.ALREADY_REGISTERED;if(t===De.APPROVED)return Ke.APPROVED;throw new Error(t)})).catch((()=>Ke.ERROR))}(a,!w[ne.yy.SEEDLESS_OPTIONAL_MFA])!==Ke.APPROVED)return void v.ZP.error(d("Seedless login error"));r(a.identity?.sub),0===(a.user_info?.configured_mfa??[]).length?l.push(q.o7.RECOVERY_METHODS):l.push(q.o7.RECOVERY_METHODS_LOGIN)}),[t,r,o,s,d,l,w]),S=(0,c.useCallback)((({setIsLoading:t,getOidcToken:n,provider:a})=>{t(!0),n().then(b).catch((()=>{e("SeedlessSignInFailed",{provider:a}),v.ZP.error(d("Seedless login error"))})).finally((()=>{t(!1)}))}),[e,b,d]),C=(0,c.useCallback)((()=>{if(!a)return!1;(0,Re.dw)(a).then((async e=>{const t=e.requiresMfa()?e.mfaSessionInfo():e.data();if(!t)return void qe.error("No MFA info");const n=await(0,Re.XX)(t);return y(n),n.resetTotpStart(Ge).then((e=>{p(e.data())})).catch((e=>{qe.error(e),(0,v.ZP)(d("Unable to set TOTP configuration"))})),!0})).catch((t=>(qe.error(t),e("SeedlessRegisterTOTPStartFailed"),!1)))}),[e,a,d]),k=(0,c.useCallback)((async e=>{if(x(""),u&&E&&!(e.length<6)&&a)try{await E.resetTotpComplete(u.totpId,e);const t=await(0,Re.dw)(a);if(!t.requiresMfa())throw new Error("MFA setup failed");const r=await E.totpApprove(t.mfaId(),e);if(!r.receipt?.confirmation)return void x(d("Code verification error"));const o=(await(0,Re.dw)(a,{mfaOrgId:(0,Re.Uu)(),mfaId:t.mfaId(),mfaConf:r.receipt.confirmation})).data();return n(o),!0}catch(e){return x(d("Invalid code")),!1}}),[a,n,d,u,E]),A=(0,c.useCallback)((async()=>{if(!a)return!1;let e=await(0,Re.dw)(a);if(e.requiresMfa()){const t=e.mfaSessionInfo();if(!t)return!1;const n=await(0,Re.XX)(t),a=e.mfaId(),r=await n.fidoApproveStart(a),o=await(0,Pe.B)(Me.W.Authenticate,r.options),c=await r.answer(o);if(!c.receipt)throw new Error("MFA not approved yet");e=await e.signWithMfaApproval({mfaId:a,mfaOrgId:"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",mfaConf:c.receipt.confirmation})}if(e.requiresMfa())throw new Error("MFA should not be required after approval");return n(await(0,Ne.r)(e)),!0}),[a,n]),T=(0,c.useCallback)((async(e,t)=>{if(!a)return!1;const n=await(0,Re.dw)(a),r=n.requiresMfa()?n.mfaSessionInfo():n.data();if(!r)return void qe.error("No MFA info");const o=await(0,Re.XX)(r),c=(await o.addFidoStart(e)).data();t===Le.PASSKEY&&await(PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable())&&(c.options.authenticatorSelection={authenticatorAttachment:"platform"});const s=await(0,Pe.B)(Me.W.Register,c.options,ze(t));return await c.answer(s),!0}),[a]);return{signIn:S,registerTOTPStart:C,totpChallenge:u,verifyRegistrationCode:k,addFIDODevice:T,loginWithFIDO:A,loginWithoutMFA:async()=>{if(!a)throw new Error("There is no token to log in");const e=await(0,Re.dw)(a),t=await(0,Ne.r)(e);n(t)}}}var Fe=n(38865),Ze=n(88653),Be=n(67294);function We({setIsLoading:e}){const{capture:t}=(0,i.O)(),{setOnboardingPhase:n,setAuthProvider:a}=(0,h.t)(),{t:o}=(0,g.$)(),{signIn:c}=$e();return Be.createElement(r.zxk,{sx:{width:"100%"},"data-testid":"create-wallet-google-button",color:"primary",size:"large",startIcon:Be.createElement(r.nYS,{size:20}),onClick:()=>{n(q.Iz.SEEDLESS_GOOGLE),t(q.HL.seedless_google),a(Fe.m_.Google),c({setIsLoading:e,getOidcToken:Ze.a,provider:Fe.m_.Google})}},o("Continue with Google"))}var Ue=n(29606),Ye=n(67294);function je({setIsLoading:e}){const{t}=(0,g.$)(),{capture:n}=(0,i.O)(),{setOnboardingPhase:a,setAuthProvider:o}=(0,h.t)(),{signIn:c}=$e();return Ye.createElement(r.zxk,{sx:{width:"100%"},"data-testid":"create-wallet-apple-button",color:"primary",size:"large",startIcon:Ye.createElement(r.qwG,{size:20}),onClick:()=>{a(q.Iz.SEEDLESS_APPLE),n(q.HL[q.Iz.SEEDLESS_APPLE]),o(Fe.m_.Apple),c({setIsLoading:e,getOidcToken:Ue.n,provider:Fe.m_.Apple})}},t("Continue with Apple"))}var He=n(67294);function Ve({icon:e,text:t,onClick:n}){return He.createElement(r.Kqy,{sx:{width:"225px",height:"180px",borderRadius:2,backgroundColor:"grey.700",cursor:"pointer","&:hover":{backgroundColor:"grey.200",color:"grey.700"},alignItems:"flex-start",p:2,rowGap:1},onClick:()=>{n()}},e,He.createElement(r.ZT$,{variant:"h6",sx:{width:"130px",textAlign:"start",fontWeight:"fontWeightSemibolds"}},t))}var Qe=n(67294);function Xe({height:e=41}){return Qe.createElement("img",{src:"/images/core-logo-blinking.gif",alt:"loading",height:e})}var Je=n(67294);function et(){const{t:e}=(0,g.$)(),{capture:t}=(0,i.O)(),{featureFlags:n}=(0,Z.d)(),a=(0,m.k6)(),[o,s]=(0,c.useState)(!1),[l,d]=(0,c.useState)(!1);return Je.createElement(Je.Fragment,null,Je.createElement(r.Kqy,{sx:{width:"322px",textAlign:"center"}},Je.createElement(r.Kqy,{sx:{alignItems:"center",justifyContent:"center",mb:22,rowGap:2}},Je.createElement(Xe,{height:150})),Je.createElement(r.Kqy,{sx:{rowGap:2}},n[ne.yy.SEEDLESS_ONBOARDING_GOOGLE]&&Je.createElement(We,{setIsLoading:s}),n[ne.yy.SEEDLESS_ONBOARDING_APPLE]&&Je.createElement(je,{setIsLoading:s}),Je.createElement(r.Kqy,{sx:{pt:2,justifyContent:"space-between",alignItems:"center",rowGap:2}},Je.createElement(r.zxk,{sx:{width:"100%"},"data-testid":"create-wallet-seed-phrase-button",color:"secondary",size:"large",onClick:()=>{a.push(q.o7.CREATE_WALLET),t("RecoveryPhraseClicked")}},e("Manually Create New Wallet")),Je.createElement(r.zxk,{sx:{width:"100%"},"data-testid":"access-existing-wallet-button",color:"secondary",size:"large",onClick:()=>{d(!0)}},e("Access Existing Wallet")))),l&&Je.createElement(B.a,null,Je.createElement(r.Kqy,{sx:{width:480,alignItems:"flex-start",rowGap:5}},Je.createElement(r.Y4O,{size:32,onClick:()=>{d(!1)}}),Je.createElement(r.ZT$,{variant:"h3",sx:{textAlign:"left"}},e("How would you like to access your existing wallet?")),Je.createElement(r.Kqy,null,Je.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:3,pb:3}},Je.createElement(Ve,{"data-testid":"access-with-seed-phrase",icon:Je.createElement(r.tQf,{size:30}),text:e("Enter recovery phrase"),onClick:()=>{a.push(q.o7.SEED_PHRASE)}}),Je.createElement(Ve,{"data-testid":"access-with-ledger",icon:Je.createElement(r.pNB,{size:30}),text:e("Add using Ledger"),onClick:()=>{a.push(q.o7.LEDGER)}})),n[ne.yy.KEYSTONE]&&Je.createElement(r.Kqy,{sx:{flexDirection:"row"}},Je.createElement(Ve,{"data-testid":"access-with-seed-keystone",icon:Je.createElement(r.VOy,{size:30}),text:e("Add using Keystone"),onClick:()=>{a.push(q.o7.KEYSTONE)}})))))),o&&Je.createElement(ke.f,null))}var tt=n(67294);function nt(){const{resetStates:e}=(0,h.t)();return(0,c.useEffect)((()=>{e()}),[e]),tt.createElement(r.Kqy,{sx:{top:"15%",position:"relative"}},tt.createElement(et,null))}const at=(0,a.ZP)("span")`
  font-weight: bold;
`;var rt=n(67294);function ot({icon:e,title:t,description:n,onClick:a}){const o=(0,s.Z)();return rt.createElement(r.Zbd,{"data-testid":`method-card-${t}`,onClick:a,sx:{backgroundColor:o.palette.background.paper}},rt.createElement(r.MUK,null,rt.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:2,color:o.palette.text.primary}},rt.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:2}},e,rt.createElement(r.Kqy,null,rt.createElement(r.ZT$,{variant:"h6",sx:{mb:1}},rt.createElement(at,null,t)),rt.createElement(r.ZT$,{sx:{color:o.palette.text.secondary}},n))),rt.createElement(r.XCv,{size:24}))))}var ct=n(79361),st=n.n(ct),it=n(67294);let lt=function(e){return e.SCAN="scan",e.KEY="key",e.VERIFY="verify",e.HELP="help",e}({});function dt({activeStep:e,onFinish:t,onCancel:n}){const{t:a}=(0,g.$)(),{capture:o}=(0,i.O)(),l=(0,s.Z)(),[d,u]=(0,c.useState)(e),{registerTOTPStart:m,totpChallenge:p,verifyRegistrationCode:E}=$e(),[h,y]=(0,c.useState)(""),[f,w]=(0,c.useState)(!1),[b,S]=(0,c.useState)(""),C=p?new URL(p.totpUrl).searchParams.get("secret"):"";(0,c.useEffect)((()=>{m()}),[m]);const k=(0,c.useCallback)((()=>{navigator.clipboard.writeText(C||""),v.ZP.success(a("Copied!"),{duration:2e3,position:"top-left"})}),[a,C]),A=(0,c.useMemo)((()=>({scan:a("Scan Qr Code"),verify:a("Verify Code"),key:a("Authenticator Setup"),help:a("Learn More")})),[a]),T=(0,c.useCallback)((async()=>{w(!0);const e=await E(h);e||(o("SeedlessAuthenticatorVerificationFailed"),S(a("Incorrect code. Try again."))),e&&(o("SeedlessAuthenticatorVerificationSuccess"),t(),S("")),w(!1)}),[o,t,a,h,E]),I=(0,c.useMemo)((()=>({scan:it.createElement(it.Fragment,null,it.createElement(r.ZT$,null,it.createElement(x.c,{i18nKey:"On your mobile device, install an <bold>authenticator app</bold> and use it to scan this QR code. Or enter the code manually.",components:{bold:it.createElement(at,null)}})),it.createElement(ge.n,{onClick:()=>u(lt.HELP)},a("Learn more"))),verify:it.createElement(r.ZT$,null,a("Enter the code generated from your authenticator app.")),key:it.createElement(it.Fragment,null,it.createElement(r.ZT$,null,a("Open any authenticator app and use it to enter the key found below. Or tap Scan QR Code.")),it.createElement(ge.n,{onClick:()=>u(lt.HELP)},a("Learn more"))),help:it.createElement(r.ZT$,null,a("Use any authenticator app and paste in the code found below."))})),[a]),O=(0,c.useMemo)((()=>({scan:it.createElement(r.Kqy,{sx:{p:3}},p?it.createElement(r.Kqy,{sx:{p:1,backgroundColor:l.palette.common.white,borderRadius:1}},it.createElement(st(),{renderAs:"svg",fgColor:l.palette.common.black,bgColor:l.palette.common.white,value:p.totpUrl,level:"H",size:180})):it.createElement(r.D8x,null)),verify:it.createElement(r.Kqy,{sx:{width:"100%"}},it.createElement(r.nvn,{inputProps:{style:{width:"100%"}},type:"tel",onChange:e=>y(e.target.value),rows:3,multiline:!0,error:!!b,helperText:b,onKeyDown:async e=>{"Enter"===e.key&&(e.preventDefault(),await T())}})),key:it.createElement(r.Kqy,{onClick:k,sx:{backgroundColor:l.palette.grey[850],flexDirection:"row",columnGap:2,p:2,width:"358px",cursor:"pointer"}},it.createElement(r.Kqy,{sx:{rowGap:1}},it.createElement(r.TIy,{size:24})),it.createElement(r.Kqy,{sx:{wordBreak:"break-all"}},it.createElement(r.ZT$,{variant:"button",sx:{fontSize:l.typography.subtitle2.fontSize}},a("Copy Key")),it.createElement(r.ZT$,{variant:"button",sx:{fontSize:l.typography.h5.fontSize}},C))),help:it.createElement(r.Kqy,{sx:{width:"358px"}},it.createElement(r.Kqy,{onClick:k,sx:{backgroundColor:l.palette.grey[850],flexDirection:"row",columnGap:2,p:2,cursor:"pointer",mb:2}},it.createElement(r.Kqy,{sx:{rowGap:1}},it.createElement(r.TIy,{size:24})),it.createElement(r.Kqy,{sx:{rowGap:.5,wordBreak:"break-all"}},it.createElement(r.ZT$,{variant:"button",sx:{fontSize:l.typography.subtitle2.fontSize}},a("Copy Key")),it.createElement(r.ZT$,{variant:"button",sx:{fontSize:l.typography.h5.fontSize}},C))),it.createElement(r.ZT$,null,a("If using Google Authenticator, make sure that Time based is selected.")),it.createElement(r.ZT$,null,a("If using Microsoft Authenticator, click Add Account.")),it.createElement(r.ZT$,null,a("If using Authenticator App, click the + to add account.")))})),[b,k,a,l.palette.common.black,l.palette.common.white,l.palette.grey,l.typography.h5.fontSize,l.typography.subtitle2.fontSize,p,C,T]),K=(0,c.useMemo)((()=>({scan:it.createElement(ge.n,{onClick:()=>{u(lt.KEY)}},a("Enter Code Manually")),verify:null,key:it.createElement(ge.n,{onClick:()=>{u(lt.SCAN)}},a("Scan QR Code")),help:it.createElement(ge.n,{onClick:()=>u(lt.SCAN)},a("Back"))})),[a]),D=(0,c.useMemo)((()=>({scan:()=>u(lt.VERIFY),help:()=>u(lt.VERIFY),code:()=>u(lt.VERIFY),verify:()=>T()})),[T]);return it.createElement(B.a,null,it.createElement(r.Kqy,{sx:{width:"512px",minHeight:"407px",background:l.palette.background.paper,borderRadius:1,p:1}},it.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},it.createElement(r.ZT$,{variant:"h4",sx:{pt:3,px:4},"data-testid":"authenticator-modal-header"},A[d]),it.createElement(r.zxk,{variant:"text","data-testid":"authenticator-modal-close-button",onClick:n,sx:{p:0,height:l.spacing(3),width:l.spacing(3),minWidth:l.spacing(3)}},it.createElement(r.b0D,{size:24,sx:{color:"primary.main"}}))),it.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:4}},it.createElement(r.ZT$,{variant:"body2",minHeight:40},I[d]),it.createElement(r.Kqy,{sx:{alignItems:"center",height:"100%",justifyContent:d!==lt.VERIFY?"center":"flex-start",flexGrow:1}},O[d])),it.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:2}},it.createElement(r.Kqy,null,it.createElement(ge.n,null,K[d])),it.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:2}},it.createElement(r.zxk,{color:"secondary","data-testid":"authenticator-modal-cancel",onClick:n,isDisabled:f},a("Cancel")),it.createElement(r.zxk,{"data-testid":"authenticator-modal-next",onClick:D[d],isLoading:f,isDisabled:f},a("Next"))))))}var ut=n(67294);function mt({onFinish:e,onCancel:t,selectedMethod:n,startingStep:a}){const o=(0,s.Z)(),{t:l}=(0,g.$)(),{addFIDODevice:d,loginWithFIDO:u}=$e(),{capture:m}=(0,i.O)(),[p,E]=(0,c.useState)(""),[h,y]=(0,c.useState)(a||_e.NAMING),[f,x]=(0,c.useState)(!1),w=(0,c.useMemo)((()=>h===_e.LOGIN||h===_e.REGISTER),[h]),b=(0,c.useCallback)((async()=>{y(_e.LOGIN);try{const t=await u();t&&(m(`FidoDevice${n}LoginSuccess`),x(t),e())}catch(e){y(_e.ERROR),m(`FidoDevice${n}LoginError`)}}),[m,u,e,n]);(0,c.useEffect)((()=>{a!==_e.LOGIN||f||b()}),[f,b,a]);const S=(0,c.useCallback)((async t=>{y(_e.REGISTER);try{const a=t||`${n}-1`;if(!await d(a,n))throw new Error("Something went wrong with the device registration.");y(_e.LOGIN),await u()&&(m(`FidoDevice${n}Added`),e())}catch(e){y(_e.ERROR),m(`FidoDevice${n}AddError`)}}),[d,m,u,e,n]),v=(0,c.useMemo)((()=>({naming:l("Name Your {{device}}",{device:n}),register:l("{{device}} Setup",{device:n}),login:l("{{device}} Login",{device:n}),error:l("Couldn’t Connect")})),[n,l]),C=(0,c.useMemo)((()=>({naming:l("Add a {{device}} name, so that it’s easier to find later.",{device:n}),register:l("You will see instructions in your browser window for adding your key to your account."),login:l("You will see instructions in your browser window for logging in with your key."),error:l("The operation either timed out or was not allowed.")})),[n,l]),k=(0,c.useMemo)((()=>({naming:ut.createElement(r.Kqy,{sx:{width:"100%"}},ut.createElement(r.nvn,{inputProps:{style:{width:"100%"}},type:"tel",onChange:e=>{E(e.target.value)},placeholder:l("Enter {{device}} name",{device:n})})),register:ut.createElement(r.Kqy,{sx:{width:"100%",alignItems:"center",flexGrow:1,justifyContent:"center"}},ut.createElement(r.D8x,{size:56})),login:ut.createElement(r.Kqy,{sx:{width:"100%",alignItems:"center",flexGrow:1,justifyContent:"center"}},ut.createElement(r.D8x,{size:56})),error:ut.createElement(r.Kqy,{sx:{width:"100%",alignItems:"center",flexGrow:1,justifyContent:"center"}},ut.createElement(r.go2,{size:56}))})),[n,l]);return ut.createElement(B.a,null,ut.createElement(r.Kqy,{sx:{width:"512px",minHeight:"407px",background:o.palette.background.paper,borderRadius:1,p:1}},ut.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},ut.createElement(r.ZT$,{variant:"h4",sx:{pt:3,px:4,textTransform:"capitalize"},"data-testid":"fido-modal-header"},v[h]),ut.createElement(r.zxk,{variant:"text","data-testid":"fido-modal-close-button",onClick:t,sx:{p:0,height:o.spacing(3),width:o.spacing(3),minWidth:o.spacing(3)}},ut.createElement(r.b0D,{size:24,sx:{color:"primary.main"}}))),ut.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:4}},ut.createElement(r.ZT$,{variant:"body2",minHeight:40},ut.createElement(r.ZT$,{sx:{color:"text.secondary"}},C[h])),ut.createElement(r.Kqy,{sx:{height:"100%",flexGrow:1}},k[h])),ut.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:h!==_e.ERROR?"space-between":"flex-end",alignItems:"center",p:2}},ut.createElement(r.Kqy,null,h!==_e.ERROR&&ut.createElement(r.zxk,{variant:"text",disabled:h===_e.REGISTER,onClick:async()=>{await S()},sx:{color:h===_e.LOGIN?"text.secondary":"secondary.main"},"data-testid":"fido-modal-naming-skip"},l("Skip"))),ut.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:2}},ut.createElement(r.zxk,{color:"secondary","data-testid":"fido-modal-cancel",disabled:w,onClick:()=>{m(`FidoDevice${n}Cancelled`),t()}},l("Cancel")),ut.createElement(r.zxk,{isLoading:w,disabled:w,"data-testid":"fido-modal-advance",onClick:async()=>{a!==_e.LOGIN?await S(p):await b()}},h!==_e.ERROR?l("Next"):l("Try Again"))))))}var pt=n(67294);function Et(){const e=(0,m.k6)(),{t}=(0,g.$)(),{capture:n}=(0,i.O)(),[a,o]=(0,c.useState)(null),[s,l]=(0,c.useState)(!1),{featureFlags:d}=(0,Z.d)(),{oidcToken:u,isSeedlessMfaRequired:p,setOnboardingWalletType:E}=(0,h.t)(),{loginWithoutMFA:y}=$e();return(0,c.useEffect)((()=>{u||e.push(q.o7.ONBOARDING_HOME)}),[e,u,t]),(0,c.useEffect)((()=>{E(G.S.Seedless),a&&l(!0)}),[a,E]),pt.createElement(pt.Fragment,null,pt.createElement(r.Kqy,{sx:{width:"420px",height:"100%"}},pt.createElement(f,{testId:"copy-phrase",title:t("Add Recovery Methods")}),pt.createElement(r.Kqy,{sx:{flexGrow:1,textAlign:"center",mb:3}},pt.createElement(r.ZT$,{variant:"body2",sx:{mb:5}},pt.createElement(x.c,{i18nKey:"Add <bold>one</bold> recovery method to continue.",components:{bold:pt.createElement(at,null)}})),pt.createElement(r.Kqy,{sx:{textAlign:"left",rowGap:1}},d[ne.yy.SEEDLESS_MFA_PASSKEY]&&pt.createElement(ot,{icon:pt.createElement(r._m8,{size:24}),title:t("Passkey"),description:t("Add a Passkey as a recovery method."),onClick:()=>o(Le.PASSKEY)}),d[ne.yy.SEEDLESS_MFA_AUTHENTICATOR]&&pt.createElement(ot,{icon:pt.createElement(r.Cge,{size:24}),title:t("Authenticator"),description:t("Use an authenticator app as a recovery method."),onClick:()=>o(Le.TOTP)}),d[ne.yy.SEEDLESS_MFA_YUBIKEY]&&pt.createElement(ot,{icon:pt.createElement(r.Fhn,{size:24}),title:t("Yubikey"),description:t("Add a Yubikey as a recovery method."),onClick:()=>o(Le.YUBIKEY)}))),pt.createElement(N,{onBack:()=>{e.goBack()},nextText:t("Set Up Later"),disableNext:!d[ne.yy.SEEDLESS_OPTIONAL_MFA]||p,nextDisabledReason:d[ne.yy.SEEDLESS_OPTIONAL_MFA]?p?t("MFA configuration is required for your account."):void 0:t("Coming soon!"),onNext:async()=>{await y(),e.push(q.o7.CREATE_PASSWORD)},activeStep:0,steps:3})),s&&a===Le.TOTP&&pt.createElement(dt,{activeStep:lt.SCAN,onFinish:()=>{n("recoveryMethodAdded",{method:a}),e.push(q.o7.CREATE_PASSWORD)},onCancel:()=>{n(`FidoDevice${a}Cancelled`),l(!1),o(null)}}),s&&(a===Le.YUBIKEY||a===Le.PASSKEY)&&pt.createElement(mt,{onFinish:()=>{n("recoveryMethodAdded",{method:a}),e.push(q.o7.CREATE_PASSWORD)},onCancel:()=>{l(!1),n(`FidoDevice${a}Cancelled`),o(null)},selectedMethod:a}))}var ht=n(82261),yt=n(98732),ft=n(67294);function gt({onFinish:e,onCancel:t}){const n=(0,s.Z)(),{t:a}=(0,g.$)(),{oidcToken:o,setSeedlessSignerToken:i}=(0,h.t)(),[l,d]=(0,c.useState)(!1),[u,m]=(0,c.useState)(""),p=(0,c.useCallback)((async t=>{i(t),e()}),[i,e]),E=(0,c.useCallback)((async()=>o??""),[o]),{error:y,authenticate:f,verifyTotpCode:x,step:w}=(0,ht.q)({setIsLoading:d,onSignerTokenObtained:p,getOidcToken:E}),b=(0,yt.d)(y);return(0,c.useEffect)((()=>{w===ht.$.NotInitialized&&f({})}),[f,w]),ft.createElement(B.a,null,ft.createElement(r.Kqy,{sx:{width:"512px",minHeight:"407px",background:n.palette.background.paper,borderRadius:1,p:1}},ft.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},ft.createElement(r.ZT$,{variant:"h4",sx:{pt:3,px:4},"data-testid":"authenticator-modal-header"},a("Verify Code")),ft.createElement(r.zxk,{variant:"text","data-testid":"authenticator-modal-close-button",onClick:t,sx:{p:0,height:n.spacing(3),width:n.spacing(3),minWidth:n.spacing(3)}},ft.createElement(r.b0D,{size:24,sx:{color:"primary.main"}}))),ft.createElement(r.Kqy,{sx:{flexGrow:1,pt:1,px:4}},ft.createElement(r.ZT$,{variant:"body2",minHeight:40},ft.createElement(r.ZT$,{sx:{color:"text.secondary"}},a("Enter the code generated from your authenticator app."))),ft.createElement(r.Kqy,{sx:{height:"100%",flexGrow:1}},ft.createElement(r.Kqy,{sx:{width:"100%"}},ft.createElement(r.nvn,{inputProps:{style:{width:"100%"}},type:"tel",onChange:e=>m(e.target.value),rows:3,multiline:!0,error:!!b,helperText:b,onKeyDown:async e=>{"Enter"===e.key&&(e.preventDefault(),await x(u))}})))),ft.createElement(r.Kqy,{sx:{flexDirection:"row",justifyContent:"flex-end",alignItems:"center",p:2}},ft.createElement(r.Kqy,{sx:{flexDirection:"row",columnGap:2}},ft.createElement(r.zxk,{color:"secondary","data-testid":"authenticator-modal-cancel",onClick:t,disabled:l},a("Cancel")),ft.createElement(r.zxk,{isLoading:l,disabled:l,"data-testid":"authenticator-modal-next",onClick:async()=>{await x(u)}},a("Next"))))))}var xt=n(67294);function wt(){const e=(0,m.k6)(),{t}=(0,g.$)(),[n,a]=(0,c.useState)(null),[o,s]=(0,c.useState)(!1),{featureFlags:i}=(0,Z.d)(),{oidcToken:l,setOnboardingWalletType:d}=(0,h.t)(),[u,p]=(0,c.useState)([]),[E,y]=(0,c.useState)(!1);(0,c.useEffect)((()=>{if(!l)return v.ZP.error(t("Seedless login error")),void e.push(q.o7.ONBOARDING_HOME)}),[e,l,t]),(0,c.useEffect)((()=>{d(G.S.Seedless),y(!0),(async()=>{if(!l)return!1;const e=(0,Re.xo)(l),t=await e.identityProve(),n=t.user_info?.configured_mfa;if(n){const e=n.map((e=>"fido"===e.type?{name:e.name,type:e.type}:"totp"===e.type?{name:"",type:e.type}:{name:"",type:Le.UNKNOWN}));p(e),1===e.length&&e[0]&&(a(e[0].type),s(!0))}y(!1)})()}),[l,d]);const w=(0,c.useCallback)((()=>{e.push(q.o7.CREATE_PASSWORD)}),[e]);return xt.createElement(xt.Fragment,null,xt.createElement(r.Kqy,{sx:{width:"420px",height:"100%"}},xt.createElement(f,{testId:"copy-phrase",title:t("Verify Recovery Methods")}),xt.createElement(r.Kqy,{sx:{flexGrow:1,textAlign:"center",mb:3}},xt.createElement(r.ZT$,{variant:"body2",sx:{mb:5}},xt.createElement(x.c,{i18nKey:"Verify your recovery method(s) to continue."})),xt.createElement(r.Kqy,{sx:{textAlign:"left",rowGap:1}},E&&xt.createElement(xt.Fragment,null,xt.createElement(r.OdW,{sx:{width:"100%",height:"80px",transform:"none"}}),xt.createElement(r.OdW,{sx:{width:"100%",height:"80px",transform:"none"}})),u.map(((e,n)=>"totp"===e.type&&!i[ne.yy.SEEDLESS_MFA_AUTHENTICATOR]||"fido"===e.type&&!i[ne.yy.SEEDLESS_MFA_PASSKEY]&&!i[ne.yy.SEEDLESS_MFA_YUBIKEY]?null:xt.createElement(ot,{key:n,icon:"totp"===e.type?xt.createElement(r.Cge,{size:24}):xt.createElement(r._m8,{size:24}),title:e.name?e.name:"totp"===e.type?t("Authenticator"):t("FIDO Device"),description:"totp"===e.type?t("Verify an authenticator app as a recovery method."):t("Verify your FIDO device as a recovery method."),onClick:()=>{a(e.type),s(!0)}}))))),xt.createElement(N,{onBack:()=>{e.goBack()},onNext:()=>{s(!0)},activeStep:0,steps:3,disableNext:!n})),o&&n===Le.TOTP&&xt.createElement(gt,{onFinish:()=>{e.push(q.o7.CREATE_PASSWORD)},onCancel:()=>{s(!1),e.push(q.o7.ONBOARDING_HOME)}}),o&&n===Le.FIDO&&xt.createElement(mt,{onFinish:w,onCancel:()=>{s(!1),e.push(q.o7.ONBOARDING_HOME)},selectedMethod:n,startingStep:_e.LOGIN}))}var bt=n(67294);const St=(0,a.ZP)(r.Kqy)`
  flex-grow: 1;
  height: 100%;
  width: 100%;
  background-color: black;
`,vt=(0,a.ZP)(r.Kqy)`
  align-items: center;
  flex: 1;
`;function Ct(){const e=(0,m.k6)(),t=(0,m.TH)(),{submitInProgress:n,setOnboardingPhase:a,onboardingPhase:o}=(0,h.t)(),{initAnalyticsIds:s,capture:l}=(0,i.O)(),[d,p]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{s(!1)}),[]),bt.createElement(r.xuv,{sx:{display:"grid",height:"100%",gridTemplateColumns:"1fr 1fr"}},n&&bt.createElement(ke.f,null),bt.createElement(St,{sx:{px:2}},bt.createElement(r.Kqy,{sx:{alignItems:"end",py:2}},bt.createElement(u,null)),bt.createElement(vt,{sx:{justifyContent:"space-between"}},bt.createElement(r.Kqy,{sx:{height:"100%",mt:2}},bt.createElement(m.rs,null,bt.createElement(m.AW,{path:q.o7.ANALYTICS_CONSENT},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(Ce,null))),bt.createElement(m.AW,{path:q.o7.CREATE_PASSWORD},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(Se,null))),bt.createElement(m.AW,{path:q.o7.SEED_PHRASE},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(ye,null))),bt.createElement(m.AW,{path:q.o7.KEYSTONE},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(se,null))),bt.createElement(m.AW,{path:q.o7.LEDGER},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(ue,null))),bt.createElement(m.AW,{path:q.o7.LEDGER_TROUBLE},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(Oe,null))),bt.createElement(m.AW,{path:q.o7.CREATE_WALLET},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement($,null))),bt.createElement(m.AW,{path:q.o7.RECOVERY_METHODS},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(Et,null))),bt.createElement(m.AW,{path:q.o7.RECOVERY_METHODS_LOGIN},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(wt,null))),bt.createElement(m.AW,{path:q.o7.ONBOARDING_HOME},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(nt,null))),bt.createElement(m.AW,{path:"/"},bt.createElement(c.Suspense,{fallback:bt.createElement(r.D8x,null)},bt.createElement(m.l_,{to:"/onboarding"}))))),t.pathname!==q.o7.ONBOARDING_HOME&&bt.createElement(r.Kqy,{sx:{width:"100%",pl:1,pb:2}},bt.createElement(r.tvw,{size:20,sx:{cursor:"pointer"},onClick:()=>{l("OnboardingCancelled",{step:o}),o!==q.Iz.SEEDLESS_GOOGLE?(a(null),e.push(q.o7.ONBOARDING_HOME)):p(!0)}})),bt.createElement(we,{isOpen:d,onBack:()=>{e.push(q.o7.ONBOARDING_HOME),p(!1)},onCancel:()=>{p(!1)}}))),bt.createElement(St,{sx:{backgroundColor:"background.paper",height:"100%",backdropFilter:"blur(15px)"}},bt.createElement(Ae.Z,null)))}},4231:(e,t,n)=>{"use strict";function a(e){return new Promise(((t,n)=>{chrome.identity.launchWebAuthFlow({url:e.toString(),interactive:!0},(e=>{if(!e)return void n(new Error("Redirect url is undefined"));if(chrome.runtime.lastError)return n(chrome.runtime.lastError);const a=new URL(e),r=new URLSearchParams(a.hash.slice(1)).get("id_token");if(!r)throw new Error("no id token");t(r)}))}))}n.d(t,{V:()=>a})},75127:(e,t,n)=>{"use strict";n.d(t,{j:()=>r,y:()=>o});var a=n(85073);const r=[12,18,24],o=e=>{const t=e.trim().split(/\s+/g);return r.includes(t.length)&&a.t.isValidMnemonic(t.join(" ").toLowerCase())}},29606:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var a=n(4231);async function r(){const e="https://"+chrome.runtime.id+".chromiumapp.org",t=new URL("https://appleid.apple.com/auth/authorize");return t.searchParams.set("client_id","org.avalabs.corewallet.extension"),t.searchParams.set("nonce",crypto.randomUUID()),t.searchParams.set("response_type","code id_token"),t.searchParams.set("state",e),t.searchParams.set("redirect_uri","https://seedless-api.avax.network/v1/redirectAppleAuth"),t.searchParams.set("scope","email"),t.searchParams.set("response_mode","form_post"),(0,a.V)(t)}},88653:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(4231);async function r(){const e=chrome.runtime.getManifest();if(!e.oauth2||!e.oauth2.scopes)throw new Error("Oauth not configured");const t="https://"+chrome.runtime.id+".chromiumapp.org",n=new URL("https://accounts.google.com/o/oauth2/auth");return n.searchParams.set("client_id",e.oauth2.client_id),n.searchParams.set("response_type","id_token"),n.searchParams.set("redirect_uri",t),n.searchParams.set("scope",e.oauth2.scopes.join(" ")),(0,a.V)(n)}},35801:(e,t,n)=>{"use strict";n.d(t,{Uu:()=>o,XX:()=>s,dw:()=>i,xo:()=>c});var a=n(88004);function r(){return a.envs.prod}function o(){return"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7"}function c(e){return new a.OidcClient(r(),"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",e)}async function s(e){return new a.SignerSession(await a.SignerSessionManager.createFromSessionInfo(r(),"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",e))}async function i(e,t){const n=c(e);return await n.sessionCreate(["sign:*","manage:*","export:*"],{auth_lifetime:300,refresh_lifetime:7776e3,session_lifetime:31536e3},t)}},99424:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});var a=n(88004);const r=async e=>{const t=e.data();return(await a.SignerSessionManager.createFromSessionInfo(a.envs.prod,"Org#db7f2cac-7bd0-4e5f-b7c2-b5881a4bb4e7",t)).storage.retrieve()}},21614:(e,t,n)=>{"use strict";var a;n.r(t),n.d(t,{NIL:()=>K,parse:()=>y,stringify:()=>d,v1:()=>h,v3:()=>k,v4:()=>A,v5:()=>O,validate:()=>s,version:()=>D});var r=new Uint8Array(16);function o(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&c.test(e)};for(var i=[],l=0;l<256;++l)i.push((l+256).toString(16).substr(1));const d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var u,m,p=0,E=0;const h=function(e,t,n){var a=t&&n||0,r=t||new Array(16),c=(e=e||{}).node||u,s=void 0!==e.clockseq?e.clockseq:m;if(null==c||null==s){var i=e.random||(e.rng||o)();null==c&&(c=u=[1|i[0],i[1],i[2],i[3],i[4],i[5]]),null==s&&(s=m=16383&(i[6]<<8|i[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:E+1,y=l-p+(h-E)/1e4;if(y<0&&void 0===e.clockseq&&(s=s+1&16383),(y<0||l>p)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=l,E=h,m=s;var f=(1e4*(268435455&(l+=122192928e5))+h)%4294967296;r[a++]=f>>>24&255,r[a++]=f>>>16&255,r[a++]=f>>>8&255,r[a++]=255&f;var g=l/4294967296*1e4&268435455;r[a++]=g>>>8&255,r[a++]=255&g,r[a++]=g>>>24&15|16,r[a++]=g>>>16&255,r[a++]=s>>>8|128,r[a++]=255&s;for(var x=0;x<6;++x)r[a+x]=c[x];return t||d(r)},y=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function f(e,t,n){function a(e,a,r,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof a&&(a=y(a)),16!==a.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(a),c.set(e,a.length),(c=n(c))[6]=15&c[6]|t,c[8]=63&c[8]|128,r){o=o||0;for(var s=0;s<16;++s)r[o+s]=c[s];return r}return d(c)}try{a.name=e}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}function g(e){return 14+(e+64>>>9<<4)+1}function x(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,a,r,o){return x((c=x(x(t,e),x(a,o)))<<(s=r)|c>>>32-s,n);var c,s}function b(e,t,n,a,r,o,c){return w(t&n|~t&a,e,t,r,o,c)}function S(e,t,n,a,r,o,c){return w(t&a|n&~a,e,t,r,o,c)}function v(e,t,n,a,r,o,c){return w(t^n^a,e,t,r,o,c)}function C(e,t,n,a,r,o,c){return w(n^(t|~a),e,t,r,o,c)}const k=f("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,a="0123456789abcdef",r=0;r<n;r+=8){var o=e[r>>5]>>>r%32&255,c=parseInt(a.charAt(o>>>4&15)+a.charAt(15&o),16);t.push(c)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;for(var n=1732584193,a=-271733879,r=-1732584194,o=271733878,c=0;c<e.length;c+=16){var s=n,i=a,l=r,d=o;n=b(n,a,r,o,e[c],7,-680876936),o=b(o,n,a,r,e[c+1],12,-389564586),r=b(r,o,n,a,e[c+2],17,606105819),a=b(a,r,o,n,e[c+3],22,-1044525330),n=b(n,a,r,o,e[c+4],7,-176418897),o=b(o,n,a,r,e[c+5],12,1200080426),r=b(r,o,n,a,e[c+6],17,-1473231341),a=b(a,r,o,n,e[c+7],22,-45705983),n=b(n,a,r,o,e[c+8],7,1770035416),o=b(o,n,a,r,e[c+9],12,-1958414417),r=b(r,o,n,a,e[c+10],17,-42063),a=b(a,r,o,n,e[c+11],22,-1990404162),n=b(n,a,r,o,e[c+12],7,1804603682),o=b(o,n,a,r,e[c+13],12,-40341101),r=b(r,o,n,a,e[c+14],17,-1502002290),n=S(n,a=b(a,r,o,n,e[c+15],22,1236535329),r,o,e[c+1],5,-165796510),o=S(o,n,a,r,e[c+6],9,-1069501632),r=S(r,o,n,a,e[c+11],14,643717713),a=S(a,r,o,n,e[c],20,-373897302),n=S(n,a,r,o,e[c+5],5,-701558691),o=S(o,n,a,r,e[c+10],9,38016083),r=S(r,o,n,a,e[c+15],14,-660478335),a=S(a,r,o,n,e[c+4],20,-405537848),n=S(n,a,r,o,e[c+9],5,568446438),o=S(o,n,a,r,e[c+14],9,-1019803690),r=S(r,o,n,a,e[c+3],14,-187363961),a=S(a,r,o,n,e[c+8],20,1163531501),n=S(n,a,r,o,e[c+13],5,-1444681467),o=S(o,n,a,r,e[c+2],9,-51403784),r=S(r,o,n,a,e[c+7],14,1735328473),n=v(n,a=S(a,r,o,n,e[c+12],20,-1926607734),r,o,e[c+5],4,-378558),o=v(o,n,a,r,e[c+8],11,-2022574463),r=v(r,o,n,a,e[c+11],16,1839030562),a=v(a,r,o,n,e[c+14],23,-35309556),n=v(n,a,r,o,e[c+1],4,-1530992060),o=v(o,n,a,r,e[c+4],11,1272893353),r=v(r,o,n,a,e[c+7],16,-155497632),a=v(a,r,o,n,e[c+10],23,-1094730640),n=v(n,a,r,o,e[c+13],4,681279174),o=v(o,n,a,r,e[c],11,-358537222),r=v(r,o,n,a,e[c+3],16,-722521979),a=v(a,r,o,n,e[c+6],23,76029189),n=v(n,a,r,o,e[c+9],4,-640364487),o=v(o,n,a,r,e[c+12],11,-421815835),r=v(r,o,n,a,e[c+15],16,530742520),n=C(n,a=v(a,r,o,n,e[c+2],23,-995338651),r,o,e[c],6,-198630844),o=C(o,n,a,r,e[c+7],10,1126891415),r=C(r,o,n,a,e[c+14],15,-1416354905),a=C(a,r,o,n,e[c+5],21,-57434055),n=C(n,a,r,o,e[c+12],6,1700485571),o=C(o,n,a,r,e[c+3],10,-1894986606),r=C(r,o,n,a,e[c+10],15,-1051523),a=C(a,r,o,n,e[c+1],21,-2054922799),n=C(n,a,r,o,e[c+8],6,1873313359),o=C(o,n,a,r,e[c+15],10,-30611744),r=C(r,o,n,a,e[c+6],15,-1560198380),a=C(a,r,o,n,e[c+13],21,1309151649),n=C(n,a,r,o,e[c+4],6,-145523070),o=C(o,n,a,r,e[c+11],10,-1120210379),r=C(r,o,n,a,e[c+2],15,718787259),a=C(a,r,o,n,e[c+9],21,-343485551),n=x(n,s),a=x(a,i),r=x(r,l),o=x(o,d)}return[n,a,r,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(g(t)),a=0;a<t;a+=8)n[a>>5]|=(255&e[a/8])<<a%32;return n}(e),8*e.length))})),A=function(e,t,n){var a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return d(a)};function T(e,t,n,a){switch(e){case 0:return t&n^~t&a;case 1:case 3:return t^n^a;case 2:return t&n^t&a^n&a}}function I(e,t){return e<<t|e>>>32-t}const O=f("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var a=unescape(encodeURIComponent(e));e=[];for(var r=0;r<a.length;++r)e.push(a.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,c=Math.ceil(o/16),s=new Array(c),i=0;i<c;++i){for(var l=new Uint32Array(16),d=0;d<16;++d)l[d]=e[64*i+4*d]<<24|e[64*i+4*d+1]<<16|e[64*i+4*d+2]<<8|e[64*i+4*d+3];s[i]=l}s[c-1][14]=8*(e.length-1)/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<c;++u){for(var m=new Uint32Array(80),p=0;p<16;++p)m[p]=s[u][p];for(var E=16;E<80;++E)m[E]=I(m[E-3]^m[E-8]^m[E-14]^m[E-16],1);for(var h=n[0],y=n[1],f=n[2],g=n[3],x=n[4],w=0;w<80;++w){var b=Math.floor(w/20),S=I(h,5)+T(b,y,f,g)+x+t[b]+m[w]>>>0;x=g,g=f,f=I(y,30)>>>0,y=h,h=S}n[0]=n[0]+h>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+f>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+x>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),K="00000000-0000-0000-0000-000000000000",D=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},69159:()=>{}}]);
//# debugId=2c6a26ed-dada-5d84-91e8-2ca073c88ab4
