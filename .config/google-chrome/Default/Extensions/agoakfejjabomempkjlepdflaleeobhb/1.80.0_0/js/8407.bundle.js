"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a49ca355-ceb3-5b25-a744-b11325c6f3d7")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[8407],{1627:(e,t,a)=>{a.d(t,{a:()=>i});var n=a(67294);const i=e=>({onKeyDown:(0,n.useCallback)((async t=>{const a=e[t.key];"function"==typeof a&&(t.preventDefault(),await a())}),[e])})},51489:(e,t,a)=>{a.d(t,{K:()=>r});var n=a(67294),i=a(47886);const r=()=>{const{search:e}=(0,i.TH)();return(0,n.useMemo)((()=>new URLSearchParams(e)),[e])}},98407:(e,t,a)=>{a.r(t),a.d(t,{SeedlessUpdateRecoveryMethod:()=>E});var n=a(87462),i=a(67294),r=a(26793),s=a(68483),l=a(2095),c=a(1336),o=a(64631),u=a(36553),d=a(1627),m=a(69518),y=a(46935),h=a(87474),k=a(51489),b=a(23659),p=a(67294),g=function(e){return e.Loading="loading",e.IncompatibleWallet="incompatible-wallet",e.NameYourDevice="name-your-device",e.AddAuthenticator="add-authenticator",e.Success="success",e.Failure="failure",e}(g||{});const E=()=>{const{t:e}=(0,r.$)(),t=(0,k.K)(),{request:a}=(0,m.K)(),{walletDetails:E}=(0,o.t)(),{renderMfaPrompt:x}=(0,l.b)(),[f,v]=(0,i.useState)(g.Loading),[w,S]=(0,i.useState)(""),Y=t.get("keyType");(0,i.useEffect)((()=>{E?.type===u.Y.Seedless?v(Y?g.NameYourDevice:g.AddAuthenticator):v(g.IncompatibleWallet)}),[Y,E?.type]);const C=(0,i.useCallback)((async()=>{try{if(!Y)return;v(g.Loading),await a({method:y.a.SEEDLESS_ADD_FIDO_DEVICE,params:[w,Y]}),v(g.Success)}catch(e){v(g.Failure)}}),[a,Y,w]),A=(0,d.a)({Enter:C});return p.createElement(s.Kqy,{sx:{width:375,height:600,px:2,backgroundColor:"background.paper",alignSelf:"center",borderRadius:1,pb:3}},f===g.Failure&&p.createElement(s.Kqy,{sx:{width:1,height:1,justifyContent:"center",alignItems:"center",gap:2,px:3}},p.createElement(s.go2,{size:72}),p.createElement(s.Kqy,{sx:{textAlign:"center",gap:.5}},p.createElement(s.ZT$,{variant:"h5",sx:{mb:2}},e("Something Went Wrong")),p.createElement(s.ZT$,{variant:"body2"},e("We encountered an unexpected issue.")),p.createElement(s.ZT$,{variant:"body2"},e("Please try again."))),p.createElement(s.zxk,{fullWidth:!0,sx:{mt:4},onClick:C,"data-testid":"btn-try-again"},e("Try again")),p.createElement(s.zxk,{fullWidth:!0,variant:"text",onClick:window.close,"data-testid":"btn-close"},e("Close"))),f===g.Success&&p.createElement(s.Kqy,{sx:{width:1,height:1,justifyContent:"center",alignItems:"center",gap:2,px:2,textAlign:"center"}},p.createElement(s.rE2,{size:72,sx:{color:"success.main"}}),p.createElement(s.ZT$,{variant:"h5"},e("Success!")),p.createElement(s.ZT$,{variant:"body2"},e("You can now use your new {{methodName}} to verify requests.",{methodName:Y===h.J.Yubikey?e("Yubikey"):Y===h.J.Passkey?e("Passkey"):e("Authenticator app")})),p.createElement(s.zxk,{fullWidth:!0,onClick:window.close,"data-testid":"btn-close",sx:{mt:3}},e("Close"))),f===g.IncompatibleWallet&&p.createElement(s.Kqy,{sx:{width:1,height:1,justifyContent:"center",alignItems:"center",gap:2}},p.createElement(s.go2,{size:72}),p.createElement(s.ZT$,{variant:"h5"},e("Incompatible Wallet")),p.createElement(s.ZT$,{variant:"body2"},e("This action is only allowed for Seedless wallets."))),f===g.Loading&&p.createElement(p.Fragment,null,p.createElement(c.V,{showBackButton:!1,variant:c.D.PRIMARY,margin:"0 0 0 -16px"},Y===h.J.Yubikey?e("Yubikey Setup"):Y===h.J.Passkey?e("Passkey Setup"):e("Authenticator Setup")),p.createElement(s.Kqy,{sx:{justifyContent:"center",alignItems:"center",flexGrow:1}},p.createElement(s.D8x,{size:72})),x()),Y&&f===g.NameYourDevice&&p.createElement(p.Fragment,null,p.createElement(c.V,{showBackButton:!1,variant:c.D.PRIMARY,margin:"0 0 0 -16px"},Y===h.J.Yubikey?e("Name Your Yubikey"):e("Name Your Passkey")),p.createElement(s.Kqy,{sx:{flexGrow:1}},p.createElement(s.nvn,(0,n.Z)({size:"large",autoFocus:!0,"data-testid":"fido-device-name",fullWidth:!0,label:Y===h.J.Yubikey?e("Yubikey Name"):e("Passkey Name"),inputLabelProps:{sx:{transform:"none",fontSize:"body2.fontSize",mb:1,mt:4}},helperText:e("Add a {{device}} name, so that itâ€™s easier to find later.",{device:Y===h.J.Yubikey?e("Yubikey"):e("Passkey")}),placeholder:Y===h.J.Yubikey?e("My Yubikey"):e("My Passkey"),value:w,onChange:e=>S(e.target.value)},A))),p.createElement(s.zxk,{fullWidth:!0,size:"large",onClick:C,disabled:!w},e("Save"))),!Y&&f===g.AddAuthenticator&&p.createElement(b.r,{autoInitialize:!0,onUpdated:()=>v(g.Success),onBackClick:window.close}))}}}]);
//# debugId=a49ca355-ceb3-5b25-a744-b11325c6f3d7
