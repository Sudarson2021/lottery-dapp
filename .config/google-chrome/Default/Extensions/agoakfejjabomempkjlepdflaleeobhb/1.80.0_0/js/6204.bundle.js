
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="91520f99-335a-5239-8e82-fe367aa04d18")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[6204],{61832:(t,n,e)=>{"use strict";e.d(n,{_:()=>i});var r=e(55813);function i(){const{bridgeConfig:t}=(0,r.j)();return t}},59193:(t,n,e)=>{"use strict";e.d(n,{Y:()=>s});var r=e(67294),i=e(55813);const o=15e3;function s(t){const{bridgeConfig:n,setBridgeConfig:e}=(0,i.j)();(0,r.useEffect)((()=>{async function r(){const n=await t();e(n)}n.config||n.error||r();const i=window.setInterval((()=>{r()}),o);return()=>{window.clearInterval(i)}}),[t,n])}},34223:(t,n,e)=>{"use strict";e.d(n,{$:()=>a});var r=e(67294),i=e(55813),o=e(52219),s=(e(17656),e(31269)),u=(e(93302),e(4219)),c=e(35069);function a(t){const{currentAssetData:n,currentBlockchain:e,bridgeConfig:a,ethereumAssets:f,ethereumWrappedAssets:m}=(0,i.j)();return(0,r.useMemo)((()=>{if(!f||!n||!a.config)return;const r=(0,u.Bs)(n)&&(e===o.$O.AVALANCHE||e===o.$O.BITCOIN),i=!(0,u.Bs)(n)&&(e===o.$O.AVALANCHE||e===o.$O.ETHEREUM);if(r)return(0,s.h)({source:e,config:a.config,amount:t});if(i){const r=(0,u.UI)(n)?m[n.wrappedAssetSymbol]:n;return(0,c.s)({source:e,config:a.config,asset:r,amount:t})}}),[f,n,a.config,e,t,m])}},27889:(t,n,e)=>{"use strict";e.d(n,{s:()=>u});var r=e(67294),i=e(55813),o=e(52219),s=e(4219);function u(){const{sourceAssets:t}=(0,i.j)();return{getTokenSymbolOnNetwork:(0,r.useCallback)(((n,e)=>{const r=t[n];let i=n;return r&&e!==r.nativeNetwork?((0,s.UI)(r)&&(i=r.wrappedAssetSymbol),r.nativeNetwork===o.$O.ETHEREUM?`${i}.e`:r.nativeNetwork===o.$O.AVALANCHE?`${i}.a`:r.nativeNetwork===o.$O.BITCOIN?`${i}.b`:i):i}),[t])}}},12575:(t,n,e)=>{"use strict";e.d(n,{p:()=>w});var r=e(67294),i=e(55813),o=e(52219),s=(e(17656),e(93302)),u=e.n(s),c=e(71238),a=e(92701),f=e(4219),m=e(79383),d=e(60148),p=e(35069),l=e(26864);function w(t){const{currentAssetData:n,currentBlockchain:e,bridgeConfig:s,ethereumAssets:w,ethereumWrappedAssets:v}=(0,i.j)();return(0,r.useMemo)((()=>{if(!w||!n||!s.config)return a.HW;const r=(0,f.Bs)(n)&&(e===o.$O.AVALANCHE||e===o.$O.BITCOIN),i=!(0,f.Bs)(n)&&(e===o.$O.AVALANCHE||e===o.$O.ETHEREUM);if(r)return(0,c.O)((0,m.R)(e,s.config,(0,c.U)(t)));if(i){const t=(0,f.UI)(n)?v[n.wrappedAssetSymbol]:n;return function(t,n,e){if((0,d.zS)(n)){const r=t===o.$O.ETHEREUM?"wrapFeeApproximation":"unwrapFeeApproximation",{minimumFeeAmount:i}=n.nonCritical[r][e.symbol];return new(u())(i).div(a.xp.pow(e.denomination)).mul(l.O)}return(0,p.s)({source:t,config:n,asset:e,amount:a.HW}).mul(l.O)}(e,s.config,t)}return a.HW}),[w,n,s.config,e,t,v])}},31269:(t,n,e)=>{"use strict";e.d(n,{h:()=>f});var r=e(93302),i=e.n(r),o=e(52219),s=e(71238),u=e(38376),c=e(92701),a=e(60148);function f({source:t,config:n,amount:e}){if(!(0,a.xe)(n))return function(t,n,e){const{constUnwrapFeeAmount:r,unwrapFeeNumerator:i,unwrapFeeDenominator:u,wrapFeeAmount:c}=n.nonCriticalBitcoin.networkInfo.btc.currentBridgeFeeEstimate;return t===o.$O.BITCOIN?(0,s.O)(c):(0,s.O)(r+i/u*e)}(t,n,(0,s.U)(e));const{wrapFeeEstimate:r,unwrapFeeEstimate:f}=n.nonCriticalBitcoin.networkInfo.btc.currentBridgeFeeEstimate;if(t===o.$O.BITCOIN)return(0,u.K)(e,8,r);const{constAmount:m,numeratorPerSat:d,denominatorPerSat:p}=f.estimatedTxFee,l=m+d/p*(0,s.U)(e),w=(0,u.K)(e,8,f.bridgeToll),v=new(i())(l).div(c.xp.pow(8));return w.add(v)}},59198:(t,n,e)=>{"use strict";e.d(n,{e:()=>f});var r=e(52219),i=e(5927),o=e(79383),s=e(31269),u=e(60148),c=e(42426),a=e(71238);function f(t,n,e,f,m){const d=(0,u.vH)(t);if(!(0,i.KZ)(n,d))throw new Error("Address must be bech32");if(f%1!=0)throw new Error(`Amount must be a whole number. Satoshis can not be divided. ${f}`);const p=(0,o.R)(r.$O.BITCOIN,t,f);if(f<p)throw new Error(`Amount must be at least ${p} satoshis.`);const l=t.criticalBitcoin?.walletAddresses.btc||"";if(!l)throw new Error("Bridge address is not found in the config.");if(!m)throw new Error("Fee rate is not provided in the config.");const{inputs:w,outputs:v,fee:N}=(0,c.k)(l,n,f,m,e);if(!w||!v)throw new Error("Transaction values can not be satisfied.");const O=(0,s.h)({source:r.$O.BITCOIN,config:t,amount:(0,a.O)(f)}),A=(0,a.U)(O);return{fee:N,bridgeFee:A,receiveAmount:f-A,inputs:w,outputs:v}}},79383:(t,n,e)=>{"use strict";e.d(n,{R:()=>u});var r=e(52219),i=e(31269),o=e(71238),s=e(60148);function u(t,n,e){const u=function(t,n,e){if((0,s.xe)(n)){const i=t===r.$O.BITCOIN,{currentBridgeFeeEstimate:o}=n.nonCriticalBitcoin.networkInfo.btc;if(i)return Number(o.wrapFeeEstimate.minimumFeeAmount);const{constAmount:s,numeratorPerSat:u,denominatorPerSat:c}=o.unwrapFeeEstimate.estimatedTxFee,a=s+u/c*e;return Number(o.unwrapFeeEstimate.bridgeToll.minimumFeeAmount)+a}const u=(0,i.h)({source:t,config:n,amount:(0,o.O)(e)});return(0,o.U)(u)}(t,n,e);if(t===r.$O.BITCOIN){const t=n.nonCriticalBitcoin.networkInfo.btc.minimumOnboardSize;return Math.max(4*u,t)}{const{dustThreshold:t}=n.nonCriticalBitcoin.networkInfo.btc.currentBridgeFeeEstimate;return 2*(u+t)}}},71238:(t,n,e)=>{"use strict";e.d(n,{O:()=>s,U:()=>o});var r=e(93302),i=e.n(r);function o(t){return t.mul(1e8).toNumber()}function s(t){return new(i())(t).div(1e8)}},35069:(t,n,e)=>{"use strict";e.d(n,{s:()=>a});var r=e(52219),i=e(93302),o=e.n(i),s=e(92701),u=e(60148),c=e(38376);function a({source:t,config:n,asset:e,amount:i}){if(!(0,u.zS)(n))return function(t,n,e){const{wrapFeeApproximation:i,unwrapFeeApproximation:u}=n?.nonCritical||{},c=e.symbol,a=t===r.$O.ETHEREUM?i?.[c]:u?.[c];return new(o())(a||0).div(s.xp.pow(e.denomination))}(t,n,e);const{wrapFeeApproximation:a,unwrapFeeApproximation:f}=n.nonCritical,{symbol:m,denomination:d}=e,p=t===r.$O.ETHEREUM?a[m]:f[m];return(0,c.K)(i,d,p)}},38376:(t,n,e)=>{"use strict";e.d(n,{K:()=>s});var r=e(93302),i=e.n(r),o=e(92701);function s(t,n,e){const{minimumFeeAmount:r,maximumFeeAmount:s,feePercentage:u,feePercentageDecimals:c}=e,a=new(i())(r).div(o.xp.pow(n)),f=new(i())(s).div(o.xp.pow(n)),m=new(i())(u).div(o.xp.pow(c)).div(100),d=t.mul(m);return(0,o.FL)(d,{min:a,max:f})}},84655:(t,n,e)=>{"use strict";e.d(n,{k:()=>r});var r=(t=>(t[t.INITIAL=0]="INITIAL",t[t.WAITING_FOR_DEPOSIT_CONFIRMATION=1]="WAITING_FOR_DEPOSIT_CONFIRMATION",t[t.WAITING_FOR_DEPOSIT=2]="WAITING_FOR_DEPOSIT",t[t.WAITING_FOR_CONFIRMATION=3]="WAITING_FOR_CONFIRMATION",t[t.COMPLETE=4]="COMPLETE",t[t.VULNERABLE_ADDRESS=5]="VULNERABLE_ADDRESS",t))(r||{})},4219:(t,n,e)=>{"use strict";e.d(n,{Bs:()=>o,UI:()=>i,Vf:()=>s});var r=e(52219);const i=t=>t.assetType===r.h3.NATIVE,o=t=>t.assetType===r.h3.BTC,s=t=>t.assetType===r.h3.ERC20},92701:(t,n,e)=>{"use strict";e.d(n,{FL:()=>u,HW:()=>s,xp:()=>o});var r=e(93302),i=e.n(r);const o=new(i())(10),s=new(i())(0),u=(t,{max:n,min:e})=>t.gt(n)?n:t.lt(e)?e:t},87796:(t,n,e)=>{"use strict";function r(t,n=2){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:n}).format(t.toNumber())}e.d(n,{L:()=>r})},3999:(t,n,e)=>{"use strict";e.d(n,{f:()=>r});const r=({addressEVM:t,addressBTC:n,bridgeConfig:e})=>!(!t||!e.config?.critical.addressBlocklist.includes(t))||!(!n||!e.config?.criticalBitcoin.addressBlocklist.includes(n))},15541:(t,n,e)=>{"use strict";e.d(n,{l:()=>u});var r=e(93302),i=e.n(r),o=e(13550),s=e.n(o);function u(t,n){const e=Math.floor(n);if(e<0)throw new Error("Denomination can not be less that 0.");const r=t.mul(i()(10).pow(e)).toFixed(0,0);return new(s())(r)}},81637:(t,n,e)=>{"use strict";e.d(n,{W:()=>o});var r=e(93302),i=e.n(r);function o(t,n){const e=Math.floor(n);if(e<0)throw new Error("Denomination can not be less that 0.");const r=t.mul(i()(10).pow(e)).toFixed(0,0);return BigInt(r)}},7248:(t,n,e)=>{"use strict";e.d(n,{X:()=>o});var r=e(27822),i=e(739);function o(t,n=9){const e=(0,i.N)(t,n);return(0,r.v)(e,n)}},5099:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(93302),i=e.n(r),o=e(13550),s=e.n(o);function u(t,n){const e="string"==typeof t?i()(t.replace(/,/gi,"")):i()(t),r=i()(10).pow(n);return new(s())(e.times(r).toFixed(0))}},45524:(t,n,e)=>{"use strict";async function r(t){try{return[await t,null]}catch(t){return[null,t]}}e.d(n,{D:()=>r})},7482:(t,n,e)=>{"use strict";function r(t){const n=[];return t.filter((t=>{const e=t.txHash+t.index.toString();return!n.includes(e)&&(n.push(e),!0)}))}e.d(n,{v:()=>r})},96663:(t,n,e)=>{"use strict";e.d(n,{L:()=>o});var r=e(10069),i=e(96885);function o(t,n,e,o){const s=(0,i.s)(t);if(!s)return 0;const{fee:u}=(0,r.e)(n,e,s,o,t);return s-u}},42426:(t,n,e)=>{"use strict";e.d(n,{k:()=>s});var r=e(10069),i=e(7482),o=e(25108);function s(t,n,e,s,u){const c=(0,i.v)(u),a=(0,r.e)(t,n,e,s,c);return a.inputs||o.log("Unable to construct transaction, fee needed: ",a.fee),a}},10069:(t,n,e)=>{"use strict";e.d(n,{e:()=>o});var r=e(92213),i=e.n(r);function o(t,n,e,r,o){const s=[{address:t,value:e}],{inputs:u,outputs:c,fee:a}=i()(o,s,r);if(!u||!c)return{fee:a};const f=[c[0]],m=c[1];return m&&f.push({address:n,value:m.value}),{inputs:u,outputs:f,fee:a}}},3030:(t,n,e)=>{var r=e(39789);t.exports=function(t,n,e){if(!isFinite(r.uintOrNaN(e)))return{};for(var i=r.transactionBytes([],n),o=0,s=[],u=r.sumOrNaN(n),c=0;c<t.length;++c){var a=t[c],f=r.inputBytes(a),m=e*f,d=r.uintOrNaN(a.value);if(m>a.value){if(c===t.length-1)return{fee:e*(i+f)}}else if(i+=f,o+=d,s.push(a),!(o<u+e*i))return r.finalize(s,n,e)}return{fee:e*i}}},37037:(t,n,e)=>{var r=e(39789);t.exports=function(t,n,e){if(!isFinite(r.uintOrNaN(e)))return{};for(var i=r.transactionBytes([],n),o=0,s=[],u=r.sumOrNaN(n),c=r.dustThreshold({},e),a=0;a<t.length;++a){var f=t[a],m=r.inputBytes(f),d=e*(i+m),p=r.uintOrNaN(f.value);if(!(o+p>u+d+c||(i+=m,o+=p,s.push(f),o<u+d)))return r.finalize(s,n,e)}return{fee:e*i}}},92213:(t,n,e)=>{var r=e(3030),i=e(37037),o=e(39789);function s(t,n){return t.value-n*o.inputBytes(t)}t.exports=function(t,n,e){t=t.concat().sort((function(t,n){return s(n,e)-s(t,e)}));var o=i(t,n,e);return o.inputs?o:r(t,n,e)}},39789:t=>{var n=41,e=107,r=9,i=25;function o(t){return n+(t.script?t.script.length:e)}function s(t){return r+(t.script?t.script.length:i)}function u(t,n){return o({})*n}function c(t,n){return 10+t.reduce((function(t,n){return t+o(n)}),0)+n.reduce((function(t,n){return t+s(n)}),0)}function a(t){return"number"!=typeof t?NaN:isFinite(t)?Math.floor(t)!==t||t<0?NaN:t:NaN}function f(t){return t.reduce((function(t,n){return t+a(n.value)}),0)}var m=s({});t.exports={dustThreshold:u,finalize:function(t,n,e){var r=c(t,n),i=e*(r+m),o=f(t)-(f(n)+i);o>u(0,e)&&(n=n.concat({value:o}));var s=f(t)-f(n);return isFinite(s)?{inputs:t,outputs:n,fee:s}:{fee:e*r}},inputBytes:o,outputBytes:s,sumOrNaN:f,sumForgiving:function(t){return t.reduce((function(t,n){return t+(isFinite(n.value)?n.value:0)}),0)},transactionBytes:c,uintOrNaN:a}}}]);
//# debugId=91520f99-335a-5239-8e82-fe367aa04d18
