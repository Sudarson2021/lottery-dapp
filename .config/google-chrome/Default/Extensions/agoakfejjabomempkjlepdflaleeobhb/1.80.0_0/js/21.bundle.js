
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f311202b-9cd3-5fc6-9045-3f3c96660e2e")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[21],{5507:(e,t)=>{"use strict";function n(e){if(Array.isArray(e)){const t=[];let r=0;for(let o=0;o<e.length;o++){const a=n(e[o]);t.push(a),r+=a.length}return h(a(r,192),...t)}const t=w(e);return 1===t.length&&t[0]<128?t:h(a(t.length,128),t)}function r(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function o(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(c(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const n=m(e),r=m(t+55+n.length/2);return Uint8Array.from(u(r+n))}function i(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const n=s(w(e));if(t)return n;if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}function s(e){let t,n,a,i,l;const c=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,a=128===d?Uint8Array.from([]):r(e,1,t),2===t&&a[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:a,remainder:e.slice(t)}}if(d<=191){if(n=d-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(t=o(r(e,1,n)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return a=r(e,n,t+n),{data:a,remainder:e.slice(t+n)}}if(d<=247){for(t=d-191,i=r(e,1,t);i.length;)l=s(i),c.push(l.data),i=l.remainder;return{data:c,remainder:e.slice(t)}}{if(n=d-246,t=o(r(e,1,n)),t<56)throw new Error("invalid RLP: encoded list too short");const a=n+t;if(a>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=r(e,n,a);i.length;)l=s(i),c.push(l.data),i=l.remainder;return{data:c,remainder:e.slice(a)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.RLP=t.utils=t.decode=t.encode=void 0,t.encode=n,t.decode=i;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function c(e){let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function u(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=d(e.slice(r,r+2))}return t}function h(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}function p(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function f(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function w(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return f(e)?u((t="string"!=typeof(n=e)?n:f(n)?n.slice(2):n).length%2?`0${t}`:t):p(e);var t,n;if("number"==typeof e||"bigint"==typeof e)return e?u(m(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.utils={bytesToHex:c,concatBytes:h,hexToBytes:u,utf8ToBytes:p},t.RLP={encode:n,decode:i}},8280:(e,t,n)=>{"use strict";n.d(t,{Nj:()=>o,PD:()=>a,hB:()=>s});var r=n(81254);r.TransactionStatus.BLOCKED,r.TransactionStatus.CANCELLED,r.TransactionStatus.CANCELLING,r.TransactionStatus.TIMEOUT,r.TransactionStatus.FAILED,r.TransactionStatus.REJECTED;const o="FireblocksBtcAccessError:";let a=function(e){return e[e.VaultAccountNotFound=0]="VaultAccountNotFound",e[e.BTCAddressNotFound=1]="BTCAddressNotFound",e[e.InvalidSecretKey=2]="InvalidSecretKey",e[e.WrongAccountType=3]="WrongAccountType",e[e.SecretsNotConfigured=4]="SecretsNotConfigured",e}({});class i extends Error{constructor(e){super(`${o}${e}`),this.code=e}}let s=function(e){return e.Failed="fireblocks-tx-failed",e.Blocked="fireblocks-tx-blocked",e.Cancelled="fireblocks-tx-cancelled",e.Rejected="fireblocks-tx-rejected",e.Timeout="fireblocks-tx-timeout",e.Unknown="fireblocks-tx-unknown-error",e}({})},55045:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});let r=function(e){return e.ExistingSeedphrase="existing-seedphrase",e}({})},42019:(e,t,n)=>{"use strict";n.d(t,{f:()=>u});var r=n(67294),o=n(26793),a=n(79826),i=n(8280),s=n(66589),l=n(52721),c=n(32173),d=n(55045);const u=()=>{const{t:e}=(0,o.$)(),t=(0,r.useMemo)((()=>{const t=e("Please refer to Active Transfers list in your Fireblocks Console for a detailed explanation.");return{[i.hB.Blocked]:{title:e("Transaction has been blocked"),hint:t},[i.hB.Failed]:{title:e("Transaction has failed"),hint:t},[i.hB.Rejected]:{title:e("Transaction has been rejected"),hint:t},[i.hB.Cancelled]:{title:e("Transaction has been cancelled"),hint:t},[i.hB.Timeout]:{title:e("Transaction timed out"),hint:t},[i.hB.Unknown]:{title:e("Unknown transaction error"),hint:e("Please try again later or contact support.")}}}),[e]),n=(0,r.useMemo)((()=>({[a.errorCodes.rpc.internal]:{title:e("Internal error")},[a.errorCodes.rpc.transactionRejected]:{title:e("Transaction rejected")},[a.errorCodes.rpc.invalidRequest]:{title:e("Invalid request")},[a.errorCodes.rpc.invalidParams]:{title:e("Invalid params")},[a.errorCodes.rpc.limitExceeded]:{title:e("Limit exceeded")},[a.errorCodes.rpc.resourceUnavailable]:{title:e("Resource unavailable")},[a.errorCodes.provider.disconnected]:{title:e("Disconnected")},[a.errorCodes.provider.unauthorized]:{title:e("Unauthorized")},[a.errorCodes.provider.userRejectedRequest]:{title:e("User rejected the request")}})),[e]),u=(0,r.useMemo)((()=>({[l.fY.AmountLessThanFee]:{title:e("Amount is too low"),hint:e("The amount cannot be lower than the bridging fee")},[l.fY.InvalidFee]:{title:e("The bridging fee is unknown")},[l.fY.UnknownAsset]:{title:e("This asset cannot be bridged")},[l.fY.UnsupportedNetwork]:{title:e("Unsupported network")}})),[e]),h=(0,r.useMemo)((()=>({[s.w8.Unknown]:{title:e("Unknown error")},[s.w8.UserRejected]:{title:e("User declined the transaction")},[s.w8.NetworkError]:{title:e("Network error"),hint:e("Please try again")},[s.w8.NoActiveAccount]:{title:e("No account is active"),hint:e("Please try again")},[s.w8.NoActiveNetwork]:{title:e("No active network"),hint:e("Please try again")},[s.w8.UnknownNetwork]:{title:e("Unknown network")},[s.w8.UnknownNetworkFee]:{title:e("Unknown network fee")},[s.w8.RequestTimeout]:{title:e("Request timed out"),hint:e("This is taking longer than expected. Please try again later.")}})),[e]),p=(0,r.useMemo)((()=>({[s.v3.InsufficientFunds]:{title:e("Insufficient funds"),hint:e("You do not have enough funds to cover the network fees.")}})),[e]),m=(0,r.useMemo)((()=>({[c.z.InvalidPassword]:{title:e("Invalid password. Please try again.")},[c.z.InvalidVersion]:{title:e("Unsupported Version"),hint:e("Only keystore files exported from the Avalanche Wallet are supported.")},[c.z.NoNewWallets]:{title:e("No New Wallets Found"),hint:e("All keys contained in this file are already imported.")},[c.z.Unknown]:{title:e("File Upload Failed"),hint:e("Please contact our support team to resolve this issue.")}})),[e]),f=(0,r.useMemo)((()=>({[d.j.ExistingSeedphrase]:{title:e("This seed phrase is already imported.")}})),[e]),w=(0,r.useMemo)((()=>({...t,...u,...h,...n,...m,...f,...p})),[t,u,h,n,m,f,p]);return(0,r.useCallback)((e=>{if("string"==typeof e)return w[e]??{title:e};let t=w[s.w8.Unknown];return(0,s.$A)(e)?t=w[e.data.reason]??w[s.w8.Unknown]:"object"!=typeof e||null===e||!("code"in e)||"number"!=typeof e.code&&"string"!=typeof e.code||(t=w[e.code]),t??w[s.w8.Unknown]}),[w])}},1627:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var r=n(67294);const o=e=>({onKeyDown:(0,r.useCallback)((async t=>{const n=e[t.key];"function"==typeof n&&(t.preventDefault(),await n())}),[e])})},47539:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AddWalletWithLedger:()=>I});var r=n(2734),o=n(68483),a=n(70582),i=n(1336),s=n(26793),l=n(67294),c=n(58866),d=n(88828),u=n(5122),h=n(36553),p=n(46935),m=n(69518);const f=()=>{const{request:e}=(0,m.K)(),[t,n]=(0,l.useState)(!1);return{isImporting:t,importLedger:(0,l.useCallback)((async t=>{n(!0);try{return await e({method:p.a.WALLET_IMPORT_LEDGER,params:[t]})}finally{n(!1)}}),[e])}};var w=n(27726),g=n(33050),y=n(27641),k=n(48740),b=n(42019),E=n(78888),x=n(94277),v=n(247),C=n(67294),T=function(e){return e[e.Import=0]="Import",e[e.Name=1]="Name",e[e.Troubleshoot=2]="Troubleshoot",e[e.Completed=3]="Completed",e}(T||{});function I(){const e=(0,r.Z)(),{t}=(0,s.$)(),{capture:n}=(0,y.O)(),p=(0,b.f)(),[m,I]=(0,l.useState)(""),[A,N]=(0,l.useState)(""),[S,L]=(0,l.useState)(),{isImporting:P,importLedger:U}=f(),[j,q]=(0,l.useState)(T.Import),[B,K]=(0,l.useState)(!1),[R,z]=(0,l.useState)(u.Pj.BIP44),{popDeviceSelection:F}=(0,E.wy)();(0,l.useEffect)((()=>{F()}),[]);const W=()=>C.createElement(o.zxk,{variant:"text",onClick:()=>{window.open("https://www.ledger.com/ledger-live","_blank","noreferrer")}},C.createElement(o.h0n,{size:16,sx:{color:"secondary.main"}}),C.createElement(o.ZT$,{variant:"caption",sx:{ml:1,color:"secondary.main"}},t("Ledger Live Support"))),Z=(0,l.useCallback)((async e=>{try{n("LedgerImportStarted"),await U({xpub:m,xpubXP:A,pubKeys:S,name:e,secretType:R===u.Pj.BIP44?h.Y.Ledger:h.Y.LedgerLive}),n("SeedphraseImportSuccess"),q(T.Completed)}catch(e){n("LedgerImportFailure"),(0,k.Z)(e,k.p.WALLET_IMPORT);const{title:t}=p(e);a.ZP.error(t)}}),[n,p,U,R,S,m,A]),M=()=>C.createElement(o.rjZ,{container:!0,spacing:2},C.createElement(o.rjZ,{item:!0,xs:6,md:6,sx:{px:20}},C.createElement(o.Kqy,{sx:{height:724,width:550,justifyContent:"space-between",pt:10,pl:15}},C.createElement(o.Kqy,{sx:{pt:15,justifyContent:"center"}},C.createElement(o.ZT$,{variant:"h2"},"The best way to connect to crypto"),C.createElement(o.ZT$,{variant:"h2",sx:{color:"secondary.main"}},"Core Extension")),C.createElement(o.Kqy,{sx:{p:10,justifyContent:"center"}},C.createElement(o.zxk,{sx:{width:300}},t("Next"))))),C.createElement(o.rjZ,{item:!0,xs:6,md:6,sx:{backgroundColor:"background.paper"}},C.createElement(v.Z,null)));return C.createElement(C.Fragment,null,C.createElement(M,null),C.createElement(x.a,{isBackgroundFilled:!1},j===T.Completed&&C.createElement(o.Kqy,{sx:{width:393,height:386,textAlign:"center",justifyContent:"space-between",backgroundColor:"background.paper",borderRadius:1,px:2,py:4}},C.createElement(o.Kqy,{sx:{height:140,justifyContent:"space-between",alignItems:"center"}},C.createElement(o.nQG,{size:32}),C.createElement(o.ZT$,{variant:"h3"},t("Wallet Added Successfully"))),C.createElement(o.Kqy,{sx:{height:124,justifyContent:"space-between",alignItems:"center"}},C.createElement(o.ZT$,{variant:"body2",sx:{color:"text.secondary"}},t("Please close this tab and open the Core Browser Extension to see the newly imported wallet.")),C.createElement(o.zxk,{onClick:window.close,sx:{width:"50%"}},t("Close")))),j===T.Troubleshoot&&C.createElement(o.Kqy,{sx:{height:724,width:432,borderRadius:1,justifyContent:"space-between",backgroundColor:"background.paper"}},C.createElement(o.Kqy,{justifyContent:"space-between",sx:{height:"100%"}},C.createElement(o.Kqy,{alignItems:"flex-start",sx:{mt:2.5,mb:.5}},C.createElement(i.V,{onBackClick:()=>q(T.Import)},t("Trouble Connecting")),C.createElement(o.Kqy,{sx:{px:2}},C.createElement(g.D,{fontVariant:g.s.large}))),C.createElement(o.Kqy,{sx:{p:2}},C.createElement(o.zxk,{onClick:()=>q(T.Import)},t("Back")),C.createElement(W,null)))),j===T.Name&&C.createElement(o.Kqy,{sx:{height:724,width:432,borderRadius:1,justifyContent:"space-between",backgroundColor:"background.paper"}},C.createElement(o.Kqy,{justifyContent:"space-between",sx:{height:"100%",width:"100%"}},C.createElement(d.s,{isImporting:P,onSave:Z,onBackClick:()=>q(T.Import),backgroundColor:e.palette.background.default}))),j===T.Import&&C.createElement(o.Kqy,{sx:{height:724,width:432,borderRadius:1,justifyContent:"space-between",backgroundColor:"background.paper"}},C.createElement(o.Kqy,{justifyContent:"space-between",sx:{height:"100%",pt:1}},C.createElement(o.Kqy,null,C.createElement(o.Kqy,{direction:"row",alignItems:"flex-start",sx:{mb:1}},C.createElement(i.V,{showBackButton:!1},t("Add Wallet with Ledger"))),C.createElement(w.Q,{onSuccess:async function(e){I(e.xpub),N(e.xpubXP),L(e.publicKeys),K(e.hasPublicKeys),z(e.pathSpec)},onTroubleshoot:()=>q(T.Troubleshoot)})),C.createElement(o.Kqy,{sx:{p:2,mb:2,rowGap:1}},C.createElement(o.zxk,{disabled:!B,onClick:()=>q(T.Name)},t("Next")),C.createElement(W,null))))),C.createElement(c.w,null))}},88828:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(87462),o=n(67294),a=n(26793),i=n(2734),s=n(68483),l=n(1336),c=n(1627),d=n(67294);function u({isImporting:e,onSave:t,onBackClick:n,backgroundColor:u}){const h=(0,i.Z)(),{t:p}=(0,a.$)(),[m,f]=(0,o.useState)(""),w=(0,o.useCallback)((()=>{t(m)}),[m,t]),g=(0,c.a)({Enter:w,Esc:n});return d.createElement(s.Kqy,{sx:{width:"100%",height:"100%",background:u??h.palette.background.paper}},d.createElement(s.Kqy,{direction:"row",sx:{mt:2.5,mb:.5,pr:1}},d.createElement(l.V,{onBackClick:n},p("Name your Wallet"))),d.createElement(s.Kqy,{sx:{px:2,pt:1,flexGrow:1,gap:3}},d.createElement(s.nvn,(0,r.Z)({autoFocus:!0,"data-testid":"wallet-name-input",fullWidth:!0,label:p("Wallet Name"),inputLabelProps:{sx:{transform:"none",fontSize:"body2.fontSize",mb:1}},onChange:e=>f(e.target.value),value:m,placeholder:p("My New Wallet")},g))),d.createElement(s.Kqy,{sx:{py:3,px:2,gap:1,width:1}},d.createElement(s.zxk,{fullWidth:!0,disabled:!m||e,isLoading:e,size:"large","data-testid":"save-wallet-name",onClick:w},p("Save")),d.createElement(s.zxk,{variant:"text",fullWidth:!0,disabled:e,size:"large","data-testid":"skip-wallet-name",onClick:()=>t()},p("Skip"))))}},32173:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});let r=function(e){return e.InvalidPassword="keystore-invalid-password",e.InvalidVersion="keystore-invalid-version",e.NoNewWallets="keystore-no-new-wallets",e.Unknown="keystore-unknown-error",e}({})},35883:()=>{}}]);
//# debugId=f311202b-9cd3-5fc6-9045-3f3c96660e2e
