"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="68e4ef26-7576-5601-810f-fba8fa0ad348")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[5141],{14005:(e,t,a)=>{a.d(t,{p:()=>l});var n=a(68483),r=a(67294);const l=({label:e,tooltip:t})=>r.createElement(n.Kqy,{sx:{flexDirection:"row",alignItems:"center",gap:1}},r.createElement(n.ZT$,{variant:"body2",sx:{fontWeight:"semibold"}},e),t&&r.createElement(n.ua7,{title:t},r.createElement(n.uMt,{size:16})))},45141:(e,t,a)=>{a.r(t),a.d(t,{EditNetwork:()=>p});var n=a(67294),r=a(47886),l=a(26793),o=a(70582),s=a(68483),c=a(1336),i=a(27641),d=a(43023),u=a(68604),m=a(69980),E=a(67294);const p=()=>{const{t:e}=(0,l.$)(),t=(0,r.k6)(),{networkId:a}=(0,r.UO)(),p=parseInt(a,10),{networks:R,isCustomNetwork:h,saveCustomNetwork:k,updateDefaultNetwork:C}=(0,d.g)(),[g,y]=(0,n.useState)(!0),[w,x]=(0,n.useState)(""),N=(0,n.useRef)(null),{capture:I}=(0,i.O)(),_=(0,n.useRef)(null),[b,v]=(0,n.useState)(),[O,f]=(0,n.useState)(!1),[P,U]=(0,n.useState)(!1),[T,L]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=R.find((e=>e.chainId===p));v(e)}),[R,v,p]);const D=(0,n.useCallback)((()=>{t.length<=2?t.replace(`/networks/details/${a}`):t.goBack()}),[t,a]),A=b&&h(b.chainId),S=(0,n.useCallback)((()=>{I("DefaultNetworkRPCEdited"),o.ZP.success(e("RPC URL Updated!"),{duration:2e3}),x("")}),[I,e]),H=(0,n.useCallback)((()=>{I("DefaultNetworkRPCReset"),o.ZP.success(e("RPC URL Reset!"),{duration:2e3}),x("")}),[I,e]),z=e=>{x(e),N?.current?.scrollToTop()},K=(0,n.useCallback)((()=>{if(!b)return;const{rpcUrl:e,...t}=b;C(t).then((()=>{D(),H()})).catch((e=>{Z(),z(e)})).finally((()=>{L(!1)}))}),[D,b,H,C]),q=(0,n.useCallback)((t=>{b&&(L(!0),C({...b,customRpcHeaders:t}).then((()=>{D(),o.ZP.success(e("RPC Headers Updated"),{duration:2e3}),x("")})).catch(z).finally((()=>{L(!1)})))}),[D,b,e,C]),Z=()=>{f(!1),U(!1)},$=(0,n.useCallback)((e=>{if(b)switch(L(!0),e){case m.y.RESET_RPC_URL_DIALOG:K();break;case m.y.UPDATE_RPC_URL_DIALOG:C(b).then((()=>{D(),S()})).catch((e=>{Z(),z(e)}));break;default:return null}}),[D,b,S,K,C]);return b?E.createElement(s.Kqy,{sx:{width:1}},E.createElement(c.V,null,e("Edit Network")),E.createElement(s.Kqy,{sx:{px:2,flexGrow:1}},E.createElement(s.$B7,{ref:N},E.createElement(s.Kqy,{sx:{width:1,gap:3,mt:1,alignItems:"center"}},w&&E.createElement(s.ZT$,{variant:"body2",color:"error.main"},w),b&&E.createElement(u.I,{customNetwork:b,handleChange:(e,t)=>{y(t),v({...e})},handleRpcHeadersChange:q,action:u.p.Edit,isCustomNetwork:A,handleResetUrl:()=>{f(!0)},ref:_})))),E.createElement(s.Kqy,{direction:"row",sx:{px:2,py:3,alignItems:"center",gap:1}},E.createElement(s.zxk,{fullWidth:!0,size:"large",color:"secondary",onClick:D},e("Cancel")),E.createElement(s.zxk,{fullWidth:!0,size:"large",onClick:()=>{A?(L(!0),k(b).then((()=>{I("CustomNetworkEdited"),o.ZP.success(e("Custom Network Edited!"),{duration:2e3}),x(""),D()})).catch(z).finally((()=>{L(!1)}))):U(!0)},disabled:!g||T,isLoading:T},e("Save"))),E.createElement(m._,{isPrimaryButtonLoading:T,isResetRpcUrl:O,isUpdateRpcUrl:P,handlePrimaryClick:$,hideDialog:()=>Z()})):null}},69980:(e,t,a)=>{a.d(t,{_:()=>c,y:()=>s});var n=a(68483),r=a(21376),l=a(26793),o=a(67294);let s=function(e){return e.DELETE_DIALOG="deleteDialog",e.RESET_RPC_URL_DIALOG="resetRpcUrlDialog",e.UPDATE_RPC_URL_DIALOG="updateRpcUrlDialog",e}({});const c=({isDelete:e,isResetRpcUrl:t,isUpdateRpcUrl:a,isPrimaryButtonLoading:c,handlePrimaryClick:i,hideDialog:d})=>{const{t:u}=(0,l.$)(),m=(e,t,a,r,l)=>o.createElement(n.Kqy,{sx:{justifyContent:"center",width:"100%"}},o.createElement(n.ZT$,{variant:"h5",sx:{textAlign:"center"}},e),o.createElement(n.ZT$,{variant:"body2",sx:{textAlign:"center",mt:1}},t),o.createElement(n.Kqy,{sx:{mt:3}},o.createElement(n.zxk,{sx:{mb:1},onClick:()=>{i(a)},disabled:c,isLoading:c},r),o.createElement(n.zxk,{variant:"text",onClick:()=>d()},l)));return o.createElement(o.Fragment,null,e&&o.createElement(r.Z,{open:e,onClose:d,content:m(u("Delete Network?"),u("Are you sure you want to delete this network?"),s.DELETE_DIALOG,u("Delete"),u("Cancel")),bgColorDefault:!0}),t&&o.createElement(r.Z,{open:t,onClose:d,content:m(u("Reset RPC?"),u("Resetting the RPC URL will put it back to it's default URL."),s.RESET_RPC_URL_DIALOG,u("Reset Url"),u("Back")),bgColorDefault:!0}),a&&o.createElement(r.Z,{open:a,onClose:d,content:m(u("Warning"),u("Core functionality may be unstable with custom RPC URLs."),s.UPDATE_RPC_URL_DIALOG,u("Confirm Save"),u("Back")),bgColorDefault:!0}))}},68604:(e,t,a)=>{a.d(t,{I:()=>y,p:()=>C});var n=a(67294),r=a(26793),l=a(90948),o=a(68483),s=a(43023),c=a(14005),i=a(30186),d=a(62440),u=a(96486);const m=(e,t)=>{try{return new Headers({[e]:t}),!0}catch{return!1}};var E=a(67294);const p=({isReadOnly:e,rpcHeaders:t,setRpcHeaders:a})=>{const{t:l}=(0,r.$)(),s=(0,n.useCallback)(((e,{newName:t,newValue:n})=>{a?.((a=>Object.fromEntries(Object.entries(a).map((([a,r],l)=>l===e?[t??a,n??r]:[a,r])))))}),[a]);return E.createElement(o.Kqy,{sx:{width:1}},Object.entries(t).map((([t,n],r)=>E.createElement(o.Q5I,{in:!0,key:`rpc-header-${r}`},E.createElement(o.Kqy,{direction:"row",sx:{gap:.5,mb:1}},E.createElement(o.nvn,{size:"small",value:t,InputProps:{readOnly:e},placeholder:l("Header Name"),onChange:e=>{e.target.value&&!m(e.target.value,n)||s(r,{newName:e.target.value})}}),E.createElement(o.nvn,{size:"small",value:n,InputProps:{readOnly:e},placeholder:l("Value"),onChange:e=>{m(t,e.target.value)&&s(r,{newValue:e.target.value})}}),!e&&E.createElement(o.hU,{disabled:""===t,onClick:()=>a?.((e=>1===Object.keys(e).length?i.F1:(0,u.omit)(e,t)))},E.createElement(o.XHJ,null)))))))};var R=a(67294);const h=({isReadOnly:e,network:t,onChange:a})=>{const{t:l}=(0,r.$)(),[s,c]=(0,n.useState)(t.customRpcHeaders??i.F1),[m,E]=(0,n.useState)(!1),h=Object.keys(t.customRpcHeaders??{}).length>0,k=""in s,C=JSON.stringify(t.customRpcHeaders??i.F1)!==JSON.stringify(s);return R.createElement(R.Fragment,null,h&&R.createElement(R.Fragment,null,R.createElement(p,{rpcHeaders:s,isReadOnly:!0}),!e&&R.createElement(o.zxk,{variant:"text",onClick:()=>E(!0)},l("Edit Custom RPC Headers"))),!h&&(e?R.createElement(o.ZT$,{variant:"body2",color:"text.secondary",sx:{display:"flex"}},l("No custom headers are configured.")):R.createElement(o.ZT$,{variant:"body2",color:"text.secondary",sx:{display:"flex"}},R.createElement(d.c,{i18nKey:"No custom headers are configured. <button>Edit</button>",components:{button:R.createElement(o.zxk,{variant:"text",onClick:()=>E(!0),sx:{p:0}})}}))),!e&&m&&R.createElement(o.VqE,{open:m,PaperProps:{sx:{mx:2}}},R.createElement(o.$N8,{sx:{px:2}},l("Custom RPC Headers")),R.createElement(o.cZJ,{sx:{pl:2,pr:1}},R.createElement(p,{isReadOnly:!1,rpcHeaders:s,setRpcHeaders:c}),R.createElement(o.Kqy,{sx:{pr:5,width:1}},R.createElement(o.zxk,{variant:"text",fullWidth:!0,size:"small",onClick:()=>c((e=>({...e,"":""}))),disabled:k},l("Add Next")))),R.createElement(o.Kqy,{direction:"row",sx:{flexDirection:"row",gap:1,px:2,pb:3,pt:4,alignItems:"center"}},R.createElement(o.zxk,{key:"cancel",color:"secondary",onClick:()=>{c(t.customRpcHeaders??i.F1),E(!1)},fullWidth:!0},l("Cancel")),R.createElement(o.zxk,{key:"save",disabled:!C,onClick:()=>{a?.((0,u.omit)(s,"")),E(!1)},fullWidth:!0},l("Save")))))};var k=a(67294);let C=function(e){return e.Add="add",e.Edit="edit",e}({});const g=(0,l.ZP)(o.Kqy)`
  position: relative;
  overflow: hidden;
  width: 100%;
  gap: 4px;
  min-height: 92px;
`,y=(0,n.forwardRef)((({customNetwork:e,handleChange:t,handleRpcHeadersChange:a,readOnly:l=!1,showErrors:i=!1,action:d,isCustomNetwork:u=!1,handleResetUrl:m},E)=>{const{t:p}=(0,r.$)(),{isChainIdExist:R}=(0,s.g)(),[y,w]=(0,n.useState)(),[x,N]=(0,n.useState)(),[I,_]=(0,n.useState)(),[b,v]=(0,n.useState)(),[O,f]=(0,n.useState)(),[P,U]=(0,n.useState)();(0,n.useImperativeHandle)(E,(()=>({resetFormErrors:D})),[]);const T={RPC_ERROR:p("RPC required"),CHAIN_NAME_ERROR:p("Network Name is required"),CHAIN_ID_ERROR:p("Chain ID is required"),TOKEN_SYMBOL_ERROR:p("Network Token Symbol is required"),CHAIN_ID_EXISTS:p("This Chain ID has been added already"),INVALID_URL:p("This URL is invalid"),TOKEN_NAME_ERROR:p("Network Token Name is required")},L=(0,n.useCallback)((e=>{let t=!0;return e.rpcUrl||(w(T.RPC_ERROR),t=!1),e.rpcUrl&&!(e=>{let t;try{t=new URL(e)}catch(e){return!1}if("https:"===t.protocol||"ipfs:"===t.protocol||"http:"===t.protocol)return!0})(e.rpcUrl)&&(w(T.INVALID_URL),t=!1),e.chainName||(N(T.CHAIN_NAME_ERROR),t=!1),e.chainId&&0!==e.chainId||(_(T.CHAIN_ID_ERROR),t=!1),d===C.Add&&R(e.chainId)&&(_(T.CHAIN_ID_EXISTS),t=!1),e.networkToken.symbol||(v(T.TOKEN_SYMBOL_ERROR),t=!1),e.networkToken.name||(U(T.TOKEN_NAME_ERROR),t=!1),t}),[T.CHAIN_ID_ERROR,T.CHAIN_ID_EXISTS,T.CHAIN_NAME_ERROR,T.INVALID_URL,T.RPC_ERROR,T.TOKEN_NAME_ERROR,T.TOKEN_SYMBOL_ERROR,d,R]);(0,n.useEffect)((()=>{i&&L(e)}),[i,e,L]);const D=()=>{w(""),N(""),_(""),v(""),f(""),U("")},A=e=>{D(),t?.(e,L(e))},S=m&&!u;return k.createElement(o.Kqy,{sx:{width:1}},k.createElement(g,null,k.createElement(c.p,{label:p("Network RPC URL")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,rpcUrl:t.target.value})},"data-testid":"network-rpc-url",value:e.rpcUrl,placeholder:"http(s)://URL",InputProps:{readOnly:l,fullWidth:!0,endAdornment:S?k.createElement(o.oGm,{position:"end"},k.createElement(o.zxk,{variant:"text",size:"small",onClick:m},p("Reset"))):null},error:!!y,helperText:y})),k.createElement(g,null,k.createElement(c.p,{label:p("Network Name")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,chainName:t.target.value})},"data-testid":"network-name",value:e.chainName,placeholder:p("Enter Name"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit},error:!!x,helperText:x})),k.createElement(g,null,k.createElement(c.p,{label:p("Chain ID")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,chainId:parseInt(t.target.value)})},disabled:d===C.Edit,"data-testid":"chain-id",value:isNaN(e.chainId)?"":e.chainId,placeholder:p("Enter Chain ID"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit},type:"number",error:!!I,helperText:I})),k.createElement(g,null,k.createElement(c.p,{label:p("Network Token Symbol")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,networkToken:{...e.networkToken,symbol:t.target.value}})},"data-testid":"network-token-symbol",value:e.networkToken.symbol,placeholder:p("Enter Token Symbol"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit},error:!!b,helperText:b})),k.createElement(g,null,k.createElement(c.p,{label:p("Network Token Name")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,networkToken:{...e.networkToken,name:t.target.value}})},"data-testid":"network-token-name",value:e.networkToken.name,placeholder:p("Enter Token"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit},error:!!P,helperText:P})),k.createElement(g,null,k.createElement(c.p,{label:p("Explorer URL (Optional)")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,explorerUrl:t.target.value})},"data-testid":"explorer-url",value:e.explorerUrl,placeholder:p("Enter URL"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit},error:!!O,helperText:O})),k.createElement(g,null,k.createElement(c.p,{label:p("Logo URL (Optional)")}),k.createElement(o.nvn,{size:"small",onChange:t=>{t.stopPropagation(),A({...e,logoUri:t.target.value})},"data-testid":"logo-url",value:e.logoUri,placeholder:p("Enter URL"),fullWidth:!0,InputProps:{readOnly:l||!u&&d===C.Edit}})),k.createElement(g,null,k.createElement(c.p,{label:p("Custom RPC Headers")}),k.createElement(h,{isReadOnly:l,network:e,onChange:a})))}));y.displayName="NetworkForm"}}]);
//# debugId=68e4ef26-7576-5601-810f-fba8fa0ad348
