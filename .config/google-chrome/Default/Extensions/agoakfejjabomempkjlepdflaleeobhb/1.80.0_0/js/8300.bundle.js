
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="452829ef-5f08-5cee-8972-1c003d9ca193")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[8300],{8280:(e,t,n)=>{"use strict";n.d(t,{Nj:()=>a,PD:()=>s,hB:()=>i});var r=n(81254);r.TransactionStatus.BLOCKED,r.TransactionStatus.CANCELLED,r.TransactionStatus.CANCELLING,r.TransactionStatus.TIMEOUT,r.TransactionStatus.FAILED,r.TransactionStatus.REJECTED;const a="FireblocksBtcAccessError:";let s=function(e){return e[e.VaultAccountNotFound=0]="VaultAccountNotFound",e[e.BTCAddressNotFound=1]="BTCAddressNotFound",e[e.InvalidSecretKey=2]="InvalidSecretKey",e[e.WrongAccountType=3]="WrongAccountType",e[e.SecretsNotConfigured=4]="SecretsNotConfigured",e}({});class o extends Error{constructor(e){super(`${a}${e}`),this.code=e}}let i=function(e){return e.Failed="fireblocks-tx-failed",e.Blocked="fireblocks-tx-blocked",e.Cancelled="fireblocks-tx-cancelled",e.Rejected="fireblocks-tx-rejected",e.Timeout="fireblocks-tx-timeout",e.Unknown="fireblocks-tx-unknown-error",e}({})},55045:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});let r=function(e){return e.ExistingSeedphrase="existing-seedphrase",e}({})},23762:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var r=n(68483),a=n(94277),s=n(67294);function o(){return s.createElement(a.a,null,s.createElement(r.D8x,null))}},42019:(e,t,n)=>{"use strict";n.d(t,{f:()=>d});var r=n(67294),a=n(26793),s=n(79826),o=n(8280),i=n(66589),c=n(52721),l=n(32173),u=n(55045);const d=()=>{const{t:e}=(0,a.$)(),t=(0,r.useMemo)((()=>{const t=e("Please refer to Active Transfers list in your Fireblocks Console for a detailed explanation.");return{[o.hB.Blocked]:{title:e("Transaction has been blocked"),hint:t},[o.hB.Failed]:{title:e("Transaction has failed"),hint:t},[o.hB.Rejected]:{title:e("Transaction has been rejected"),hint:t},[o.hB.Cancelled]:{title:e("Transaction has been cancelled"),hint:t},[o.hB.Timeout]:{title:e("Transaction timed out"),hint:t},[o.hB.Unknown]:{title:e("Unknown transaction error"),hint:e("Please try again later or contact support.")}}}),[e]),n=(0,r.useMemo)((()=>({[s.errorCodes.rpc.internal]:{title:e("Internal error")},[s.errorCodes.rpc.transactionRejected]:{title:e("Transaction rejected")},[s.errorCodes.rpc.invalidRequest]:{title:e("Invalid request")},[s.errorCodes.rpc.invalidParams]:{title:e("Invalid params")},[s.errorCodes.rpc.limitExceeded]:{title:e("Limit exceeded")},[s.errorCodes.rpc.resourceUnavailable]:{title:e("Resource unavailable")},[s.errorCodes.provider.disconnected]:{title:e("Disconnected")},[s.errorCodes.provider.unauthorized]:{title:e("Unauthorized")},[s.errorCodes.provider.userRejectedRequest]:{title:e("User rejected the request")}})),[e]),d=(0,r.useMemo)((()=>({[c.fY.AmountLessThanFee]:{title:e("Amount is too low"),hint:e("The amount cannot be lower than the bridging fee")},[c.fY.InvalidFee]:{title:e("The bridging fee is unknown")},[c.fY.UnknownAsset]:{title:e("This asset cannot be bridged")},[c.fY.UnsupportedNetwork]:{title:e("Unsupported network")}})),[e]),m=(0,r.useMemo)((()=>({[i.w8.Unknown]:{title:e("Unknown error")},[i.w8.UserRejected]:{title:e("User declined the transaction")},[i.w8.NetworkError]:{title:e("Network error"),hint:e("Please try again")},[i.w8.NoActiveAccount]:{title:e("No account is active"),hint:e("Please try again")},[i.w8.NoActiveNetwork]:{title:e("No active network"),hint:e("Please try again")},[i.w8.UnknownNetwork]:{title:e("Unknown network")},[i.w8.UnknownNetworkFee]:{title:e("Unknown network fee")},[i.w8.RequestTimeout]:{title:e("Request timed out"),hint:e("This is taking longer than expected. Please try again later.")}})),[e]),E=(0,r.useMemo)((()=>({[i.v3.InsufficientFunds]:{title:e("Insufficient funds"),hint:e("You do not have enough funds to cover the network fees.")}})),[e]),f=(0,r.useMemo)((()=>({[l.z.InvalidPassword]:{title:e("Invalid password. Please try again.")},[l.z.InvalidVersion]:{title:e("Unsupported Version"),hint:e("Only keystore files exported from the Avalanche Wallet are supported.")},[l.z.NoNewWallets]:{title:e("No New Wallets Found"),hint:e("All keys contained in this file are already imported.")},[l.z.Unknown]:{title:e("File Upload Failed"),hint:e("Please contact our support team to resolve this issue.")}})),[e]),h=(0,r.useMemo)((()=>({[u.j.ExistingSeedphrase]:{title:e("This seed phrase is already imported.")}})),[e]),g=(0,r.useMemo)((()=>({...t,...d,...m,...n,...f,...h,...E})),[t,d,m,n,f,h,E]);return(0,r.useCallback)((e=>{if("string"==typeof e)return g[e]??{title:e};let t=g[i.w8.Unknown];return(0,i.$A)(e)?t=g[e.data.reason]??g[i.w8.Unknown]:"object"!=typeof e||null===e||!("code"in e)||"number"!=typeof e.code&&"string"!=typeof e.code||(t=g[e.code]),t??g[i.w8.Unknown]}),[g])}},69801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Bridge:()=>nt,default:()=>rt});var r=n(87796),a=n(55813),s=n(61832),o=n(27889),i=n(92701),c=n(52219),l=n(84655),u=n(3999),d=n(1336),m=n(27641),E=n(96505),f=n(67294),h=n(47886),g=n(67294);function p({height:e="30px"}){return g.createElement("svg",{width:e,height:e,viewBox:"0 0 1503 1504",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.createElement("rect",{x:"287",y:"258",width:"928",height:"844",fill:"white"}),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1502.5 752C1502.5 1166.77 1166.27 1503 751.5 1503C336.734 1503 0.5 1166.77 0.5 752C0.5 337.234 336.734 1 751.5 1C1166.27 1 1502.5 337.234 1502.5 752ZM538.688 1050.86H392.94C362.314 1050.86 347.186 1050.86 337.962 1044.96C327.999 1038.5 321.911 1027.8 321.173 1015.99C320.619 1005.11 328.184 991.822 343.312 965.255L703.182 330.935C718.495 303.999 726.243 290.531 736.021 285.55C746.537 280.2 759.083 280.2 769.599 285.55C779.377 290.531 787.126 303.999 802.438 330.935L876.42 460.079L876.797 460.738C893.336 489.635 901.723 504.289 905.385 519.669C909.443 536.458 909.443 554.169 905.385 570.958C901.695 586.455 893.393 601.215 876.604 630.549L687.573 964.702L687.084 965.558C670.436 994.693 661.999 1009.46 650.306 1020.6C637.576 1032.78 622.263 1041.63 605.474 1046.62C590.161 1050.86 573.004 1050.86 538.688 1050.86ZM906.75 1050.86H1115.59C1146.4 1050.86 1161.9 1050.86 1171.13 1044.78C1181.09 1038.32 1187.36 1027.43 1187.92 1015.63C1188.45 1005.1 1181.05 992.33 1166.55 967.307C1166.05 966.455 1165.55 965.588 1165.04 964.706L1060.43 785.75L1059.24 783.735C1044.54 758.877 1037.12 746.324 1027.59 741.472C1017.08 736.121 1004.71 736.121 994.199 741.472C984.605 746.453 976.857 759.552 961.544 785.934L857.306 964.891L856.949 965.507C841.69 991.847 834.064 1005.01 834.614 1015.81C835.352 1027.62 841.44 1038.5 851.402 1044.96C860.443 1050.86 875.94 1050.86 906.75 1050.86Z",fill:"#E84142"}))}var T=n(87462),C=n(67294);function b({height:e,...t}){return C.createElement("svg",(0,T.Z)({height:e,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),C.createElement("path",{d:"M31.5021 19.8939C29.3652 28.4654 20.6836 33.6819 12.1111 31.5444C3.54215 29.4075 -1.6743 20.7254 0.463551 12.1546C2.59953 3.58214 11.2811 -1.6347 19.851 0.502212C28.4229 2.63913 33.639 11.3222 31.5018 19.8941L31.502 19.8939H31.5021Z",fill:"#F7931A"}),C.createElement("path",{d:"M23.0573 13.7204C23.3758 11.5912 21.7547 10.4466 19.538 9.68311L20.2571 6.79885L18.5014 6.36137L17.8014 9.16969C17.3398 9.05457 16.8658 8.94609 16.3947 8.83856L17.0998 6.01171L15.3451 5.57422L14.6256 8.45754C14.2437 8.37057 13.8685 8.28462 13.5046 8.19406L13.5066 8.18499L11.0854 7.58037L10.6183 9.45561C10.6183 9.45561 11.9209 9.7542 11.8935 9.77258C12.6045 9.95003 12.733 10.4207 12.7117 10.7937L11.8926 14.0796C11.9415 14.092 12.005 14.11 12.0751 14.1381C12.0165 14.1236 11.9542 14.1077 11.8895 14.0922L10.7414 18.6952C10.6545 18.9112 10.4339 19.2354 9.93685 19.1123C9.95444 19.1378 8.66075 18.7939 8.66075 18.7939L7.78906 20.8036L10.0739 21.3732C10.4989 21.4798 10.9154 21.5913 11.3256 21.6962L10.5991 24.6135L12.3528 25.051L13.0723 22.1646C13.5514 22.2947 14.0163 22.4147 14.4715 22.5278L13.7544 25.4005L15.5102 25.838L16.2367 22.9261C19.2306 23.4927 21.4818 23.2643 22.4293 20.5563C23.1929 18.3761 22.3913 17.1185 20.8162 16.2984C21.9634 16.0339 22.8276 15.2793 23.058 13.7207L23.0574 13.7203L23.0573 13.7204ZM19.0459 19.3455C18.5033 21.5258 14.8324 20.3472 13.6423 20.0517L14.6064 16.1867C15.7965 16.4838 19.613 17.0718 19.046 19.3455H19.0459ZM19.5889 13.6888C19.0939 15.672 16.0386 14.6645 15.0475 14.4174L15.9216 10.9121C16.9127 11.1592 20.1045 11.6203 19.589 13.6888H19.5889Z",fill:"white"}))}const y=new Map([[c.$O.AVALANCHE,"Avalanche C-Chain"],[c.$O.ETHEREUM,"Ethereum"],[c.$O.BITCOIN,"Bitcoin"],[c.$O.UNKNOWN,""]]),w=[c.$O.AVALANCHE,c.$O.ETHEREUM,c.$O.BITCOIN];var A=n(62035),x=n(68483),k=n(32672),v=n(67294);const N=()=>v.createElement(k.T,{width:"16px",height:"16px",src:A.Z,name:c.$O.ETHEREUM});function I({testId:e,disabled:t,selected:n,onSelect:r,chains:a}){const[s,o]=(0,f.useState)(!1),i=(0,f.useRef)(null),l=y.get(n),u=e=>{switch(e){case c.$O.AVALANCHE:return v.createElement(p,{height:"16"});case c.$O.ETHEREUM:return v.createElement(N,null);case c.$O.BITCOIN:return v.createElement(b,{height:"16"});default:return v.createElement(v.Fragment,null)}};function d(e,t){return a.includes(t)?v.createElement(x.sNh,{"data-testid":e,onClick:()=>{(e=>{o(!1),r?.(e)})(t)},disableRipple:!0,sx:{minHeight:"auto",py:1}},v.createElement(x.Kqy,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",width:"100%"}},v.createElement(x.Kqy,{direction:"row",sx:{columnGap:1,alignItems:"center"}},u(t),v.createElement(x.ZT$,{variant:"body2"},y.get(t))),n===t&&v.createElement(x.nQG,{size:16}))):null}return v.createElement(x.Kqy,{sx:{alignItems:"flex-end"}},v.createElement(x.zxk,{variant:"text",disableRipple:!0,"data-testid":e,disabled:t||a.length<=1,onClick:()=>{o(!s)},ref:i,sx:{color:"primary.main",p:0,pb:1,pr:1},endIcon:a.length>1&&(s?v.createElement(x.g8U,null):v.createElement(x.v4q,null))},v.createElement(x.Kqy,{direction:"row",sx:{columnGap:1,justifyContent:"flex-end",alignItems:"center"}},u(n),v.createElement(x.ZT$,{variant:"body2",sx:{transform:"capitalize",fontWeight:"fontWeightSemibold"}},l))),v.createElement(x.v2r,{anchorEl:i.current,open:s,onClose:()=>{o(!1)},PaperProps:{sx:{width:220,backgroundColor:"grey.800",mr:3}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},d("bridge-avax-chain-option",c.$O.AVALANCHE),d("bridge-eth-chain-option",c.$O.ETHEREUM),d("bridge-btc-chain-option",c.$O.BITCOIN)))}var B=n(34223),S=n(12575),O=n(71238),$=n(72795),H=n(59198),L=n(49530),U=n(96663),_=n(46935),R=n(9830),M=n(80179),F=n(69518),D=n(43023),q=n(93302),Z=n.n(q),W=n(17223),j=n(72250);const K=6e4;var G=n(4219),P=n(96486),V=n(739),z=n(45691);const Y=e=>null!==e&&"object"==typeof e&&"destinations"in e;var X=n(26821),J=n(4563),Q=n(93e3),ee=n(85114);function te(e,t){const{featureFlags:n}=(0,X.d)(),{accounts:{active:r}}=(0,R.a)(),{avalancheAssets:s,ethereumAssets:i,currentBlockchain:l}=(0,a.j)(),{transferableAssets:u}=(0,ee.$)(),{getTokenSymbolOnNetwork:d}=(0,o.s)(),m=(0,j._)(!0),E=(0,f.useMemo)((()=>{const a=e===c.$O.AVALANCHE||l===c.$O.AVALANCHE,o=e===c.$O.ETHEREUM||l===c.$O.ETHEREUM;if(!a&&!o)return[];const E=Object.keys(i).filter((e=>"BUSD"!==i[e]?.symbol)).filter((e=>"USDC"!==i[e]?.symbol)).reduce(((e,t)=>(e[t]=i[t],e)),{}),f=Object.values(a?s:E);return f.length?function(e,t){const n=t.reduce(((e,t)=>t.type!==z.iv.ERC20?(e[t.symbol.toLowerCase()]=t,e):(e[t.address.toLowerCase()]=t,e)),{});return e.map((e=>{const t=e.symbol,r=Y(e)?n[e.address?.toLowerCase()??e.symbol]:(0,G.UI)(e)?n[e.symbol.toLowerCase()]:(0,G.Bs)(e)?n[e.wrappedContractAddress.toLowerCase()]:n[e.wrappedContractAddress?.toLowerCase()]||n[e.nativeContractAddress?.toLowerCase()],a=r&&(0,V.N)(r.balance,r.decimals),s=r?.logoUri,o=r?.priceUSD;return{symbol:t,asset:e,balance:a,logoUri:s,price:o}}))}((t?[t]:(0,P.uniqBy)([...u,...f],(t=>Y(t)?t.symbol:d(t.symbol,e)))).filter((t=>{if(e===c.$O.AVALANCHE){if(Y(t))return n[J.yy.BRIDGE_ETH];const{nativeNetwork:e}=t;if(e===c.$O.ETHEREUM&&!n[J.yy.BRIDGE_ETH])return!1;if(e===c.$O.BITCOIN){const e=r?.addressBTC&&r?.type!==Q.Qm.WALLET_CONNECT;return n[J.yy.BRIDGE_BTC]&&e}}return!0})),m).map((t=>({...t,symbolOnNetwork:Y(t.asset)?t.asset.symbol:d(t.symbol,e)}))):[]}),[e,l,t,s,i,m,n,d,r?.type,r?.addressBTC,u]);return{assetsWithBalances:E.sort(((e,t)=>t.balance?.cmp(e.balance||0)||0))}}const ne=e=>{const t=(0,j._)(),{networkFee:n}=(0,W.Y)(),[r,a]=(0,f.useState)(!0);return(0,f.useEffect)((()=>{if(!t||!n||!e)return;const r=t.find((e=>e.type===z.iv.NATIVE));if(!r)return void a(!1);const s=r&&r.balance,o=n.low.maxFee*e;s&&o&&a(new(Z())(s.toString()).gte(o.toString()))}),[t,n,e]),r};var re=n(81637),ae=n(84012);let se=function(e){return e[e.Avalanche=0]="Avalanche",e[e.Unified=1]="Unified",e}({});const oe={};function ie(e){const{currentBlockchain:t,targetBlockchain:n}=(0,a.j)(),{estimateGas:r}=(0,M.e)(),{supportsAsset:o}=(0,ee.$)(),[u,d]=(0,f.useState)(i.HW),[E,h]=(0,f.useState)(oe),g=(0,B.$)(u)||i.HW,p=(0,S.p)(u),{isDeveloperMode:T}=(0,D.g)(),C=(0,f.useMemo)((()=>{switch(n){case c.$O.ETHEREUM:return T?L.a_.ETHEREUM_TEST_SEPOLIA:L.a_.ETHEREUM_HOMESTEAD;case c.$O.AVALANCHE:return T?L.a_.AVALANCHE_TESTNET_ID:L.a_.AVALANCHE_MAINNET_ID;case c.$O.BITCOIN:return T?L.a_.BITCOIN_TESTNET:L.a_.BITCOIN;default:return T?L.a_.ETHEREUM_TEST_SEPOLIA:L.a_.ETHEREUM_HOMESTEAD}}),[T,n]),b=function(e){const{currentAsset:t,setTransactionDetails:n,currentBlockchain:r,targetBlockchain:o}=(0,a.j)(),l=r===c.$O.BITCOIN||o===c.$O.BITCOIN,u=function(e){const[t,n]=(0,f.useState)(Date.now());return(0,f.useEffect)((()=>{let t=!0;const r=setInterval((()=>{t&&n(Date.now())}),e);return()=>{t=!1,clearInterval(r)}}),[e]),t}(K),{request:d}=(0,F.K)(),{isDeveloperMode:m}=(0,D.g)(),{getNetworkFeeForNetwork:E}=(0,W.Y)(),{config:h}=(0,s._)(),{createBridgeTransaction:g}=(0,M.e)(),p=(0,j._)(!0,m?L.a_.AVALANCHE_TESTNET_ID:L.a_.AVALANCHE_MAINNET_ID),T=(0,j._)(!0,m?L.a_.BITCOIN_TESTNET:L.a_.BITCOIN),{accounts:{active:C}}=(0,R.a)(),[b,y]=(0,f.useState)(),[w,A]=(0,f.useState)(),[x,k]=(0,f.useState)(),[v,N]=(0,f.useState)(),I=(0,f.useMemo)((()=>Number(v?.high.maxFee||0n)),[v]),B=(0,f.useMemo)((()=>{if(!h||!C||!C.addressBTC)return Z()(0);const e=(0,U.L)(x||[],h.criticalBitcoin.walletAddresses.btc,C.addressBTC,I);return(0,O.O)(e)}),[x,h,I,C]),[S,q]=(0,f.useState)(),[G,P]=(0,f.useState)(),V=!b||!w||!S,z=(0,O.U)(e),Y=h&&(0,$.n)(h),X=b?[b]:[];(0,f.useEffect)((()=>{!async function(){if(l&&u){const e=await E(m?L.a_.BITCOIN_TESTNET:L.a_.BITCOIN);N(e)}}()}),[E,l,m,u]),(0,f.useEffect)((()=>{const{addressC:e,addressBTC:t}=C??{};if(l&&Y&&e&&t){const e=T?.find((e=>"BTC"===e.symbol));e&&(k(e.utxos),y({symbol:Y.symbol,asset:Y,balance:(0,O.O)(e.balance.toNumber()),logoUri:e.logoUri,price:e.priceUSD,unconfirmedBalance:e?.unconfirmedBalance?(0,O.O)(e.unconfirmedBalance.toNumber()):(0,O.O)(0)}));const t=p?.find((e=>"BTC.b"===e.symbol));t&&A({symbol:Y.symbol,asset:Y,balance:(0,O.O)(t.balance?.toNumber()||0),logoUri:t.logoUri,price:t.priceUSD,unconfirmedBalance:(0,O.O)(t.balance?.toNumber()||0)})}}),[C,p,T,Y,l,m,d]),(0,f.useEffect)((()=>{if(l&&h&&C&&x&&C.addressBTC)try{const e=(0,H.e)(h,C.addressBTC,x,z,I);q((0,O.O)(e.fee)),P((0,O.O)(e.receiveAmount))}catch(e){q(i.HW),P(i.HW)}}),[z,C,h,l,x,I]);const J=(0,f.useCallback)((async a=>{if(!(l&&h&&C&&Y&&x))return;const s=Date.now(),o=t||"",i=await d({method:_.a.BRIDGE_TRANSFER_ASSET,params:[r,e,Y,a]});return n({tokenSymbol:o,amount:e}),g({sourceChain:c.$O.BITCOIN,sourceTxHash:i.hash,sourceStartedAt:s,targetChain:c.$O.AVALANCHE,amount:e,symbol:o}),i.hash}),[l,h,C,Y,x,t,d,r,e,n,g]);return{address:C?.addressBTC,sourceBalance:b,targetBalance:w,assetsWithBalances:X,hasEnoughForNetworkFee:!0,loading:V,networkFee:S,receiveAmount:G,maximum:B,price:b?.price,transfer:J}}(u),y=function(e,t,n,r){const{currentAsset:s,currentAssetData:o,setTransactionDetails:u,currentBlockchain:d}=(0,a.j)(),[m,E]=(0,f.useState)(void 0),{request:h}=(0,F.K)(),g=d===c.$O.ETHEREUM;(0,f.useEffect)((()=>{s&&g&&(E(void 0),(async()=>{const e=await h({method:_.a.BRIDGE_GET_ETH_MAX_TRANSFER_AMOUNT,params:[s]});E(e||void 0)})())}),[h,s,g]);const{createBridgeTransaction:p,transferAsset:T}=(0,M.e)(),{assetsWithBalances:C}=te(c.$O.ETHEREUM),b=C.find((({asset:e})=>e.symbol===s)),y=ne(r?.gasLimit),[w,A]=(0,f.useState)(l.k.INITIAL),[x,k]=(0,f.useState)(),v=e.gt(n)?e.minus(t):i.HW,N=(0,f.useCallback)((async t=>{if(!o)return Promise.reject();const n=Date.now(),r=(0,G.UI)(o)?o.wrappedAssetSymbol:s||"",a=await T(e,o,t,A,k);return u({tokenSymbol:r,amount:e}),p({sourceChain:c.$O.ETHEREUM,sourceTxHash:a.hash,sourceStartedAt:n,targetChain:c.$O.AVALANCHE,amount:e,symbol:r}),a.hash}),[e,o,p,s,u,T]);return{sourceBalance:b,assetsWithBalances:C,hasEnoughForNetworkFee:y,receiveAmount:v,maximum:m,price:b?.price,wrapStatus:w,txHash:x,transfer:N}}(u,g,p,E),w=function(e,t,n,r){const{targetBlockchain:s,currentBlockchain:o,setTransactionDetails:l,currentAssetData:u}=(0,a.j)(),{createBridgeTransaction:d,transferAsset:m}=(0,M.e)(),E=o===c.$O.AVALANCHE,[h,g]=(0,f.useState)(),{assetsWithBalances:p}=te(c.$O.AVALANCHE,E?u:void 0),T=p[0],{assetsWithBalances:C}=te(c.$O.AVALANCHE),b=ne(undefined),y=T?.balance||i.HW,w=e.gt(n)?e.minus(t):i.HW,A=(0,f.useCallback)((async t=>{if(!u)return Promise.reject();const n=Date.now(),r=await m(e,u,t,(()=>{}),g);return l({tokenSymbol:u.symbol,amount:e}),d({sourceChain:c.$O.AVALANCHE,sourceTxHash:r.hash,sourceStartedAt:n,targetChain:s,amount:e,symbol:u.symbol}),r.hash}),[e,d,u,l,s,m]);return{sourceBalance:T,assetsWithBalances:C,hasEnoughForNetworkFee:b,receiveAmount:w,maximum:y,price:T?.price,txHash:h,transfer:A}}(u,g,p),A=function(e,t,n,r){const{currentAsset:s,currentAssetData:o,setTransactionDetails:l,currentBlockchain:u,targetBlockchain:d}=(0,a.j)(),{network:E}=(0,D.g)(),{capture:h}=(0,m.O)(),{estimateTransferGas:g,getFee:p,transferAsset:T,supportsAsset:C}=(0,ee.$)(),[b,y]=(0,f.useState)(),[w,A]=(0,f.useState)(),[x,k]=(0,f.useState)(),[v,N]=(0,f.useState)(),[I,B]=(0,f.useState)(),S=u===c.$O.ETHEREUM,{assetsWithBalances:O}=te(S?c.$O.ETHEREUM:c.$O.AVALANCHE),$=(0,f.useMemo)((()=>{if(s&&n&&E)return O.find((({asset:e})=>Y(e)&&e.symbol===s))}),[E,O,n,s]),H=ne(r?.gasLimit),[L,U]=(0,f.useState)();(0,f.useEffect)((()=>{!w&&$?.balance&&A($.balance)}),[w,$]),(0,f.useEffect)((()=>{let r=!0;return s&&o&&n&&e&&C(n,t)&&(e&&!e.eq(i.HW)&&p(s,(0,re.W)(e,o.denomination),t).then((t=>{if(!r)return;const n=(0,ae.j)(t,o.denomination);N(n),k(n),y(e.sub(n))})),$?.balance&&A($.balance)),()=>{r=!1}}),[s,o,n,e,t,p,$?.balance,C]);const _=(0,f.useCallback)(((e,n)=>{if(!n)throw new Error("No asset data");const r=(0,G.UI)(n)?n.wrappedAssetSymbol:n.symbol;return g(r,(0,re.W)(e,n.denomination),t)}),[g,t]),R=(0,f.useCallback)((async n=>{if(h("unifedBridgeTransferStarted",{bridgeType:"CCTP",sourceBlockchain:u,targetBlockchain:d}),!s)throw new Error("No asset chosen");if(!o)throw new Error("No asset data");const r=(0,G.UI)(o)?o.wrappedAssetSymbol:s||"",a=await T(s,(0,re.W)(e,o.denomination),t,B,n);return U(a),l({tokenSymbol:r,amount:e}),a}),[e,o,s,l,T,t,h,u,d]);return{sourceBalance:$,bridgeStep:I,estimateGas:_,assetsWithBalances:O,hasEnoughForNetworkFee:H,receiveAmount:b,bridgeFee:v,maximum:w,minimum:x,price:$?.price,txHash:L,transfer:R}}(u,C,e,E),x=(0,f.useMemo)((()=>({amount:u,minimum:p,setAmount:d,bridgeFee:g,estimateGas:r,gasSettings:E,setGasSettings:h,provider:se.Avalanche})),[u,g,p,r,E]);return(0,f.useMemo)((()=>e&&o(e,C)?{...x,...A,provider:se.Unified}:t===c.$O.BITCOIN?{...x,...b}:t===c.$O.ETHEREUM?{...x,...y}:t===c.$O.AVALANCHE?{...x,...w}:{...x,hasEnoughForNetworkFee:!0,transfer:()=>Promise.reject("invalid bridge")}),[w,b,x,y,A,t,e,o,C])}var ce=n(2409),le=n(68622),ue=n(15541),de=n(27822),me=n(45524),Ee=n(61359),fe=n(78938);const he=()=>{const{network:e}=(0,D.g)(),{setCurrentBlockchain:t}=(0,a.j)();(0,f.useEffect)((()=>{switch(e?.chainId){case L.a_.BITCOIN:case L.a_.BITCOIN_TESTNET:t(c.$O.BITCOIN)}}),[])};var ge=n(83192),pe=n(78888);function Te({onCancel:e,startTransfer:t,isTransactionPending:n,blockchain:r}){const a=(0,ge.a)(e,function(e){return e===c.$O.BITCOIN?pe.px.BITCOIN:pe.px.AVALANCHE}(r));return(0,f.useEffect)((()=>{a&&!n&&t()}),[a,t,n]),null}var Ce=n(23762),be=n(92094),ye=n(82135),we=n(19248),Ae=n(86642),xe=n(94277),ke=n(65124),ve=n(60917),Ne=n(85466),Ie=n(35291),Be=n(67294);function Se({fee:e,feeSymbol:t,amount:n,symbol:r,address:a,nftName:s,requiredSignatures:o,currentSignature:i,onReject:c,onSubmit:l}){const u=(0,ye.Z)(),d=(0,be.Z)(),m=(0,ve.Z)(),E="function"==typeof c,f="function"==typeof l;if((0,Ne.Z)()){if(E&&f)return Be.createElement(Ie.A,{onReject:c,onSubmit:l});throw new Error("Please provide proper onSubmit and onReject callbacks")}if(m){if(E&&f)return Be.createElement(ke.m,{onReject:c,onSubmit:l,requiredSignatures:o,currentSignature:i});throw new Error("Please provide proper onSubmit and onReject callbacks")}if(u)return Be.createElement(xe.a,null,Be.createElement(Ae.q,{address:a,fee:e,feeSymbol:t,amount:n,symbol:r,nftName:s,currentSignature:i,requiredSignatures:o}));if(d){if(!E)throw new Error("Please provide a proper onReject callback");return Be.createElement(we.o,{onReject:c})}return Be.createElement(Ce.f,null)}var Oe=n(26793),$e=n(67294);const He=()=>{const{t:e}=(0,Oe.$)();return $e.createElement(x.Kqy,{sx:{alignItems:"center",rowGap:2,height:"100%"}},$e.createElement(d.V,{variant:d.D.PRIMARY}),$e.createElement(x.go2,{size:72,sx:{mt:5}}),$e.createElement(x.ZT$,{variant:"h4"},e("Failed to connect")),$e.createElement(x.ZT$,{variant:"body2",sx:{mx:5,color:"text.secondary",textAlign:"center"}},e("Users may not use the Bridge if they are on the Specially Designated Nationals (SDN) List of the Office of Foreign Assets Control (OFAC) or any other sanctions or are otherwise a sanctioned person or from a sanctioned jurisdiction")))};var Le=n(19442),Ue=n(32738),_e=n(19108);function Re(){const{featureFlags:e}=(0,X.d)(),{accounts:{active:t}}=(0,R.a)(),[n,r]=(0,f.useState)(w);return(0,f.useEffect)((()=>{const n=w.filter((n=>{switch(n){case c.$O.BITCOIN:return!!e[J.yy.BRIDGE_BTC]&&!(0,Ue.VI)(t)&&(!(0,Ue.Uc)(t)||(0,_e.Z)(t));case c.$O.ETHEREUM:return e[J.yy.BRIDGE_ETH];default:return!0}}));r(n)}),[e,t]),n}var Me=n(67294);const Fe=({onSelect:e})=>{const{t}=(0,Oe.$)(),n=Re().includes(c.$O.ETHEREUM)?c.$O.ETHEREUM:c.$O.AVALANCHE,{networks:r}=(0,D.g)(),{bridgeConfig:s}=(0,a.j)(),o=(0,Le.t)(n,r,s);return Me.createElement(x.Kqy,{height:"100%",width:"100%"},Me.createElement(d.V,{variant:d.D.PRIMARY},t("Back")),Me.createElement(x.Kqy,{sx:{alignItems:"center",justifyContent:"center",flexGrow:1,mx:2}},Me.createElement(x.ZT$,{variant:"h5"},t(" Network not supported.")),Me.createElement(x.ZT$,{variant:"body1",sx:{mt:1,mb:3,textAlign:"center"}},t("Network is not supported. Change network to supported network to continue.")),Me.createElement(x.zxk,{size:"large",fullWidth:!0,onClick:()=>e(n)},t("Switch to {{chainName}}",{chainName:o?.chainName}))))};var De=n(62440),qe=n(97778),Ze=n(2734),We=n(70582),je=n(71446),Ke=n(26993),Ge=n(67294);const Pe=function({tokenAmount:e,currencyAmount:t,source:n,target:r,currentAsset:a,bridgeFee:s,receiveAmount:o,receiveAmountCurrency:i,onSubmit:c}){(0,fe.X)(),he();const l=(0,h.k6)(),{t:u}=(0,Oe.$)();return Ge.createElement(x.Kqy,{sx:{height:"100%",width:"100%",justifyContent:"space-between"}},Ge.createElement(x.Kqy,{sx:{width:"100%",rowGap:1,mt:3}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",ml:1}},Ge.createElement(x.wyc,{onClick:()=>l.goBack(),size:30,sx:{cursor:"pointer",mr:-1}}),Ge.createElement(d.V,{showBackButton:!1},u("Confirm Transaction"))),Ge.createElement(x.Kqy,{sx:{alignItems:"center",mx:2,rowGap:2}},Ge.createElement(Ke.A,{src:n.logoUri,width:"48px",height:"48px",zIndex:2,withBackground:!0}),Ge.createElement(x.Zbd,{sx:{width:"100%",p:2,pt:5,mt:-5}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},u("Bridging Amount")),Ge.createElement(x.Kqy,{sx:{flexDirection:"row"}},Ge.createElement(x.ZT$,{variant:"h6"},e),Ge.createElement(x.ZT$,{variant:"h6",sx:{ml:1,color:"text.secondary"}},a))),Ge.createElement(x.Kqy,{sx:{alignItems:"flex-end",width:"100%"}},Ge.createElement(x.ZT$,{variant:"caption",sx:{color:"text.secondary"}},t))),Ge.createElement(x.Zbd,{sx:{width:"100%",p:2}},Ge.createElement(x.Kqy,{divider:Ge.createElement(x.izJ,null),sx:{rowGap:2}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},u("From")),Ge.createElement(x.Kqy,{sx:{flexDirection:"row",columnGap:1,alignItems:"center"}},Ge.createElement(x.ZT$,{variant:"body2"}," ",n.name," "),Ge.createElement(Ke.A,{src:n.logoUri,width:"16px",height:"16px"}))),Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},u("To")),Ge.createElement(x.Kqy,{sx:{flexDirection:"row",columnGap:1,alignItems:"center"}},Ge.createElement(x.ZT$,{variant:"body2"}," ",r.name," "),Ge.createElement(Ke.A,{src:r.logoUri,width:"16px",height:"16px"}))))),Ge.createElement(x.Zbd,{sx:{width:"100%",p:2}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between"}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",columnGap:1,alignItems:"center"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},u("Bridging Fee"))),Ge.createElement(x.ZT$,{variant:"subtitle2"},s))),Ge.createElement(x.Kqy,{sx:{width:"100%"}},Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",width:"100%"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},u("Receive")),Ge.createElement(x.Kqy,{sx:{flexDirection:"row",alignItems:"center"}},Ge.createElement(x.ZT$,{variant:"h5"},o?(0,de.v)(o,9):"-"),Ge.createElement(x.ZT$,{variant:"h6",sx:{color:"text.secondary",ml:1}},a))),Ge.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"flex-end",width:"100%"}},Ge.createElement(x.ZT$,{variant:"body2",sx:{color:"text.secondary"}},i?.replace("~","")))))),Ge.createElement(x.Kqy,{sx:{alignItems:"flex-end",justifyContent:"center",flexDirection:"row",width:"100%",columnGap:1,pb:3,px:2}},Ge.createElement(x.zxk,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>l.goBack()},u("Cancel")),Ge.createElement(x.zxk,{size:"large",fullWidth:!0,onClick:c},u("Bridge Now"))))};var Ve=n(13673),ze=n(42019);const Ye=e=>Y(e.asset)?e.asset.address??"":(0,G.Vf)(e.asset)?e.asset.nativeContractAddress:"";var Xe=n(50785),Je=n(95280),Qe=n(67294),et=n(25108);function tt(e){return e?(0,r.L)(e,6):"-"}function nt(){(0,fe.X)(),he();const[e,t]=(0,f.useState)(),{sourceBalance:n,amount:r,setAmount:g,assetsWithBalances:p,hasEnoughForNetworkFee:T,loading:C,estimateGas:b,price:y,maximum:w,minimum:A,receiveAmount:k,wrapStatus:v,transfer:N,bridgeFee:B,provider:S,bridgeStep:O,gasSettings:$,setGasSettings:H}=ie(e),{bridgeConfig:L,currentAsset:U,currentAssetData:_,setCurrentAsset:M,currentBlockchain:F,setCurrentBlockchain:q,targetBlockchain:j,sourceAssets:K}=(0,a.j)(),{error:G}=(0,s._)(),{getAssetAddressOnTargetChain:P}=(0,ee.$)(),{t:X}=(0,Oe.$)(),J=Re(),{currencyFormatter:Q,currency:te}=(0,E.K)(),{getTokenSymbolOnNetwork:ne}=(0,o.s)(),re=(0,ye.Z)(),ae=(0,ve.Z)(),oe=(0,Ne.Z)(),{isFunctionAvailable:ge}=(0,Ve.a)(Ve.o.BRIDGE),pe=(0,Ze.Z)(),[Ce,be]=(0,f.useState)(""),[we,Ae]=(0,f.useState)(1),[xe,ke]=(0,f.useState)(1),[Ie,Be]=(0,f.useState)(!1),[$e,Ue]=(0,f.useState)(!1),_e=(0,h.k6)(),[Me,Ke]=(0,f.useState)(!1),[Ge,nt]=(0,f.useState)(!1),{capture:rt,captureEncrypted:at}=(0,m.O)(),{getPageHistoryData:st,setNavigationHistoryData:ot}=(0,le.K)(),{sendTokenSelectedAnalytics:it,sendAmountEnteredAnalytics:ct}=(0,Ee.t)(),lt=(0,ze.f)(),{accounts:{active:ut}}=(0,R.a)(),{network:dt,setNetwork:mt,networks:Et}=(0,D.g)(),{resetKeystoneRequest:ft}=(0,qe.t)(),{networkFee:ht}=(0,W.Y)(),[gt,pt]=(0,f.useState)(Xe.Lm.INSTANT),Tt=(0,f.useMemo)((()=>dt?(0,Je.N)(dt)?ut?.addressBTC:ut?.addressC:void 0),[ut?.addressBTC,ut?.addressC,dt]),Ct=(0,f.useMemo)((()=>{if(j)return(0,Le.t)(j,Et,L)}),[L,Et,j]),bt=(0,f.useMemo)((()=>{if(F)return(0,Le.t)(F,Et,L)}),[L,Et,F]),yt=(0,f.useMemo)((()=>n?Y(n.asset)?n?.asset.decimals:n.asset.denomination:0),[n]),wt=(0,f.useMemo)((()=>(0,ue.l)(r,yt)),[r,yt]),At=(0,f.useCallback)((e=>e?`${Q(e).replace(te,"")} ${te}`:"-"),[te,Q]),xt=(0,f.useMemo)((()=>U&&n?{type:z.iv.ERC20,balanceDisplayValue:tt(n.balance),balance:(0,ue.l)(n.balance||i.HW,yt),decimals:yt,priceUSD:y,logoUri:n.logoUri,name:Y(n.asset)?n.asset.symbol:ne(n.asset.symbol,F),symbol:Y(n.asset)?n.asset.symbol:ne(n.asset.symbol,F),address:n.asset.symbol,contractType:"ERC-20",unconfirmedBalanceDisplayValue:tt(n.unconfirmedBalance),unconfirmedBalance:(0,ue.l)(n.unconfirmedBalance||i.HW,yt)}:null),[U,F,yt,ne,y,n]),kt=st();(0,f.useEffect)((()=>{const e=(0,Le.Z)(dt);F!==e&&q(e)}),[dt,F,q]),(0,f.useEffect)((()=>{!r&&kt.inputAmount&&g(new(Z())(kt.inputAmount))}),[r,kt.inputAmount,g,Et,mt]),(0,f.useEffect)((()=>{const e=Object.keys(K),n=kt.selectedToken;if(n&&!U&&e.length&&e.includes(n)){const e=setTimeout((()=>{M(n),t(kt.selectedTokenAddress??"")}),1);return()=>{clearTimeout(e)}}}),[kt.selectedToken,kt.selectedTokenAddress,U,e,M,K,L,Et,j]);const vt=(0,f.useCallback)((e=>{const n=(0,Le.t)(e,Et,L);if(n){mt(n);const e=P(U,n.chainId);t(e),ot({selectedTokenAddress:e,selectedToken:U,inputAmount:r})}g(i.HW),be("")}),[r,L,P,U,Et,g,ot,mt]),Nt=r&&!r.eq(i.HW)&&r.lt(A||i.HW),It=!Nt&&r.gt(i.HW),Bt=(0,f.useMemo)((()=>F===c.$O.AVALANCHE?"AVAX":F===c.$O.BITCOIN?"BTC":"ETH"),[F]),St=(0,f.useMemo)((()=>Ce.length>0||C||$e||Ie||Nt||i.HW.eq(r)||!T),[r,Ce.length,T,Nt,Ie,C,$e]),Ot=(0,f.useMemo)((()=>Qe.createElement(Qe.Fragment,null,!T&&Qe.createElement(x.ZT$,{variant:"caption"},Qe.createElement(De.c,{i18nKey:"Insufficient balance to cover gas costs. <br />Please add {{token}}.",values:{token:Bt}})),Nt&&Qe.createElement(x.ZT$,{variant:"caption"},X("Amount too low -- minimum is {{minimum}}",{minimum:A?.toFixed(9)??0})),Ce&&Qe.createElement(x.ZT$,{variant:"caption"},Ce))),[Ce,Bt,T,Nt,A,X]),$t=(0,f.useMemo)((()=>{const e=U?` ${U}`:"";return It&&k?`${(0,de.v)(k,yt)}${e}`:"-"}),[U,It,k,yt]),Ht=(0,f.useMemo)((()=>It&&y&&k?`~${At(y*k.toNumber())}`:"-"),[At,It,y,k]),Lt=(0,f.useMemo)((()=>y&&r?At(y*r.toNumber()):"-"),[r,At,y]),Ut=(0,f.useCallback)((t=>{const n=(0,V.N)(t.bn,yt);if(ot({selectedTokenAddress:e,selectedToken:U,inputAmount:n}),g(n),ct("Bridge"),!w||w&&n&&w.lt(n)){const e=X("Insufficient balance");if(e===Ce)return;return be(e),void rt("BridgeTokenSelectError",{errorMessage:e})}be("")}),[Ce,rt,U,e,yt,w,ct,g,ot,X]),_t=(0,f.useCallback)((()=>{if(j){const e=(0,Le.t)(j,Et,L);if(e){const n=P(U,e.chainId);t(n),ot({selectedTokenAddress:n,selectedToken:U,inputAmount:void 0}),g(i.HW),mt(e),nt(!Ge),be("")}}}),[L,U,Ge,Et,g,mt,ot,j,P]),Rt=(0,f.useCallback)((e=>{const n=e.symbol,r=Ye(e);t(r),ot({selectedToken:n,selectedTokenAddress:r,inputAmount:void 0}),g(i.HW),M(n),it("Bridge"),T||rt("BridgeTokenSelectError",{errorMessage:"Insufficent balance to cover gas costs."})}),[rt,T,it,g,M,ot]),Mt=(0,f.useCallback)((()=>{_e.push("/bridge/confirm")}),[_e]),Ft=(0,f.useCallback)((async()=>{if(i.HW.eq(r))return;at("BridgeTransferStarted",{address:Tt,sourceBlockchain:F,targetBlockchain:j}),Be(!0);const[e,t]=await(0,me.D)(N($));if(Ue(!1),Be(!1),t){if(et.error(t),"User declined the transaction"===t)return void at("BridgeTransferRequestUserRejectedError",{address:Tt,sourceBlockchain:F,targetBlockchain:j,fee:B?.toNumber()});be(X("There was a problem with the transfer")),at("BridgeTransferRequestError",{address:Tt,sourceBlockchain:F,targetBlockchain:j});const{title:e,hint:n}=lt(t);return void We.ZP.custom(Qe.createElement(x.JjM,{variant:"error"},Qe.createElement(x.ZT$,{variant:"subtitle2"},e),Qe.createElement(x.ZT$,{variant:"caption",color:"text.primary"},n)),{duration:5e3})}at("BridgeTransferRequestSucceeded",{address:Tt,txHash:e,sourceBlockchain:F,targetBlockchain:j});const n=Date.now();_e.push(`/bridge/transaction-status/${F}/${e}/${n}`)}),[r,B,$,at,F,j,Tt,N,_e,X,lt]),Dt=(0,f.useCallback)((()=>{re?Ue(!0):ae||oe?Be(!0):Ft()}),[Ft,oe,re,ae]),qt=(0,f.useCallback)((e=>{H((t=>{const n=void 0!==e.maxFeePerGas&&e.maxFeePerGas!==t.maxFeePerGas,r=void 0!==e.maxPriorityFeePerGas&&e.maxPriorityFeePerGas!==t.maxPriorityFeePerGas,a=void 0!==e.gasLimit&&e.gasLimit!==t.gasLimit;return n||r||a?{...t,...e}:t}))}),[H]);(0,f.useEffect)((()=>{let e=!0;if(r&&r.gt(i.HW))return b(r,_).then((t=>{e&&"bigint"==typeof t&&qt({gasLimit:t})})),()=>{e=!1}}),[r,b,U,_,qt]),(0,f.useEffect)((()=>{v===l.k.WAITING_FOR_DEPOSIT_CONFIRMATION&&(Ae(2),ke(1)),v===l.k.WAITING_FOR_CONFIRMATION&&ke(we)}),[v,we]),(0,f.useEffect)((()=>{O&&(Ae(O.requiredSignatures),ke(O.currentSignature))}),[O]);const Zt=(0,f.useRef)(null);return G||!ge||J.length<2?Qe.createElement(ce.F,{functionName:Ve.o.BRIDGE},Qe.createElement(x.zxk,{href:"https://status.avax.network/",target:"_blank",rel:"noopener noreferrer",sx:{mt:3}},X("Go to the status page"))):F!==c.$O.UNKNOWN&&J.includes(F)?ut&&(0,u.f)({addressEVM:ut.addressC,addressBTC:ut.addressBTC,bridgeConfig:L})?Qe.createElement(He,null):Qe.createElement(h.rs,null,Qe.createElement(h.AW,{path:"/bridge/confirm"},Qe.createElement(Qe.Fragment,null,Qe.createElement(Pe,{tokenAmount:r.toString(),currencyAmount:Lt,source:{logoUri:bt?.logoUri,name:bt?.chainName},target:{logoUri:Ct?.logoUri,name:Ct?.chainName},currentAsset:U,bridgeFee:B?`${(0,de.v)(B,yt)} ${U}`:"-",receiveAmount:k,receiveAmountCurrency:Ht,onSubmit:Dt}),$e&&Qe.createElement(Te,{blockchain:F,isTransactionPending:Ie,onCancel:()=>{Ue(!1)},startTransfer:()=>{Ue(!1),Ft()}}),Ie&&Qe.createElement(Se,{address:X("Avalanche Bridge"),amount:(0,de.v)(r,yt),symbol:U,currentSignature:xe,requiredSignatures:we,onReject:()=>{Ue(!1),ft(),Be(!1)},onSubmit:Ft}))),Qe.createElement(h.AW,{path:"/bridge"},Qe.createElement(x.Kqy,{sx:{height:"100%",width:"100%"}},Qe.createElement(d.V,{onBackClick:()=>{M(""),_e.replace("/home")}},X("Bridge")),Qe.createElement(x.$B7,null,Qe.createElement(x.Kqy,{sx:{flex:1,px:2,pb:S===se.Unified?14:10}},Qe.createElement(x.Kqy,{sx:{flex:1}},Qe.createElement(x.Zbd,{ref:Zt,sx:{p:0,overflow:"unset"}},Qe.createElement(x.Kqy,{sx:{width:"100%"}},Qe.createElement(x.Zbd,{sx:{p:0,backgroundColor:"grey.850",overflow:"unset"}},Qe.createElement(x.Kqy,{sx:{width:"100%"}},Qe.createElement(x.Kqy,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",p:2,pr:1}},Qe.createElement(x.ZT$,{variant:"body2",sx:{fontWeight:"fontWeightSemibold"}},X("From")),Qe.createElement(I,{testId:"bridge-from-chain-selector",selected:F,onSelect:vt,chains:J})),Qe.createElement(x.Kqy,{sx:{flexGrow:1,maxHeight:"unset",height:"100%"}},Qe.createElement(je.H,{maxAmount:w&&(0,ue.l)(w,yt),bridgeTokensList:p,selectedToken:xt,onTokenChange:Rt,inputAmount:!n||wt.isZero()?void 0:wt,onInputAmountChange:Ut,onSelectToggle:()=>{Ke(!Me)},isOpen:Me,isValueLoading:C,setIsOpen:Ke,padding:"0 16px 8px",skipHandleMaxAmount:!0,label:"",containerRef:Zt})),Qe.createElement(x.Kqy,{direction:"row",sx:{height:28,position:"relative",top:-25,justifyContent:"center"}},(Ce||Nt||!T)&&Qe.createElement(x.ua7,{placement:"bottom",title:Qe.createElement(x.Kqy,{sx:{rowGap:2,p:1}},Ot)},Qe.createElement(x.Kqy,{sx:{flexDirection:"row",columnGap:.5,cursor:"pointer",mt:.5}},Qe.createElement(x.ZT$,{variant:"caption",color:pe.palette.error.main},X("Error")),Qe.createElement(x.go2,{size:12,color:pe.palette.error.main})))))),Qe.createElement(x.Kqy,{sx:{alignItems:"center",mt:-2.5,pb:1}},Qe.createElement(x.ua7,{title:Qe.createElement(x.ZT$,null,X("Switch"))},Qe.createElement(x.zxk,{"data-testid":"bridge-switch-button",usehigherzindex:Me?"0":"1",onClick:_t,disabled:!j,sx:{width:40,height:40}},Qe.createElement(x.TdZ,{size:20,sx:{transform:"rotate(90deg)"}})))),Qe.createElement(x.Zbd,{sx:{background:"none",zIndex:1}},Qe.createElement(x.Kqy,{sx:{width:"100%",p:2,pt:1,rowGap:2}},Qe.createElement(x.Kqy,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center"}},Qe.createElement(x.ZT$,{variant:"body2",sx:{fontWeight:"fontWeightSemibold"}},X("To")),Qe.createElement(x.ZT$,{variant:"body2",sx:{fontWeight:"fontWeightSemibold"}},Ct?Ct.chainName:"")),Qe.createElement(x.izJ,{divider:Qe.createElement(x.izJ,null),sx:{rowGap:2}}),Qe.createElement(x.Kqy,null,Qe.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:1}},Qe.createElement(x.ZT$,null,X("Receive")),Qe.createElement(x.ZT$,null,$t)),Qe.createElement(x.Kqy,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},Qe.createElement(x.ZT$,{variant:"caption",color:pe.palette.text.secondary},X("Estimated")),Qe.createElement(x.ZT$,{variant:"caption",color:pe.palette.text.secondary},Ht)))))))),v===l.k.WAITING_FOR_DEPOSIT&&Qe.createElement(x.ZT$,{size:14,sx:{alignSelf:"center"}},X("Waiting for deposit confirmation")),Qe.createElement(x.Kqy,{sx:{mt:1.25,...Me?{display:"none"}:{}}},Qe.createElement(Xe.a0,{isLimitReadonly:!0,maxFeePerGas:$.maxFeePerGas||0n,limit:Number($.gasLimit)||0,onChange:e=>{qt({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas}),e.feeType&&pt(e.feeType)},onModifierChangeCallback:e=>{e&&pt(e),rt("BridgeFeeOptionChanged",{modifier:e})},selectedGasFeeModifier:gt,network:dt,networkFee:ht})))),Qe.createElement(x.Kqy,{sx:{position:"fixed",display:Me?"none":"flex",bottom:0,width:1,maxWidth:375,px:2,pt:1.5,pb:3,backgroundColor:"rgba(0,0,0,0.85)",backdropFilter:"blur(12px)",gap:2}},S===se.Unified&&Qe.createElement(x.Kqy,{direction:"row",sx:{justifyContent:"center",alignItems:"center",gap:.5}},Qe.createElement(x.ZT$,{variant:"caption"},X("Powered by")),Qe.createElement("img",{src:"/images/logos/circle.png",style:{height:14},alt:"Circle"}),Qe.createElement(x.ua7,{PopperProps:{sx:{maxWidth:188}},title:Qe.createElement(De.c,{i18nKey:"{{symbol}} is routed through {{bridgeName}}. <faqLink>Bridge FAQs</faqLink>",values:{symbol:U,bridgeName:"Circle's Cross-Chain Transfer Protocol"},components:{faqLink:Qe.createElement(x.rUS,{href:"https://support.avax.network/en/articles/6092559-avalanche-bridge-faq",target:"_blank",rel:"noreferrer",sx:{fontSize:"caption.fontSize",display:"inline-flex",color:"secondary.dark"}})}})},Qe.createElement(x.uMt,{sx:{cursor:"pointer"}}))),Qe.createElement(x.zxk,{"data-testid":"bridger-transfer-button",fullWidth:!0,size:"large",disabled:St,onClick:Mt},Ie&&Qe.createElement(x.D8x,{size:16,sx:{mr:1}}),X("Next")))))):Qe.createElement(Fe,{onSelect:vt})}const rt=nt},78938:(e,t,n)=>{"use strict";n.d(t,{X:()=>d});var r=n(55813),a=n(59193),s=n(46935),o=n(9354),i=n(58608),c=n(69518),l=n(67294),u=n(94975);function d(){const{setBridgeConfig:e}=(0,r.j)(),{events:t,request:n}=(0,c.K)(),d=(0,l.useCallback)((()=>n({method:s.a.BRIDGE_GET_CONFIG})),[n]);(0,a.Y)(d),(0,l.useEffect)((()=>{const n=t().pipe((0,u.h)((e=>(0,i.K)(e)||(0,o.Xw)(e)))).subscribe((async()=>{const t=await d();e(t)}));return()=>n.unsubscribe()}),[t,d,e])}},19442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,t:()=>i});var r=n(52219),a=n(49530),s=n(64813),o=n(36609);const i=(e,t,n,i)=>{if("object"==typeof e){const n=t.find((t=>t.chainId===(0,s.Z)(e.chainId)));if(!n)throw new Error((0,o.t)("Blockchain not supported"));return n}switch(e){case r.$O.AVALANCHE:return t.find((e=>e.chainId===n.config?.critical.networks[r.$O.AVALANCHE]));case r.$O.ETHEREUM:return t.find((e=>e.chainId===n.config?.critical.networks[r.$O.ETHEREUM]));case r.$O.BITCOIN:return t.find((e=>void 0===i?e.chainId===a.a_.BITCOIN_TESTNET||e.chainId===a.a_.BITCOIN:i?e.chainId===a.a_.BITCOIN_TESTNET:e.chainId===a.a_.BITCOIN));default:throw new Error((0,o.t)("Blockchain not supported"))}},c=e=>{switch("string"==typeof e?.chainId?(0,s.Z)(e.chainId):e?.chainId){case a.a_.AVALANCHE_MAINNET_ID:case a.a_.AVALANCHE_LOCAL_ID:case a.a_.AVALANCHE_TESTNET_ID:return r.$O.AVALANCHE;case a.a_.ETHEREUM_HOMESTEAD:case a.a_.ETHEREUM_TEST_RINKEBY:case a.a_.ETHEREUM_TEST_GOERLY:case a.a_.ETHEREUM_TEST_SEPOLIA:return r.$O.ETHEREUM;case a.a_.BITCOIN:case a.a_.BITCOIN_TESTNET:return r.$O.BITCOIN;default:return r.$O.UNKNOWN}}},32173:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});let r=function(e){return e.InvalidPassword="keystore-invalid-password",e.InvalidVersion="keystore-invalid-version",e.NoNewWallets="keystore-no-new-wallets",e.Unknown="keystore-unknown-error",e}({})},35883:()=>{}}]);
//# debugId=452829ef-5f08-5cee-8972-1c003d9ca193
