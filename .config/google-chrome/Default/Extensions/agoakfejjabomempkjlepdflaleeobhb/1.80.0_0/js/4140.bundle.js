"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c86d4bd1-080e-5cf9-8798-a08a080804f8")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[4140,42],{32738:(e,t,a)=>{a.d(t,{Uc:()=>r,VI:()=>c,X0:()=>l});var n=a(93e3);const r=e=>e?.type===n.Qm.FIREBLOCKS,c=e=>e?.type===n.Qm.WALLET_CONNECT,l=e=>e?.type===n.Qm.PRIMARY},74140:(e,t,a)=>{a.r(t),a.d(t,{AccountDetailsView:()=>B});var n=a(47886),r=a(67294),c=a(26793),l=a(70582),o=a(68483),s=a(1336),i=a(64631),d=a(95280),u=a(43023),m=a(9830),p=a(21529),g=a(67294);const E=()=>g.createElement(o.Cts,{anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:g.createElement(o.Kqy,{direction:"row",sx:{fontSize:"8px"}},g.createElement(o.qEK,{sx:{backgroundColor:"#059E93",border:"1px solid",borderColor:"#353538",width:"12px",height:"12px",boxShadow:"none"}},"X"),g.createElement(o.qEK,{sx:{backgroundColor:"#5400FF",border:"1px solid",borderColor:"#353538",width:"12px",height:"12px",boxShadow:"none",ml:-.4}},"P"))},g.createElement(o.zlI,{size:16}));var y=a(78314),C=a(67294);let h=function(e){return e[e.Search=0]="Search",e[e.Url=1]="Url",e}({});const b=({origin:e})=>{const{t}=(0,c.$)(),a=(0,n.k6)(),l=(0,r.useCallback)((()=>{a.length<=2?a.replace("/accounts"):a.goBack()}),[a]);return C.createElement(o.Kqy,{sx:{px:4,width:1,height:1,alignItems:"center",justifyContent:"center",textAlign:"center",gap:2,backgroundColor:"grey.900"}},e===h.Search&&C.createElement(C.Fragment,null,C.createElement(o.T1r,{size:72}),C.createElement(o.ZT$,{variant:"h5"},t("No search results found")),C.createElement(o.ZT$,{variant:"body2"},t("Try typing the information again or go back to the account manager."))),e===h.Url&&C.createElement(C.Fragment,null,C.createElement(o.go2,{size:72}),C.createElement(o.ZT$,{variant:"h5"},t("Account not found")),C.createElement(o.ZT$,{variant:"body2",color:"text.secondary"},t("Looks like you got here by accident."))),C.createElement(o.zxk,{size:"large",onClick:l,fullWidth:!0,sx:{mt:2}},t("Close")))};var x=a(40042),k=a(55475),v=a(87462),A=a(67294);const f=({icon:e,label:t,address:a,copyHandler:n,...r})=>A.createElement(o.Kqy,(0,v.Z)({direction:"row",sx:{gap:.5,alignItems:"start"}},r),A.createElement(o.Kqy,{direction:"row",sx:{gap:1,alignItems:"center",minWidth:"30%"}},e,A.createElement(o.ZT$,{variant:"body2",sx:{fontWeight:"fontWeightSemibold",whiteSpace:"nowrap",zIndex:1}},t)),A.createElement(o.ZT$,{variant:"body2",sx:{ml:1,wordBreak:"break-all"}},(0,p.z)(a)),A.createElement(o.hU,{size:"small",onClick:n,sx:{alignSelf:"center"},"data-testid":"address-copy-button"},A.createElement(o.TIy,null)));var w=a(56693),M=a(67294);const P=({address:e})=>{const{t}=(0,c.$)(),a=(0,r.useCallback)((()=>{navigator.clipboard.writeText(e),l.ZP.success(t("Copied!"))}),[e,t]);return M.createElement(o.Kqy,{sx:{flexDirection:"row",gap:.5,alignItems:"center"}},M.createElement(o.ua7,{title:e,placement:"bottom",componentsProps:{tooltip:{sx:{py:.75}}}},M.createElement(o.ZT$,{variant:"body2"},(0,w.F)(e))),M.createElement(o.hU,{size:"small",onClick:a},M.createElement(o.TIy,null)))};var I=a(2734),z=a(16048),T=a(67294);const S=e=>{const t=(0,I.Z)();return T.createElement(z.Z,(0,v.Z)({inputProps:{style:{textAlign:"center",height:"auto"}},InputProps:{sx:{p:0,textAlign:"center",backgroundColor:"transparent",...t.typography.h4,"& fieldset":{border:"0 !important"}}}},e))};var Z=a(27641),K=a(26821),R=a(4563),$=a(93e3),O=a(32738),D=a(8929),q=a(67294);const B=()=>{const{t:e}=(0,c.$)(),{isAccountSelectable:t}=(0,x.useAccountManager)(),{accountId:a}=(0,n.UO)(),{getAccountById:g}=(0,m.a)(),{getWallet:C}=(0,i.t)(),v=g(a),[A,w]=(0,r.useState)(!1),[M,I]=(0,r.useState)(!1),[z,T]=(0,r.useState)(!1),[B,F]=(0,r.useState)(v?.name??""),[U,V]=(0,r.useState)(!1),{network:W}=(0,u.g)(),Y=(0,n.k6)(),{capture:L}=(0,Z.O)(),{deleteAccounts:X,renameAccount:N}=(0,m.a)(),_=(0,O.X0)(v)?C(v.walletId):null,{isPrivateKeyAvailable:Q,showPrivateKey:j}=(0,y.C)(v,_?.type),{featureFlags:H}=(0,K.d)(),G=H[R.yy.PRIMARY_ACCOUNT_REMOVAL],J=(0,r.useCallback)(((t,a)=>()=>{navigator.clipboard.writeText((0,p.z)(t)),l.ZP.success(e("Copied!")),L(a,{type:v?.type})}),[e,v?.type,L]),ee=(0,r.useCallback)((()=>{Y.length<=2?Y.replace("/accounts"):Y.goBack()}),[Y]),te=(0,r.useCallback)((()=>{v?.name&&F(v.name),w((e=>!e))}),[v?.name]),ae=(0,r.useCallback)((()=>{B!==v?.name?(T(!0),N(a,B).then((()=>{w(!1),l.ZP.success(e("Account renamed"))})).catch((()=>l.ZP.error(e("Renaming failed")))).finally((()=>{T(!1)}))):w(!1)}),[v?.name,N,B,a,e]),ne=(0,r.useCallback)((async()=>{I(!0),X([a]).finally((()=>{I(!1),ee()}))}),[a,X,ee]);if(!v)return q.createElement(b,{origin:h.Url});const re=t(v),ce=W&&(0,d.N)(W)?v?.addressBTC??v?.addressC:v?.addressC;return q.createElement(o.Kqy,{sx:{px:1,pb:2,width:1,height:1,gap:2,backgroundColor:"grey.900"}},q.createElement(o.Kqy,{direction:"row",sx:{mt:2.5,mb:.5,pr:1,alignItems:"center"}},q.createElement(s.V,{margin:"0",onBackClick:ee}),q.createElement(o.zxk,{variant:"text",size:"small",onClick:A?ae:te,disabled:z,isLoading:z,"data-testid":`account-details-${A?"save":"edit"}-button`},e(A?"Save":"Edit"))),q.createElement(o.Kqy,{sx:{gap:1,justifyContent:"center",alignItems:"center"}},A?q.createElement(S,{"data-testid":"account-details-name-input",defaultValue:v.name,onChange:e=>F(e.target.value),onKeyDown:e=>{"Enter"===e.key?ae():"Escape"===e.key&&(F(v.name),w(!1))},autoFocus:!0}):q.createElement(o.ZT$,{variant:"h4",textAlign:"center","data-testid":"account-details-name"},v.name),_&&q.createElement(D.X,{walletDetails:_}),q.createElement(P,{address:ce})),q.createElement(o.Kqy,{sx:{flexGrow:1}},q.createElement(o.Zbd,{elevation:1,sx:{backgroundColor:"grey.850",mx:1}},q.createElement(o.aYP,{sx:{pl:2,pr:1,":last-child":{pb:.5}}},q.createElement(o.Kqy,{sx:{gap:1.5}},q.createElement(f,{"data-testid":"account-address-c",icon:q.createElement(o.zlI,{size:16}),label:e("C-Chain"),address:v.addressC,copyHandler:J(v.addressC,"AccountDetailsCAddressCopied")}),v.addressPVM&&q.createElement(f,{"data-testid":"account-address-px",icon:q.createElement(E,null),label:e("X/P-Chain"),address:v.addressPVM,copyHandler:J(v.addressPVM,"AccountDetailsXPAddressCopied")}),v.addressBTC&&q.createElement(f,{"data-testid":"account-address-btc",icon:q.createElement(o.xFY,{size:16}),label:e("Bitcoin"),address:v.addressBTC,copyHandler:J(v.addressBTC,"AccountDetailsBTCAddressCopied")}),Q&&q.createElement(o.zxk,{variant:"text",color:"primary",size:"large","data-testid":"export-private-key-button",endIcon:q.createElement(o.XCv,{size:20}),sx:{justifyContent:"space-between",pl:0,pr:.5},fullWidth:!0,onClick:j},e("Show Private Key")))))),(v.type!==$.Qm.PRIMARY||G)&&q.createElement(o.ua7,{title:re?"":e("Only the last account and secondary wallets can be deleted. First account cannot be deleted (delete the wallet instead).")},q.createElement(o.zxk,{variant:"text",color:"error",size:"large","data-testid":"delete-account-button",startIcon:re?null:q.createElement(o.uMt,null),disabled:!re,isLoading:M,onClick:()=>V(!0),fullWidth:!0},e("Delete Account"))),q.createElement(k.W,{open:U,onClose:()=>V(!1),onConfirm:ne,isMultiple:!1,isDeleting:M}))}},55475:(e,t,a)=>{a.d(t,{W:()=>o});var n=a(87462),r=a(68483),c=a(26793),l=a(67294);const o=({onClose:e,onConfirm:t,isMultiple:a,isDeleting:o,...s})=>{const{t:i}=(0,c.$)();return l.createElement(r.VqE,(0,n.Z)({PaperProps:{sx:{m:2}},sx:{textAlign:"center"}},s),l.createElement(r.$N8,null,l.createElement(r.ZT$,{variant:"h5"},i(a?"Delete Accounts?":"Delete Account?"))),l.createElement(r.cZJ,null,l.createElement(r.ZT$,{variant:"body2"},i(a?"Removing the accounts will delete all local accounts information stored on this computer. Your assets on chain will remain on chain.":"Removing the account will delete all local  account information stored on this computer. Your assets on chain will remain on chain."))),l.createElement(r.kXR,{sx:{gap:1}},l.createElement(r.zxk,{onClick:t,variant:"contained",size:"large",disabled:o,isLoading:o,"data-testid":"delete-account-confirm-button"},i("Delete")),l.createElement(r.zxk,{onClick:e,variant:"text",disabled:o,"data-testid":"delete-account-cancel-button"},i("Cancel"))))}},78314:(e,t,a)=>{a.d(t,{C:()=>s});var n=a(67294),r=a(47886),c=a(27641),l=a(93e3),o=a(36553);const s=(e,t)=>{const{capture:a}=(0,c.O)(),s=(0,r.k6)(),i=(0,n.useMemo)((()=>e?.type===l.Qm.IMPORTED||e?.type===l.Qm.PRIMARY&&t===o.Y.Mnemonic),[e?.type,t]);return{showPrivateKey:(0,n.useCallback)((t=>{a("ExportPrivateKeyClicked"),t.stopPropagation(),s.push(`/export-private-key?accountId=${e?.id}`)}),[e?.id,a,s]),isPrivateKeyAvailable:i}}},40042:(e,t,a)=>{a.r(t),a.d(t,{AccountManagerContext:()=>i,AccountManagerProvider:()=>d,useAccountManager:()=>u});var n=a(67294),r=a(9830),c=a(26821),l=a(4563),o=a(32738),s=a(67294);const i=(0,n.createContext)({exitManageMode(){},isManageMode:!1,isAccountSelectable:()=>!1,selectedAccounts:[],selectAccount(){},deselectAccount(){},toggleManageMode(){}}),d=({children:e})=>{const{accounts:t}=(0,r.a)(),{featureFlags:a}=(0,c.d)(),[d,u]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),g=(0,n.useCallback)((e=>{if(!a[l.yy.PRIMARY_ACCOUNT_REMOVAL]||!(0,o.X0)(e))return e.id in t.imported;const{id:n,walletId:r}=e;if(d.includes(n))return!0;const c=t.primary[r];return!!c&&(Object.values(t.primary).flat().length-1!==d.length&&c.slice(c.indexOf(e)+1).every((({id:e})=>d.includes(e))))}),[a,d,t.primary,t.imported]),E=(0,n.useCallback)((e=>{u((t=>[...t,e]))}),[]),y=(0,n.useCallback)(((e,t=!1)=>{u((a=>{const n=a.indexOf(e);return-1===n?a:(a.splice(n,t?a.length-n:1),Array.from(a))}))}),[]),C=(0,n.useCallback)((()=>{p((e=>!e))}),[]),h=(0,n.useCallback)((()=>{p(!1),u([])}),[]);return(0,n.useEffect)((()=>{u([])}),[m]),s.createElement(i.Provider,{value:{exitManageMode:h,isAccountSelectable:g,isManageMode:m,selectedAccounts:d,selectAccount:E,deselectAccount:y,toggleManageMode:C}},e)};function u(){return(0,n.useContext)(i)}}}]);
//# debugId=c86d4bd1-080e-5cf9-8798-a08a080804f8
