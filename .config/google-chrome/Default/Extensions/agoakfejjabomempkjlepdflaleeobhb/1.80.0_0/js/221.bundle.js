"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2666472a-6999-539f-b304-c390cc6acd09")}catch(e){}}();
(self.webpackChunkavalanche_extension=self.webpackChunkavalanche_extension||[]).push([[221],{7325:(e,t,n)=>{n.d(t,{U:()=>l});var r=n(87462),a=n(68483),o=n(2734),i=n(67294),s=n(67294);const c=(0,i.forwardRef)((({sx:e={},...t},n)=>s.createElement(a.Kqy,(0,r.Z)({ref:n,sx:{position:"absolute",overflowY:"hidden",backgroundColor:"common.black",zIndex:2,transition:"height 0.15s ease, opacity 0.15s ease",right:0,...e}},t))));c.displayName="Dropdown";const l=({anchorEl:e,children:t,isOpen:n=!1,width:r,height:a,margin:l,borderRadius:d,setIsOpen:u,containerRef:m})=>{const h=((e,t)=>{if(!e.current||!window.visualViewport)return 0;const n=e.current.getBoundingClientRect().top-e.current.offsetHeight;return t?.current?t.current.getBoundingClientRect().bottom-n:window.visualViewport.height-n-16})(e,m),E=(e=>e?.current?e?.current?.offsetTop+e?.current?.offsetHeight:0)(e),p=(0,i.useRef)(null),{spacing:x}=(0,o.Z)();return(0,i.useEffect)((()=>{const t=t=>{const n=e.current?.contains(t.target),r=p.current?.contains(t.target);n||r||u(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}}),[e,u]),s.createElement(c,{sx:{width:r??"100%",borderRadius:d??x(0,0,1,1),margin:l??"0",height:n?`${a||h}px`:0,top:E,opacity:n?1:0},ref:p},t)}},2409:(e,t,n)=>{n.d(t,{F:()=>d,e:()=>l});var r=n(1336),a=n(36609),o=n(68483),i=n(26793),s=n(13673),c=n(67294);function l(e){return{[s.o.BRIDGE]:(0,a.t)("Bridge"),[s.o.SWAP]:(0,a.t)("Swap"),[s.o.SEND]:(0,a.t)("Send"),[s.o.BUY]:(0,a.t)("Buy"),[s.o.DEFI]:(0,a.t)("DeFi"),[s.o.KEYSTONE]:(0,a.t)("Keystone"),[s.o.TOKEN_DETAILS]:(0,a.t)("Token Details")}[e]}function d({functionName:e,hidePageTitle:t,children:n}){const{t:a}=(0,i.$)();return c.createElement(o.Kqy,{sx:{height:"100%",width:"100%"}},!t&&c.createElement(r.V,{variant:r.D.PRIMARY},a("Sorry")),c.createElement(o.Kqy,{sx:{alignItems:"center",justifyContent:"center",flexGrow:1}},c.createElement(o.go2,{size:72,sx:{mb:3,mt:-9}}),c.createElement(o.ZT$,{variant:"h5",sx:{mb:1}},a("Feature Disabled")),c.createElement(o.ZT$,{size:16,align:"center",height:"24px",sx:{color:"text.secondary"}},a("{{functionName}} is currently unavailable.",{functionName:l(e)??a("This Feature")})),c.createElement(o.ZT$,{sx:{color:"text.secondary"}},a("Please check back later and try again.")),n))}},13673:(e,t,n)=>{n.d(t,{o:()=>p,a:()=>w});var r=n(49530),a=n(32738),o=n(4563),i=n(19108),s=n(9830),c=n(43023),l=n(93e3),d=n(36553),u=n(64631);var m=n(26821),h=n(62334),E=n(23246);let p=function(e){return e.BRIDGE="Bridge",e.BUY="Buy",e.COLLECTIBLES="COLLECTIBLES",e.DEFI="DeFi",e.FEATURE="Feature",e.KEYSTONE="Keystone",e.MANAGE_TOKEN="ManageTokens",e.RECEIVE="Receive",e.SEND="Send",e.SWAP="Swap",e.SIGN="Sign",e.TOKEN_DETAILS="TokenDetails",e}({});const x={[p.BRIDGE]:o.yy.BRIDGE,[p.BUY]:o.yy.BUY,[p.DEFI]:o.yy.DEFI,[p.KEYSTONE]:o.yy.KEYSTONE,[p.SEND]:o.yy.SEND,[p.SWAP]:o.yy.SWAP},f=[p.BRIDGE,p.SEND,p.SWAP,p.SIGN],g=(e,t)=>!![r.a_.BITCOIN,r.a_.BITCOIN_TESTNET].includes(e)&&(!Boolean(t.addressBTC)||(0,a.VI)(t)||(0,a.Uc)(t)&&!(0,i.Z)(t)),I=(e,t)=>{const n=(0,h.p)(e),r=(0,E.v)(e);if(!n&&!r)return!1;const o=Boolean(t.addressPVM),i=Boolean(t.addressAVM);return n&&!o||r&&!i||(0,a.VI)(t)||(0,a.Uc)(t)},y={ManageTokens:{networks:[r.a_.BITCOIN,r.a_.AVALANCHE_P,r.a_.AVALANCHE_TEST_P,r.a_.AVALANCHE_X,r.a_.AVALANCHE_TEST_X],complexChecks:[]},Receive:{networks:[],complexChecks:[g,I]},Send:{networks:[],complexChecks:[g,I]},Bridge:{networks:[r.a_.AVALANCHE_P,r.a_.AVALANCHE_TEST_P,r.a_.AVALANCHE_X,r.a_.AVALANCHE_TEST_X,r.a_.DFK,r.a_.DFK_TESTNET,r.a_.SWIMMER,r.a_.SWIMMER_TESTNET],complexChecks:[g]}},S={COLLECTIBLES:[r.a_.AVALANCHE_MAINNET_ID,r.a_.AVALANCHE_TESTNET_ID,r.a_.ETHEREUM_HOMESTEAD],Swap:[r.a_.AVALANCHE_MAINNET_ID],Buy:[r.a_.AVALANCHE_MAINNET_ID,r.a_.AVALANCHE_TESTNET_ID]},w=e=>{const{network:t}=(0,c.g)(),n=(()=>{const{walletDetails:e}=(0,u.t)(),{accounts:{active:t}}=(0,s.a)();return e?.type===d.Y.Seedless&&t?.type===l.Qm.PRIMARY})(),{featureFlags:r}=(0,m.d)(),{accounts:{active:a}}=(0,s.a)(),i=Boolean(t&&a),g=e=>{if(n&&f.includes(e)&&!r[o.yy.SEEDLESS_SIGNING])return!1;if(e===p.SEND){if((0,h.B)(t))return Boolean(!!a?.addressPVM&&r[o.yy.SEND]&&r[o.yy.SEND_P_CHAIN]);if((0,E.n)(t))return Boolean(!!a?.addressAVM&&r[o.yy.SEND]&&r[o.yy.SEND_X_CHAIN])}const i=x[e];return!i||r[i]},I=e=>{if(!t||!a)return!1;const n=(0,h.B)(t)&&!a.addressPVM,r=(0,E.n)(t)&&!a.addressAVM;if(e===p.SEND&&(n||r))return!1;if(S[e]&&!S[e].includes(t.chainId))return!1;const o=y[e];if(o){const e=o.networks.includes(t.chainId),n=o.complexChecks.some((e=>e(t.chainId,a)));return!e&&!n}return!0};return t&&a&&e?{isReady:i,isFunctionAvailable:g(e??p.FEATURE),isFunctionSupported:I(e),checkIsFunctionSupported:I,checkIsFunctionAvailable:g}:{isReady:i,isFunctionAvailable:!1,isFunctionSupported:!1,checkIsFunctionSupported:I,checkIsFunctionAvailable:g}}},94338:(e,t,n)=>{n.r(t),n.d(t,{CollectibleSend:()=>K});var r=n(67294),a=n(47886),o=n(49530),i=n(26793),s=n(70582),c=n(68483),l=n(1336),d=n(72250),u=n(27641),m=n(2409),h=n(43023),E=n(45691),p=n(13673),x=n(22127),f=n(9830),g=n(17223),I=n(59700),y=n(65979),S=n(72295),w=n(51931),A=n(5266),T=n(51489),N=n(7278),b=n(87502),k=n(12756),v=n(72698),C=n(2642),_=n(87729),D=n(20930),L=n(12430),R=n(28542),B=n(68044),V=n(67294);const F=({network:e,fromAddress:t,maxFee:n,nativeToken:a,provider:o,tokenList:s,onSuccess:l,onFailure:d,onApproved:m})=>{const{t:h}=(0,i.$)(),E=(0,T.K)(),p=(0,_.e)(),x=(0,L.j)(N.At),[f,g]=(0,r.useState)(x),I=(0,r.useMemo)((()=>f?p(f):void 0),[f,p]),[y,S]=(0,r.useState)(!1),w=(0,B.v)(),[A]=s,{capture:F}=(0,u.O)(),{error:$,isSending:K,isValid:M,isValidating:H,send:O,validate:P}=(0,v.N)({chainId:`0x${e.chainId.toString(16)}`,from:t,maxFee:n,nativeToken:a,provider:o});(0,r.useEffect)((()=>{P({address:f,token:A}),f===E.get("address")&&A.address===E.get("nft")&&A.tokenId===E.get("tokenId")||w({address:f,nft:A,options:{replace:!0}})}),[f,A,P,w,E]);const U=(0,r.useCallback)((async()=>{if(!M)return;const{isApproved:e,hasError:t,result:n,error:r}=await(0,b.E)(O({address:f,token:A}));e&&(m(),t?d(r):l(n))}),[f,M,m,d,l,O,A]),Z=(0,r.useRef)(null);return V.createElement(c.Kqy,{sx:{flexGrow:1,alignItems:"center",width:"100%",pt:1}},V.createElement(c.$B7,{style:{flexGrow:1,maxHeight:"unset",height:"100%"}},V.createElement(c.Kqy,{ref:Z},V.createElement(C.d,{contact:I,onChange:t=>{g(t?.address??""),F("NftSendContactSelected",{chainId:e?.chainId,type:A.type})},isContactsOpen:y,setIsOpen:e=>S(e),containerRef:Z}),V.createElement(c.Kqy,{sx:{pl:2,mt:.5,width:"100%",height:2}},($===k.R.ADDRESS_REQUIRED||$===k.R.INVALID_ADDRESS)&&V.createElement(c.ZT$,{variant:"caption",sx:{color:e=>e.palette.error.main}},(0,D.Z)($))),V.createElement(c.Kqy,{sx:{py:0,px:2,mt:4,width:"100%"}},V.createElement(c.ZT$,{component:"h2",variant:"body2",sx:{fontWeight:"semibold",pb:1}},h("Collectible")),V.createElement(c.Zbd,{sx:{height:"auto",p:2,mt:1}},V.createElement(c.Kqy,{sx:{flexDirection:"row"}},V.createElement(R.V,{width:"80px",height:"auto",url:A.logoSmall||A.logoUri,hover:!1}),V.createElement(c.ZT$,{component:"h2",variant:"body2",sx:{ml:2}},A.name)))))),!y&&V.createElement(c.Kqy,{sx:{flexGrow:1,justifyContent:"flex-end",pt:3,px:2,pb:3,width:"100%",alignItems:"center"}},V.createElement(c.ua7,{placement:"top",sx:{width:"100%"},title:$?V.createElement(c.ZT$,{variant:"body2"},(0,D.Z)($)):""},V.createElement(c.zxk,{"data-testid":"send-next-button",variant:"contained",size:"large",onClick:U,disabled:H||!M||K,isLoading:K,fullWidth:!0},h("Next")))))};var $=n(67294);function K(){const{t:e}=(0,i.$)(),t=(0,a.k6)(),{network:n}=(0,h.g)(),{networkFee:T}=(0,g.Y)(),{accounts:{active:N}}=(0,f.a)(),{captureEncrypted:b}=(0,u.O)(),k=(0,d._)(!1),{nft:v}=(0,A.K)(),{isFunctionAvailable:C,isFunctionSupported:_}=(0,p.a)(p.o.COLLECTIBLES),D=k.find((({type:e})=>e===E.iv.NATIVE)),L=(0,r.useMemo)((()=>n?(0,I.f)(n):void 0),[n]),R=(0,r.useMemo)((()=>n?.vmName===o.mK.EVM?N?.addressC??"":""),[N?.addressC,n?.vmName]),B=(0,r.useCallback)((r=>{b("NftSendSucceeded",{address:R,txHash:r,chainId:n?.chainId,type:v?.type}),(0,y.E)({title:e("Send Successful"),url:(0,S.tf)(n,r),label:e("View in Explorer")}),t.push("/home")}),[R,n,b,t,e,v?.type]),V=(0,r.useCallback)((()=>{s.ZP.error(e("Transaction Failed")),b("NftSendFailed",{address:R,chainId:n?.chainId,type:v?.type})}),[b,R,n?.chainId,e,v?.type]),K=(0,r.useCallback)((()=>{b("NftSendStarted",{address:R,chainId:n?.chainId,type:v?.type})}),[b,R,n?.chainId,v?.type]),M=(0,r.useMemo)((()=>[v]),[v]);if(!_)return $.createElement(x.n,{functionName:p.o.COLLECTIBLES,network:n?.chainName||"Testnet"});if(!C)return $.createElement(m.F,{functionName:p.o.COLLECTIBLES});const H=!(v&&N&&n&&R&&L&&T?.low?.maxFee&&D&&M.length);return $.createElement(c.Kqy,{sx:{width:"100%",height:"100%"}},$.createElement(l.V,null,e("Send")),H&&$.createElement(w.Z,null),!H&&n.vmName===o.mK.EVM&&$.createElement(F,{fromAddress:R,network:n,maxFee:T.low.maxFee,nativeToken:D,provider:L,tokenList:M,onApproved:K,onFailure:V,onSuccess:B}),!H&&n.vmName!==o.mK.EVM&&$.createElement(x.n,{functionName:p.o.COLLECTIBLES,network:n?.chainName||"Testnet"}))}},28542:(e,t,n)=>{n.d(t,{V:()=>g});var r=n(67294);const a=e=>e&&[".mp4",".webm",".ogg"].includes(e.slice(e.lastIndexOf("."))),o=(e,t)=>{let n=0;if(!e)return t(!0);try{const r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return t(!0);a.drawImage(e,0,0);const o=Math.floor(r.height/2),i=Math.floor(r.width/2),s=a.getImageData(i,0,i,o).data;for(let e=0,t=s.length;e<t;e+=4){const t=s[e],r=s[e+1],a=s[e+2];if(void 0===t||void 0===r||void 0===a)throw new Error("Undefined color");n+=Math.floor((t+r+a)/3)}return t(Math.floor(n/(i*o))<127.5)}catch{return t(!0)}};var i=n(68483),s=n(94277),c=n(67294);function l({isOverlay:e,onClick:t,onClose:n,backdropImageUrl:r,shouldUseLightIcon:a,children:o}){return e?c.createElement(s.a,null,c.createElement(i.xuv,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(${r})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",filter:"blur(16px)"}}),c.createElement(i.Kqy,{sx:{height:"100%",width:"100%"}},c.createElement(i.Kqy,{sx:{px:1,py:4,alignItems:"flex-start"}},c.createElement(i.hU,{onClick:n,"data-testid":"page-title-back-button",disableRipple:!0,sx:{p:0}},c.createElement(i.wyc,{size:32,sx:{color:a?"primary.light":"primary.contrastText"}}))),o)):c.createElement(i.Kqy,{onClick:t,sx:{width:"100%",flexDirection:"row"}},o)}var d=n(68792),u=n(57832),m=n(90948),h=n(13550),E=n.n(h),p=n(67294);const x=(0,m.ZP)(d.J)`
  width: ${({width:e})=>e??"32px"};
  height: ${({height:e})=>e??"32px"};
  max-width: ${({maxWidth:e})=>e??"unset"};
  max-height: ${({maxHeight:e})=>e??"unset"};
  border: 1px solid ${({theme:e})=>`${e.palette.common.black}1A`};
  box-sizing: border-box;
  filter: drop-shadow(
    0px 10px 25px ${({theme:e})=>`${e.palette.common.black}40`}
  );
  backdrop-filter: blur(25px);
  border-radius: ${({hasBorderRadius:e,borderRadius:t})=>e?t??"8px":"none"};
  cursor: ${({showPointer:e})=>e?"default":"pointer"};
`,f=(0,m.ZP)("video")`
  width: ${({width:e})=>e??"32px"};
  max-width: ${({maxWidth:e})=>e??"unset"};
  height: ${({height:e})=>e??"32px"};
  max-height: ${({maxHeight:e})=>e??"unset"};
  border: 1px solid ${({theme:e})=>`${e.palette.common.black}1A`};
  box-sizing: border-box;
  filter: drop-shadow(
    0px 10px 25px ${({theme:e})=>`${e.palette.common.black}40`}
  );
  backdrop-filter: blur(25px);
  border-radius: ${({borderRadius:e})=>e??"8px"};
`;function g({url:e,width:t,height:n,maxWidth:s,maxHeight:c,hover:d=!1,margin:m,showPlayIcon:h=!0,controls:g=!1,className:I,borderRadius:y="8px",showBalance:S=!1,balance:w=new(E())(0),showExpandOption:A=!1}){const[T,N]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!1);return p.createElement(i.Kqy,{sx:{margin:m,flexDirection:"row"},className:I},p.createElement(i.Kqy,{sx:{flexDirection:"row",maxWidth:s||"unset",width:t||"32px",position:"absolute",justifyContent:"flex-end",alignItems:"flex-end",columnGap:1,zIndex:3,mr:3,mt:1,pr:1}},S&&p.createElement(i.AfN,{size:"small",sx:{backgroundColor:e=>b?"primary.light":e.palette.grey[600],color:b?"primary.contrastText":"primary.light",px:1},label:w.toString()}),A&&p.createElement(i.m1t,{onClick:()=>{N(!0)},size:"24",sx:{color:b?"primary.light":"primary.contrastText",cursor:"pointer"}})),a(e)?p.createElement(i.Kqy,{sx:{position:"relative",flexDirection:"row"}},p.createElement(f,{width:t,height:n,maxWidth:s,maxHeight:c,hover:d,controls:g,borderRadius:y},p.createElement("source",{src:(0,u.w)(e)})),h&&p.createElement(i.VZf,{sx:{position:"absolute",bottom:"8px",right:"8px",color:"common.white"}})):p.createElement(l,{isOverlay:T,onClick:()=>{S||N(!0)},onClose:()=>N(!1),backdropImageUrl:e,shouldUseLightIcon:b},p.createElement(x,{width:T?"100%":t,height:T?"auto":n,src:e,maxWidth:s,maxHeight:c,hover:d,hasBorderRadius:!T,borderRadius:y,showPointer:A,onLoad:e=>{const t=e.target;t instanceof HTMLImageElement&&o(t,(e=>{k(e)}))}})))}},5266:(e,t,n)=>{n.d(t,{K:()=>c});var r=n(99295),a=n(67294),o=n(47886),i=n(68924),s=n.n(i);const c=()=>{const{search:e}=(0,o.TH)(),{nfts:t}=(0,r.j)();return(0,a.useMemo)((()=>{const{nft:n,tokenId:r}=Object.fromEntries(new URLSearchParams(e).entries()),a=s()(n);return{nft:t.items?.find((e=>e.address===a&&e.tokenId===r)),tokenId:s()(r)}}),[t,e])}},68044:(e,t,n)=>{n.d(t,{v:()=>a});var r=n(47886);function a(){const{pathname:e}=(0,r.TH)(),t=(0,r.k6)();return({nft:n,address:r,options:a})=>{(a?.replace?t.replace:t.push)({pathname:a?.path??e,search:`?${new URLSearchParams({nft:n?.address??"",tokenId:n?.tokenId??"",address:r??""}).toString()}`})}}}}]);
//# debugId=2666472a-6999-539f-b304-c390cc6acd09
